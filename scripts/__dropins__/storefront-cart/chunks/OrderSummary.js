/*! Copyright 2025 Adobe
All Rights Reserved. */
import{jsx as r,jsxs as p,Fragment as xr}from"@dropins/tools/preact-jsx-runtime.js";import{useState as te,useEffect as ie,useCallback as pr,Fragment as Tr}from"@dropins/tools/preact-compat.js";import{VComponent as U,classes as ar,Slot as le}from"@dropins/tools/lib.js";import{events as cr}from"@dropins/tools/event-bus.js";import{g as gr}from"./persisted-data.js";import{s as ce}from"./resetCart.js";import{g as hr}from"./getEstimatedTotals.js";import{p as yr}from"./acdl.js";import"@dropins/tools/preact-hooks.js";import{Accordion as ir,AccordionSection as lr,ProgressSpinner as Cr,Divider as Sr,Price as u,Icon as ur,Button as Ir}from"@dropins/tools/components.js";/* empty css           */import{O as C}from"./OrderSummaryLine.js";import{S as sr}from"./ChevronDown.js";import{S as or}from"./ChevronUp.js";import{useText as mr,Text as dr}from"@dropins/tools/i18n.js";import{S as fr}from"./Coupon.js";import{S as br}from"./GiftCard.js";const _r=({className:ne,children:$,variant:w="primary",heading:d,loading:X=!0,subTotal:f,shipping:g,discounts:b,taxTotal:S,taxesApplied:A,total:e,primaryAction:z,coupons:s,giftCards:D,totalSaved:_,appliedGiftCards:m,printedCard:t,itemsGiftWrapping:x,orderGiftWrapping:T,updateLineItems:o=P=>P,...W})=>{const[P,v]=te(!1),l=mr({checkout:"Cart.PriceSummary.checkout",discountedPrice:"Cart.CartItem.discountedPrice",download:"Cart.CartItem.download",heading:"Cart.Cart.heading",message:"Cart.CartItem.message",regularPrice:"Cart.CartItem.regularPrice",recipient:"Cart.CartItem.recipient",sender:"Cart.CartItem.sender",file:"Cart.CartItem.file",files:"Cart.CartItem.files",orderSummary:"Cart.PriceSummary.orderSummary",taxesBreakdownTitle:"Cart.PriceSummary.taxes.breakdown",taxTotal:"Cart.PriceSummary.taxes.total",taxEstimated:"Cart.PriceSummary.taxes.estimated",taxTotalOnly:"Cart.PriceSummary.taxes.totalOnly",showTaxBreakdown:"Cart.PriceSummary.taxes.showBreakdown",hideTaxBreakdown:"Cart.PriceSummary.taxes.hideBreakdown",taxToBeDetermined:"Cart.PriceSummary.taxToBeDetermined",subtotalLabel:"Cart.PriceSummary.subTotal.label",subtotalWithTaxes:"Cart.PriceSummary.subTotal.withTaxes",subtotalWithoutTaxes:"Cart.PriceSummary.subTotal.withoutTaxes",totalEstimated:"Cart.PriceSummary.total.estimated",totalLabel:"Cart.PriceSummary.total.label",totalWithoutTax:"Cart.PriceSummary.total.withoutTax",totalSaved:"Cart.PriceSummary.total.saved",shippingLabel:"Cart.PriceSummary.shipping.label",zipPlaceholder:"Cart.PriceSummary.shipping.zipPlaceholder",editZipAction:"Cart.PriceSummary.shipping.editZipAction",shippingWithTaxes:"Cart.PriceSummary.shipping.withTaxes",shippingWithoutTaxes:"Cart.PriceSummary.shipping.withoutTaxes",shippingEstimated:"Cart.PriceSummary.shipping.estimated",shippingEstimatedByState:"Cart.PriceSummary.shipping.alternateField.state",shippingEstimatedByZip:"Cart.PriceSummary.shipping.alternateField.zip",destinationLinkAriaLabel:"Cart.PriceSummary.shipping.destinationLinkAriaLabel",applyButton:"Cart.PriceSummary.estimatedShippingForm.apply.label",countryField:"Cart.PriceSummary.estimatedShippingForm.country.placeholder",freeShipping:"Cart.PriceSummary.freeShipping",stateField:"Cart.PriceSummary.estimatedShippingForm.state.placeholder",zipField:"Cart.PriceSummary.estimatedShippingForm.zip.placeholder",printedCardTitle:"Cart.PriceSummary.giftOptionsTax.printedCard.title",printedCardInclTax:"Cart.PriceSummary.giftOptionsTax.printedCard.inclTax",printedCardExclTax:"Cart.PriceSummary.giftOptionsTax.printedCard.exclTax",itemGiftWrappingTitle:"Cart.PriceSummary.giftOptionsTax.itemGiftWrapping.title",itemGiftWrappingInclTax:"Cart.PriceSummary.giftOptionsTax.itemGiftWrapping.inclTax",itemGiftWrappingExclTax:"Cart.PriceSummary.giftOptionsTax.itemGiftWrapping.exclTax",orderGiftWrappingTitle:"Cart.PriceSummary.giftOptionsTax.orderGiftWrapping.title",orderGiftWrappingInclTax:"Cart.PriceSummary.giftOptionsTax.orderGiftWrapping.inclTax",orderGiftWrappingExclTax:"Cart.PriceSummary.giftOptionsTax.orderGiftWrapping.exclTax"}),V=m?r(C,{label:m==null?void 0:m.label,price:m==null?void 0:m.price,classSuffixes:["applied-gift-cards"],children:m==null?void 0:m.content}):null,E=f&&p(C,{label:l.subtotalLabel,price:f.price,classSuffixes:["subTotal"],children:[f.taxIncluded&&r("div",{"data-testid":"sub-total-tax-caption",className:"cart-order-summary__caption",children:r("span",{children:l.subtotalWithTaxes})}),f.taxExcluded?r("div",{"data-testid":"sub-total-tax-caption-excluded",className:"cart-order-summary__caption",children:p("span",{children:[f.priceExcludingTax," ",l.subtotalWithoutTaxes]})}):void 0]}),B=b&&b.length>0&&r(xr,{children:b.map(i=>p(C,{label:i.label,price:i.price,classSuffixes:["discount"],children:[i.coupon&&r(U,{node:i.coupon,className:"cart-order-summary__coupon__code"}),i.caption&&r(U,{node:i.caption,className:"cart-order-summary__caption"})]}))}),n=A&&A.length>0?r(ir,{"data-testid":"tax-breakdown",className:"cart-order-summary__taxes",iconOpen:sr,iconClose:or,children:p(lr,{title:l.taxesBreakdownTitle,secondaryText:!P&&S?r(U,{node:S.price,className:"cart-order-summary__price"}):void 0,renderContentWhenClosed:!1,onStateChange:v,children:[r("div",{className:"cart-order-summary__appliedTaxes",children:A.map(i=>r(C,{label:i.label,price:i.price,classSuffixes:["taxEntry"],labelClassSuffix:"muted"}))}),S&&r(C,{label:l.taxTotal,price:S.price,classSuffixes:["taxTotal"],labelClassSuffix:"muted"})]})}):S&&r(C,{label:S.estimated?l.taxEstimated:l.taxTotalOnly,price:S.price,classSuffixes:["taxTotal"],testId:"tax-total-only"}),h=t!=null&&t.renderContent?p(C,{label:l.printedCardTitle,price:t.taxInclAndExcl||t.taxIncluded?t.priceInclTax:t.priceExclTax,classSuffixes:["printedCardContent"],children:[t.taxIncluded&&r("div",{"data-testid":"printed-card-incl",className:"cart-order-summary__caption",children:r("span",{children:l.printedCardInclTax})}),t.taxInclAndExcl?r("div",{"data-testid":"printed-card-incl-excl",className:"cart-order-summary__caption",children:p("span",{children:[t.priceExclTax," ",l.printedCardExclTax]})}):void 0]}):null,I=x!=null&&x.renderContent?p(C,{label:l.itemGiftWrappingTitle,price:x.taxInclAndExcl||x.taxIncluded?x.priceInclTax:x.priceExclTax,classSuffixes:["itemsGiftWrappingContent"],children:[x.taxIncluded?r("div",{"data-testid":"item-gift-wrapping-incl",className:"cart-order-summary__caption",children:r("span",{children:l.itemGiftWrappingInclTax})}):null,x.taxInclAndExcl?r("div",{"data-testid":"item-gift-wrapping-incl-excl",className:"cart-order-summary__caption",children:p("span",{children:[x.priceExclTax," ",l.itemGiftWrappingExclTax]})}):null]}):null,Z=T!=null&&T.renderContent?p(C,{label:l.orderGiftWrappingTitle,price:T.taxInclAndExcl||T.taxIncluded?T.priceInclTax:T.priceExclTax,classSuffixes:["orderGiftWrappingContent"],children:[T.taxIncluded&&r("div",{"data-testid":"order-gift-wrapping-incl",className:"cart-order-summary__caption",children:r("span",{children:l.orderGiftWrappingInclTax})}),T.taxInclAndExcl?r("div",{"data-testid":"order-gift-wrapping-incl-excl",className:"cart-order-summary__caption",children:p("span",{children:[T.priceExclTax," ",l.orderGiftWrappingExclTax]})}):void 0]}):null,j=[{key:"subTotalContent",sortOrder:100,content:E},...g?[{key:"shippingContent",sortOrder:200,content:r(U,{node:g,className:"cart-order-summary__shipping"})}]:[],{key:"printedCard",sortOrder:300,content:h},{key:"itemsGiftWrappingContent",sortOrder:400,content:I},{key:"orderGiftWrappingContent",sortOrder:500,content:Z},{key:"discountsContent",sortOrder:600,content:B},{key:"appliedGiftCardsContent",sortOrder:700,content:V},{key:"taxContent",sortOrder:800,content:n},...e?[{key:"taxContent",sortOrder:900,content:r(C,{label:e.estimated?l.totalEstimated:l.totalLabel,price:e.price,classSuffixes:["total","total--padded"],testId:"total-content",labelClassSuffix:"bold"})}]:[],...e!=null&&e.priceWithoutTax?[{key:"totalWithoutTaxContent",sortOrder:1e3,content:r(C,{label:l.totalWithoutTax,price:e.priceWithoutTax,classSuffixes:["totalWithoutTax"],testId:"total-without-tax",labelClassSuffix:"muted"})}]:[],..._?[{key:"totalSavedContent",sortOrder:1100,content:r(C,{label:l.totalSaved,price:_,classSuffixes:["saved"],testId:"total-saved",labelClassSuffix:"muted"})}]:[],...z?[{key:"primaryActionContent",sortOrder:1200,content:r("div",{className:ar(["cart-order-summary__entry","cart-order-summary__primaryAction"]),children:z})}]:[],...s?[{key:"couponsContent",sortOrder:1300,content:r(U,{node:s,className:"cart-order-summary__coupons"})}]:[],...D?[{key:"giftCardsContent",sortOrder:1400,content:r(U,{node:D,className:"cart-order-summary__gift-cards"})}]:[]],Q=o(j).sort((i,y)=>i.sortOrder-y.sortOrder);return p("div",{...W,className:ar(["cart-order-summary",["cart-order-summary--loading",X],[`cart-order-summary__${w}`,w],ne]),children:[X&&r(Cr,{className:"cart-order-summary__spinner"}),p("div",{className:"cart-order-summary__heading",children:[d&&r(U,{node:d,className:"cart-order-summary__heading-text"}),r(Sr,{variant:"primary",className:"cart-order-summary__divider-primary"})]}),r("div",{className:"cart-order-summary__content",children:Q.map(i=>Array.isArray(i.content)?r(ir,{className:i.className,actionIconPosition:"right",iconOpen:sr,iconClose:or,children:r(lr,{defaultOpen:!1,title:i.title,renderContentWhenClosed:!1,children:i.content.map(y=>y.content)})},i.key):i.content)})]})},Pr=()=>{const[ne,$]=te(!1),[w,d]=te();return{handleEstimateTotals:(f,g)=>{$(!0);const{shippingCountry:b,shippingState:S="",shippingStateId:A,shippingZip:e=""}=f,z={countryCode:b,postcode:e,region:{region:S,id:A},shipping_method:{carrier_code:(g==null?void 0:g.carrier_code)||"",method_code:(g==null?void 0:g.method_code)||""}};hr(z).then(s=>{var D,_,m,t,x,T,o,W,P,v,l,V,E,B,n,h,I,Z,j,Q;s&&d({estimatedTaxTotal:{amount:(D=s.totalTax)==null?void 0:D.value,currency:(_=s.totalTax)==null?void 0:_.currency},estimatedSubTotal:{excludingTax:{amount:(t=(m=s.subtotal)==null?void 0:m.excludingTax)==null?void 0:t.value,currency:(T=(x=s.subtotal)==null?void 0:x.excludingTax)==null?void 0:T.currency},includingTax:{amount:(W=(o=s.subtotal)==null?void 0:o.includingTax)==null?void 0:W.value,currency:(v=(P=s.subtotal)==null?void 0:P.includingTax)==null?void 0:v.currency},includingDiscountOnly:{amount:(V=(l=s.subtotal)==null?void 0:l.includingDiscountOnly)==null?void 0:V.value,currency:(B=(E=s.subtotal)==null?void 0:E.includingDiscountOnly)==null?void 0:B.currency}},estimatedGrandTotalPrice:{includingTax:{amount:(n=s.total)==null?void 0:n.includingTax.value,currency:(h=s.total)==null?void 0:h.includingTax.currency},excludingTax:{amount:(I=s.total)==null?void 0:I.excludingTax.value,currency:(Z=s.total)==null?void 0:Z.excludingTax.currency}},estimatedAppliedTaxes:{taxes:(j=s.appliedTaxes)==null?void 0:j.map(i=>{var y,N;return{label:i.label,amount:{value:(y=i.amount)==null?void 0:y.value,currency:(N=i.amount)==null?void 0:N.currency}}})},estimatedItems:{items:(Q=s.items)==null?void 0:Q.map(i=>{var y,N,H,q,J,K,R,Y,G,M;return{uid:i.uid,price:{amount:(y=i.price)==null?void 0:y.value,currency:(N=i.price)==null?void 0:N.currency},taxedPrice:{amount:(H=i.taxedPrice)==null?void 0:H.value,currency:(q=i.taxedPrice)==null?void 0:q.currency},rowTotal:{amount:(J=i.rowTotal)==null?void 0:J.value,currency:(K=i.rowTotal)==null?void 0:K.currency},rowTotalIncludingTax:{amount:(R=i.rowTotalIncludingTax)==null?void 0:R.value,currency:(Y=i.rowTotalIncludingTax)==null?void 0:Y.currency},regularPrice:{amount:(G=i.regularPrice)==null?void 0:G.value,currency:(M=i.regularPrice)==null?void 0:M.currency}}})}})}).finally(()=>{$(!1)})},estimatedTotals:w,setEstimatedTotals:d,loading:ne}},vr=({children:ne,initialData:$=null,routeCheckout:w,slots:d,errors:X,showTotalSaved:f,enableCoupons:g,enableGiftCards:b,updateLineItems:S=e=>e,...A})=>{var y,N,H,q,J,K,R,Y,G,M,ue,se,oe,de,me,xe,pe,Te,ge,he,ye,Ce,Se,Ie,fe,be,_e,Pe,ve,Ee,Ne,ke,we,Ae,De,We,Be,Le,Fe,Oe,Ue,Xe,ze,Ve,Ze,je,Qe,$e,He,qe,Je,Ke,Re,Ye,Ge,Me,er,rr,tr;const[e,z]=te($),[s,D]=te(!1),_=e==null?void 0:e.isVirtual;g=g??!0,b=b??!0;const{handleEstimateTotals:m,estimatedTotals:t,setEstimatedTotals:x,loading:T}=Pr(),o=(y=ce.config)==null?void 0:y.shoppingCartDisplaySetting,W=(o==null?void 0:o.subtotal)==="INCLUDING_TAX",P=(o==null?void 0:o.subtotal)==="INCLUDING_EXCLUDING_TAX",v=o==null?void 0:o.zeroTax,l=()=>(e==null?void 0:e.appliedGiftCards.reduce((a,c)=>a+c.appliedBalance.value,0))??0,V=a=>{var k,ee,re;if(!(a!=null&&a.code))return null;const c=(k=a==null?void 0:a.currentBalance)==null?void 0:k.value,L=(ee=a==null?void 0:a.appliedBalance)==null?void 0:ee.value,F=c-L!==0?c-L:L,O=(re=a==null?void 0:a.currentBalance)==null?void 0:re.currency;return p(Tr,{children:[p("span",{className:"cart-order-summary__coupon__code",children:[r(ur,{source:br,size:"16"}),r("span",{children:a==null?void 0:a.code})]}),p("span",{className:"cart-order-summary__caption",children:[r(dr,{id:"Cart.PriceSummary.giftCard.appliedGiftCards.remainingBalance"}),r(u,{className:"cart-order-summary__caption",weight:"normal",size:"small",amount:F,currency:O})]})]},a.code)},E=(N=ce.config)==null?void 0:N.cartGiftWrapping,B=(H=ce.config)==null?void 0:H.cartPrintedCard,n=e==null?void 0:e.totalGiftOptions;ie(()=>{const a=cr.on("cart/data",c=>{var F,O,k;z(c);const L=(F=c==null?void 0:c.addresses)==null?void 0:F.shipping,ae=c==null?void 0:c.isVirtual;(L||ae)&&x(null),t==null&&x({estimatedTaxTotal:{amount:(O=c==null?void 0:c.totalTax)==null?void 0:O.value,currency:(k=c==null?void 0:c.totalTax)==null?void 0:k.currency}})},{eager:!0});return()=>{a==null||a.off()}},[]),ie(()=>{D(X)},[X]),ie(()=>{const a=cr.on("shipping/estimate",c=>{var F,O,k,ee,re,nr;const L={shippingCountry:(F=c==null?void 0:c.address)==null?void 0:F.countryCode,shippingState:(O=c==null?void 0:c.address)==null?void 0:O.region,shippingStateId:(k=c==null?void 0:c.address)==null?void 0:k.regionId,shippingZip:(ee=c==null?void 0:c.address)==null?void 0:ee.postCode},ae={carrier_code:((re=c==null?void 0:c.shippingMethod)==null?void 0:re.carrierCode)||"",method_code:((nr=c==null?void 0:c.shippingMethod)==null?void 0:nr.methodCode)||""};m(L,ae)});return()=>{a==null||a.off()}},[m]);const h=mr({checkout:"Cart.PriceSummary.checkout",free:"Cart.PriceSummary.total.free",orderSummary:"Cart.PriceSummary.orderSummary",taxToBeDetermined:"Cart.PriceSummary.taxToBeDetermined"}),I=(e==null?void 0:e.hasOutOfStockItems)||s,Z=pr(()=>{!I&&e&&yr(e,ce.locale)},[I,e]),j=!_&&(d!=null&&d.EstimateShipping)?r(le,{name:"EstimateShipping",slot:d.EstimateShipping},"estimateShippingId"):void 0;if(!Object.keys(e??{}).length||(e==null?void 0:e.totalQuantity)===0)return null;const Q=g&&(d!=null&&d.Coupons)?r(le,{name:"Coupons",slot:d.Coupons},"couponsId"):void 0,i=b&&(d!=null&&d.GiftCards)?r(le,{name:"GiftCards",slot:d.GiftCards},"giftCardId"):void 0;return r(_r,{...A,"data-testid":"cart-order-summary",heading:r("div",{children:h.orderSummary}),shipping:j,coupons:Q,giftCards:i,loading:T,updateLineItems:S,appliedGiftCards:(q=e==null?void 0:e.appliedGiftCards)!=null&&q.length?{label:r(dr,{id:"Cart.PriceSummary.giftCard.appliedGiftCards.label",plural:(J=e==null?void 0:e.appliedGiftCards)==null?void 0:J.length,fields:{count:(K=e==null?void 0:e.appliedGiftCards)==null?void 0:K.length}}),price:r(u,{className:"cart-order-summary__price",amount:-l(),currency:(Y=(R=e==null?void 0:e.appliedGiftCards)==null?void 0:R[0])==null?void 0:Y.appliedBalance.currency}),content:(G=e==null?void 0:e.appliedGiftCards)==null?void 0:G.map(V).filter(Boolean)}:void 0,printedCard:{renderContent:!!((M=n==null?void 0:n.printedCard)!=null&&M.value),taxIncluded:B==="INCLUDING_TAX",taxInclAndExcl:B==="INCLUDING_EXCLUDING_TAX",priceExclTax:r(u,{"data-testid":"printed-card",amount:(ue=n==null?void 0:n.printedCard)==null?void 0:ue.value,currency:(se=n==null?void 0:n.printedCard)==null?void 0:se.currency}),priceInclTax:r(u,{amount:(oe=n==null?void 0:n.printedCardInclTax)==null?void 0:oe.value,currency:(de=n==null?void 0:n.printedCardInclTax)==null?void 0:de.currency})},itemsGiftWrapping:{renderContent:!!((me=n==null?void 0:n.giftWrappingForItems)!=null&&me.value),taxIncluded:E==="INCLUDING_TAX",taxInclAndExcl:E==="INCLUDING_EXCLUDING_TAX",priceExclTax:r(u,{amount:(xe=n==null?void 0:n.giftWrappingForItems)==null?void 0:xe.value,currency:(pe=n==null?void 0:n.giftWrappingForItems)==null?void 0:pe.currency}),priceInclTax:r(u,{amount:(Te=n==null?void 0:n.giftWrappingForItemsInclTax)==null?void 0:Te.value,currency:(ge=n==null?void 0:n.giftWrappingForItemsInclTax)==null?void 0:ge.currency})},orderGiftWrapping:{renderContent:!!((he=n==null?void 0:n.giftWrappingForOrder)!=null&&he.value),taxIncluded:E==="INCLUDING_TAX",taxInclAndExcl:E==="INCLUDING_EXCLUDING_TAX",priceExclTax:r(u,{amount:(ye=n==null?void 0:n.giftWrappingForOrder)==null?void 0:ye.value,currency:(Ce=n==null?void 0:n.giftWrappingForOrder)==null?void 0:Ce.currency}),priceInclTax:r(u,{amount:(Se=n==null?void 0:n.giftWrappingForOrderInclTax)==null?void 0:Se.value,currency:(Ie=n==null?void 0:n.giftWrappingForOrderInclTax)==null?void 0:Ie.currency})},subTotal:{taxIncluded:W&&!v,taxExcluded:P,zeroTaxSubtotal:v,priceExcludingTax:(fe=t==null?void 0:t.estimatedSubTotal)!=null&&fe.excludingTax?r(u,{"data-testid":"subtotal",...(be=t==null?void 0:t.estimatedSubTotal)==null?void 0:be.excludingTax}):r(u,{"data-testid":"subtotal",amount:(Pe=(_e=e==null?void 0:e.subtotal)==null?void 0:_e.excludingTax)==null?void 0:Pe.value,currency:(Ee=(ve=e==null?void 0:e.subtotal)==null?void 0:ve.excludingTax)==null?void 0:Ee.currency}),price:!v&&W||!v&&P?(Ne=t==null?void 0:t.estimatedSubTotal)!=null&&Ne.includingTax?r(u,{"data-testid":"subtotal",...(ke=t==null?void 0:t.estimatedSubTotal)==null?void 0:ke.includingTax}):r(u,{"data-testid":"subtotal",amount:(we=e==null?void 0:e.subtotal.includingTax)==null?void 0:we.value,currency:(Ae=e==null?void 0:e.subtotal.includingTax)==null?void 0:Ae.currency}):r(u,{"data-testid":"subtotal",amount:(We=(De=e==null?void 0:e.subtotal)==null?void 0:De.excludingTax)==null?void 0:We.value,currency:(Le=(Be=e==null?void 0:e.subtotal)==null?void 0:Be.excludingTax)==null?void 0:Le.currency})},discounts:(Fe=e==null?void 0:e.appliedDiscounts)==null?void 0:Fe.map(a=>{var c;return{label:a.label,price:r(u,{"data-testid":"summary-discount-total",amount:-a.amount.value,currency:a.amount.currency,sale:!0}),coupon:a!=null&&a.coupon?p("span",{children:[r(ur,{source:fr,size:"16"}),(c=a==null?void 0:a.coupon)==null?void 0:c.code]}):void 0}}),taxTotal:_||t&&t.estimatedTaxTotal==null?{price:r("span",{"data-testid":"tax-total-tbd",children:h.taxToBeDetermined})}:{price:t!=null&&t.estimatedTaxTotal?r(u,{"data-testid":"tax-total-estimated",...t==null?void 0:t.estimatedTaxTotal}):r(u,{"data-testid":"tax-total-actual",amount:(Oe=e==null?void 0:e.totalTax)==null?void 0:Oe.value,currency:(Ue=e==null?void 0:e.totalTax)==null?void 0:Ue.currency}),estimated:(!t||!t.estimatedTaxTotal)&&!((Xe=e==null?void 0:e.addresses)!=null&&Xe.shipping)},taxesApplied:_?void 0:o!=null&&o.fullSummary?(Ve=((ze=t==null?void 0:t.estimatedAppliedTaxes)==null?void 0:ze.taxes)||(e==null?void 0:e.appliedTaxes))==null?void 0:Ve.map(a=>({label:a.label,price:r(u,{"data-testid":"applied-taxes",amount:a.amount.value,currency:a.amount.currency})})):void 0,total:{price:t!=null&&t.estimatedGrandTotalPrice?((je=(Ze=t==null?void 0:t.estimatedGrandTotalPrice)==null?void 0:Ze.includingTax)==null?void 0:je.amount)===0?r("span",{"data-testid":"total-including-tax",children:h.free}):r(u,{"data-testid":"total-including-tax-estimated",...(Qe=t==null?void 0:t.estimatedGrandTotalPrice)==null?void 0:Qe.includingTax}):(($e=e==null?void 0:e.total)==null?void 0:$e.includingTax.value)===0?r("span",{"data-testid":"total-including-tax",children:h.free}):r(u,{"data-testid":"total-including-tax-actual",amount:(He=e==null?void 0:e.total)==null?void 0:He.includingTax.value,currency:(qe=e==null?void 0:e.total)==null?void 0:qe.includingTax.currency}),estimated:(!t||!!(t!=null&&t.estimatedTaxTotal))&&!((Je=e==null?void 0:e.addresses)!=null&&Je.shipping),priceWithoutTax:o!=null&&o.grandTotal?t!=null&&t.estimatedAppliedTaxes?((Re=(Ke=t==null?void 0:t.estimatedGrandTotalPrice)==null?void 0:Ke.excludingTax)==null?void 0:Re.amount)===0?r("span",{"data-testid":"total-excluding-tax",children:h.free}):r(u,{"data-testid":"total-excluding-tax",...(Ye=t==null?void 0:t.estimatedGrandTotalPrice)==null?void 0:Ye.excludingTax}):((Ge=e==null?void 0:e.total)==null?void 0:Ge.excludingTax.value)===0?r("span",{"data-testid":"total-excluding-tax",children:h.free}):r(u,{"data-testid":"total-excluding-tax",amount:(Me=e==null?void 0:e.total)==null?void 0:Me.excludingTax.value,currency:(er=e==null?void 0:e.total)==null?void 0:er.excludingTax.currency}):void 0},primaryAction:w&&r(Ir,{"data-testid":"checkout-button",variant:"primary",disabled:I,"aria-disabled":I,href:I?void 0:w({cartId:e.id}),onClick:Z,children:h.checkout}),totalSaved:f?r(u,{amount:(rr=e==null?void 0:e.discount)==null?void 0:rr.value,currency:(tr=e==null?void 0:e.total)==null?void 0:tr.includingTax.currency}):void 0})};vr.getInitialData=async function(){return gr()};export{vr as O};
