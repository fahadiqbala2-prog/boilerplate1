/*! Copyright 2025 Adobe
All Rights Reserved. */
function C(n){const{cart:t,locale:e="en-US"}=n;return{id:t.id,items:_(t.items,e),prices:{subtotalExcludingTax:t.subtotal.excludingTax,subtotalIncludingTax:t.subtotal.includingTax},totalQuantity:t.totalUniqueItems,possibleOnepageCheckout:void 0,giftMessageSelected:void 0,giftWrappingSelected:void 0,source:void 0}}function _(n,t){return n.map(e=>({canApplyMsrp:!1,formattedPrice:P(t,e.price.currency,e.price.value),id:e.uid,prices:{price:e.price},product:{productId:e.uid,name:e.name,sku:e.sku,topLevelSku:e.topLevelSku,specialToDate:void 0,specialFromDate:void 0,newToDate:void 0,newFromDate:void 0,createdAt:void 0,updatedAt:void 0,manufacturer:void 0,countryOfManufacture:void 0,categories:e.categories,productType:e.itemType,pricing:{regularPrice:e.regularPrice.value,minimalPrice:void 0,maximalPrice:void 0,specialPrice:D(e),tierPricing:void 0,currencyCode:e.regularPrice.currency},canonicalUrl:e.canonicalUrl,mainImageUrl:e.image.src,image:{src:e.image.src,alt:e.image.alt}},configurableOptions:void 0,quantity:e.quantity}))}function P(n,t,e){const a=n.replace("_","-");return new Intl.NumberFormat(a,{style:"currency",currency:t}).format(e)}function D(n){var t;if(n.discounted)return(t=n.price)==null?void 0:t.value}const o={SHOPPING_CART_CONTEXT:"shoppingCartContext",PRODUCT_CONTEXT:"productContext",CHANGED_PRODUCTS_CONTEXT:"changedProductsContext"},c={OPEN_CART:"open-cart",ADD_TO_CART:"add-to-cart",REMOVE_FROM_CART:"remove-from-cart",SHOPPING_CART_VIEW:"shopping-cart-view",INITIATE_CHECKOUT:"initiate-checkout"};function l(){return window.adobeDataLayer=window.adobeDataLayer||[],window.adobeDataLayer}function i(n,t){const e=l();e.push({[n]:null}),e.push({[n]:t})}function T(n,t){l().push(a=>{const p=a.getState?a.getState():{};a.push({event:n,eventInfo:{...p,...t}})})}function R(n,t,e){const a=C({cart:n,locale:e});i(o.SHOPPING_CART_CONTEXT,{...a}),T(c.OPEN_CART),_(t,e).forEach(s=>{i(o.PRODUCT_CONTEXT,s.product),d(a,[s],c.ADD_TO_CART)})}function I(n,t){const e=C({cart:n,locale:t});i(o.SHOPPING_CART_CONTEXT,{...e}),T(c.SHOPPING_CART_VIEW)}function d(n,t,e){const a={items:t};i(o.SHOPPING_CART_CONTEXT,{...n}),i(o.CHANGED_PRODUCTS_CONTEXT,{...a}),T(e)}function h(n,t,e){const a=C({cart:n,locale:e}),p=a.items,s=l(),g=s.getState?s.getState():{},{shoppingCartContext:{items:E=[]}={}}=g;t.forEach(O=>{const u=E.find(f=>f.id===O.uid),r=p.find(f=>f.id===O.uid);!r&&!u||(!u&&r?(i(o.PRODUCT_CONTEXT,r.product),d(a,[r],c.ADD_TO_CART)):u&&!r?(i(o.PRODUCT_CONTEXT,u.product),d(a,[u],c.REMOVE_FROM_CART)):r.quantity>u.quantity?(i(o.PRODUCT_CONTEXT,r.product),d(a,[r],c.ADD_TO_CART)):(i(o.PRODUCT_CONTEXT,r.product),d(a,[r],c.REMOVE_FROM_CART)))})}function A(n,t){const e=C({cart:n,locale:t});i(o.SHOPPING_CART_CONTEXT,{...e}),T(c.INITIATE_CHECKOUT)}export{h as a,R as b,I as c,A as p};
