import*as e from"@dropins/tools/event-bus.js";import*as t from"@dropins/tools/fetch-graphql.js";export const id=5340;export const ids=[5340];export const modules={8572:(e,t,r)=>{r.d(t,{_:()=>z,i:()=>F});var i=r(2532),n=r(4944),l=r(3792),o=r(3388),s=r(8412),a=()=>(0,s.im)(o.W,{className:"bill-to-shipping-address__skeleton",children:(0,s.im)(o.K,{variant:"row",size:"small"})}),d=r(5536),c=r.n(d),p=r(7008),u=r.n(p),f=r(1496),b=r.n(f),g=r(9356),v=r.n(g),m=r(9904),y=r.n(m),h=r(9960),O={attributes:{"data-dropin":"storefront-checkout","data-sdk":"0.21.0"},styleTagTransform:function(e,t){window._loadedStyles=window._loadedStyles??{};const r=e?.match(/^\.dropin-(\w+)/)?.[1],i=t.getAttribute("data-sdk"),n=r?`sdk/${r}`:t.getAttribute("data-dropin");t.setAttribute("data-dropin",n),t.removeAttribute("data-sdk");const l=window._loadedStyles[n];if(l){const n=function(e,t){const[r,i]=e.split("-"),[n,l]=t.split("-"),o=[...r.split("."),i],s=[...n.split("."),l],a=parseInt(o[0],10),d=parseInt(s[0],10);if(a!==d)return a>d?e:t;const c=parseInt(o[1],10),p=parseInt(s[1],10);if(c!==p)return c>p?e:t;const u=parseInt(o[2],10),f=parseInt(s[2],10);if(u!==f)return u>f?e:t;if(o[3]&&s[3]){const r=/(alpha|beta)(.*)/,i=o[3].match(r),n=s[3].match(r),l=i[1],a=n[1],d=parseInt(i[2],10),c=parseInt(n[2],10);if(l===a)return d>c?e:t;if("alpha"===l&&"beta"===a)return t;if("beta"===l&&"alpha"===a)return e}return o[3]?t:e}(i,l.sdk);if(!r||r&&n===l.sdk){const t=l.style.textContent;l.style.textContent=`${t}\n/* --- MERGED --- */\n${e}`}else r&&n!==l.sdk&&(l.style.textContent=`/* --- UPGRADED --- */\n${e}`);return void t.remove()}t.textContent=e,window._loadedStyles[n]={sdk:i,core:r,style:t};const o=document.querySelector("head"),{lastDropinStyleInjected:s,lastSDKStyleInjected:a}=window._loadedStyles;r?(a?o.insertBefore(t,a.nextSibling):o.insertBefore(t,o.firstChild),window._loadedStyles.lastSDKStyleInjected=t):(s?o.insertBefore(t,s.nextSibling):a?o.insertBefore(t,a.nextSibling):o.insertBefore(t,o.firstChild),window._loadedStyles.lastDropinStyleInjected=t)}};O.setAttributes=v(),O.insert=b().bind(null,"head"),O.domAPI=u(),O.insertStyleElement=y();c()(h.c,O);h.c&&h.c.locals&&h.c.locals;var S=r(2460),j=["className","isInitialized","checked"];function k(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,i)}return r}function w(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?k(Object(r),!0).forEach((function(t){P(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):k(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function P(e,t,r){var i;return(t="symbol"==typeof(i=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,t||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?i:String(i))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function I(e,t){if(null==e)return{};var r,i,n=function(e,t){if(null==e)return{};var r,i,n={},l=Object.keys(e);for(i=0;i<l.length;i++)r=l[i],t.indexOf(r)>=0||(n[r]=e[r]);return n}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(i=0;i<l.length;i++)r=l[i],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}var _=e=>{var{className:t,isInitialized:r=!0,checked:i=!0}=e,o=I(e,j),d=(0,S.cF)({title:"Checkout.BillToShippingAddress.title"});return r?(0,s.im)("div",{className:"checkout-bill-to-shipping-address",children:(0,s.im)(l.y,w({"data-testid":"bill-to-shipping-checkbox",className:(0,n.i)(["checkout-bill-to-shipping-address__checkbox",t]),checked:i,name:"checkout-bill-to-shipping-address__checkbox",label:d.title},o))}):(0,s.im)(a,{})},B=r(5668),x=r(9488),A=r(2796),C=r(40),D=r(2236),N=["className","children"];function E(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,i)}return r}function M(e,t,r){var i;return(t="symbol"==typeof(i=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,t||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?i:String(i))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function T(e,t){if(null==e)return{};var r,i,n=function(e,t){if(null==e)return{};var r,i,n={},l=Object.keys(e);for(i=0;i<l.length;i++)r=l[i],t.indexOf(r)>=0||(n[r]=e[r]);return n}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(i=0;i<l.length;i++)r=l[i],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function F(e,t,r){return!t&&!r||!(!t||!r)&&e.every((e=>{var i=e.code;return function(e,t,r){var i=e[r],n=t[r];return void 0===i&&void 0===n||null===i&&null===n||("object"==typeof i&&"object"==typeof n?JSON.stringify(i)===JSON.stringify(n):i===n)}(t,r,i)}))}var z=e=>{var{className:t,children:r}=e,n=T(e,N),{data:l}=B.cartSignal.value,o=(null==l?void 0:l.id)||"",a=x.isBillToShippingSignal.value.checked,{isInitialized:d}=(e=>{var t,{isBillToShipping:r}=e,[i,n]=(0,A.oT)(!1),{fields:l}=(0,D.q)(),o=B.cartSignal.value.data,s=!!o,a=null==o?void 0:o.billingAddress,d=null==o||null===(t=o.shippingAddresses)||void 0===t?void 0:t[0];return(0,A.YB)((()=>{if(l){var e=localStorage.getItem(C.c);if(!i&&e)return n(!0),void(r.value={checked:"true"===e,setByUser:!1});if(!i&&s){n(!0);var t=F(l,a,d);r.value={checked:null!=o&&o.billingAddress?t:r.value.checked,setByUser:!1}}}}),[a,null==o?void 0:o.billingAddress,l,s,r,i,d]),{isInitialized:i}})({isBillToShipping:x.isBillToShippingSignal});return(0,s.im)(_,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?E(Object(r),!0).forEach((function(t){M(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):E(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({className:t,checked:a,isInitialized:d,onChange:e=>{var t,r=e.target.checked,n=B.cartSignal.value.data,l=Boolean(null==n||null===(t=n.shippingAddresses)||void 0===t?void 0:t[0]);if(x.isBillToShippingSignal.value={checked:r,setByUser:!0},localStorage.setItem(C.c,r.toString()),d&&r&&l){var s=new AbortController;return(0,i.W)({signal:s.signal,cartId:o,input:{same_as_shipping:!0}}).catch((e=>{console.error(e)})),()=>{s.abort()}}},disabled:B.cartSignal.value.pending},n))}},40:(e,t,r)=>{r.d(t,{c:()=>i});var i="is_bill_to_shipping_address"},2872:(e,t,r)=>{r.d(t,{M:()=>f});var i=r(2532),n=r(5124),l=r(5520),o=r(8572),s=r(6476),a=r(2236),d=r(5668),c=r(9488),p=r(2796),u=r(8412),f=()=>{var{fields:e}=(0,a.q)(),t=(0,p.yK)(null),{data:r}=d.cartSignal.value,f=(null==r?void 0:r.id)||"",{checked:b,setByUser:g}=c.isBillToShippingSignal.value,v=!b,m=(0,p.kZ)((e=>(0,i.W)({signal:e.signal,cartId:f,input:{address:b?void 0:(0,n.ek)(e.address),same_as_shipping:b}})),[f,b]),y=(0,p.kZ)((()=>{var t,r=d.cartSignal.value.data;return!(0,o.i)(e,null==r?void 0:r.billingAddress,null==r||null===(t=r.shippingAddresses)||void 0===t?void 0:t[0])}),[e]);return(0,p.YB)((()=>{if(g){var e=new AbortController;return b||t.current.triggerSaveAddress(e.signal),()=>{e.abort()}}}),[b,g]),(0,u.im)(l.i,{"data-testid":"billing-form",ref:t,name:s.M,addressType:"billing_address",headingId:"Checkout.BillingAddress.title",saveAddressHandler:m,shouldAutoFillForm:y,style:{display:v?"block":"none"},className:"checkout-billing-address-form"})}},6476:(e,t,r)=>{r.d(t,{M:()=>i});var i="billing_address"},3084:(e,t,r)=>{r.d(t,{Mh:()=>n.M,Mx:()=>i.M,cp:()=>i.M});var i=r(2872),n=r(6476)},9960:(e,t,r)=>{r.d(t,{c:()=>s});var i=r(6008),n=r.n(i),l=r(2076),o=r.n(l)()(n());o.push([e.id,".checkout-bill-to-shipping-address{\n  display:grid;\n}\n\n.checkout-bill-to-shipping-address label{\n  font:var(--type-body-2-default-font);\n  letter-spacing:var(--type-body-2-default-letter-spacing);\n  gap:0;\n}\n",""]);const s=o},8122:(t,r,i)=>{t.exports=(e=>{var t={};return i.d(t,e),t})({events:()=>e.events})},8616:(e,r,i)=>{e.exports=(e=>{var t={};return i.d(t,e),t})({FetchGraphQL:()=>t.FetchGraphQL})}};import r from"../runtime.js";import*as i from"../76.js";r.C(i);import*as n from"../184.js";r.C(n);import*as l from"../196.js";r.C(l);import*as o from"../4708.js";r.C(o);import*as s from"../9792.js";r.C(s);import*as a from"../5068.js";r.C(a);import*as d from"../3860.js";r.C(d);import*as c from"../9064.js";r.C(c);import*as p from"./BillingForm.js";r.C(p);var u,f=(u=3084,r(r.s=u)),b=f.Mh,g=f.Mx,v=f.cp;export{b as BILLING_FORM_NAME,g as BillingForm,v as default};