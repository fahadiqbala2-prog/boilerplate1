{"version":3,"file":"Checkout.js","sources":["../../../ElsieSDK/packages/elsie/src/icons/Cart.svg","../../../ElsieSDK/packages/elsie/src/icons/OrderError.svg","../../src/components/EmptyCart/EmptyCart.tsx","../../src/components/OutOfStock/OutOfStock.tsx","../../src/components/ServerError/ServerError.tsx","../../src/containers/Checkout/constants.ts","../../src/containers/Checkout/Checkout.tsx"],"sourcesContent":["import * as React from \"react\";\nconst SvgCart = (props) => /* @__PURE__ */ React.createElement(\"svg\", { width: 24, height: 24, viewBox: \"0 0 24 24\", fill: \"none\", xmlns: \"http://www.w3.org/2000/svg\", ...props }, /* @__PURE__ */ React.createElement(\"g\", { clipPath: \"url(#clip0_102_196)\" }, /* @__PURE__ */ React.createElement(\"path\", { vectorEffect: \"non-scaling-stroke\", d: \"M18.3601 18.16H6.5601L4.8801 3H2.3501M19.6701 19.59C19.6701 20.3687 19.0388 21 18.2601 21C17.4814 21 16.8501 20.3687 16.8501 19.59C16.8501 18.8113 17.4814 18.18 18.2601 18.18C19.0388 18.18 19.6701 18.8113 19.6701 19.59ZM7.42986 19.59C7.42986 20.3687 6.79858 21 6.01986 21C5.24114 21 4.60986 20.3687 4.60986 19.59C4.60986 18.8113 5.24114 18.18 6.01986 18.18C6.79858 18.18 7.42986 18.8113 7.42986 19.59Z\", stroke: \"currentColor\", strokeLinejoin: \"round\" }), /* @__PURE__ */ React.createElement(\"path\", { vectorEffect: \"non-scaling-stroke\", d: \"M5.25 6.37L20.89 8.06L20.14 14.8H6.19\", stroke: \"currentColor\", strokeLinejoin: \"round\" })), /* @__PURE__ */ React.createElement(\"defs\", null, /* @__PURE__ */ React.createElement(\"clipPath\", { id: \"clip0_102_196\" }, /* @__PURE__ */ React.createElement(\"rect\", { vectorEffect: \"non-scaling-stroke\", width: 19.29, height: 19.5, fill: \"white\", transform: \"translate(2.3501 2.25)\" }))));\nexport default SvgCart;\n","import * as React from \"react\";\nconst SvgOrderError = (props) => /* @__PURE__ */ React.createElement(\"svg\", { width: 24, height: 24, viewBox: \"0 0 24 24\", fill: \"none\", xmlns: \"http://www.w3.org/2000/svg\", ...props }, /* @__PURE__ */ React.createElement(\"g\", { clipPath: \"url(#clip0_4797_15331)\" }, /* @__PURE__ */ React.createElement(\"path\", { vectorEffect: \"non-scaling-stroke\", d: \"M10.25 20.91L1.5 17.55V6.51996L10.25 9.92996V20.91Z\", stroke: \"currentColor\", strokeLinecap: \"round\", strokeLinejoin: \"round\" }), /* @__PURE__ */ React.createElement(\"path\", { vectorEffect: \"non-scaling-stroke\", d: \"M6.24023 4.64001L14.9902 8.06001V11.42\", stroke: \"currentColor\", strokeLinecap: \"round\", strokeLinejoin: \"round\" }), /* @__PURE__ */ React.createElement(\"path\", { className: \"error-icon\", vectorEffect: \"non-scaling-stroke\", d: \"M19 13.31L15.5 19.37H22.5L19 13.31Z\", stroke: \"currentColor\", strokeLinecap: \"round\", strokeLinejoin: \"round\" }), /* @__PURE__ */ React.createElement(\"path\", { className: \"error-icon\", vectorEffect: \"non-scaling-stroke\", d: \"M19.0202 17.11H18.9802L18.9502 15.56H19.0502L19.0202 17.11ZM18.9602 18.29V18.06H19.0502V18.29H18.9602Z\", stroke: \"currentColor\", strokeLinecap: \"round\", strokeLinejoin: \"round\" }), /* @__PURE__ */ React.createElement(\"path\", { vectorEffect: \"non-scaling-stroke\", d: \"M19 12.16V6.51996L10.25 9.92996V20.91L14.27 19.37L14.4 19.32\", stroke: \"currentColor\", strokeLinejoin: \"round\" }), /* @__PURE__ */ React.createElement(\"path\", { vectorEffect: \"non-scaling-stroke\", d: \"M1.5 6.51999L10.25 3.04999L19 6.51999L10.25 9.92999L1.5 6.51999Z\", stroke: \"currentColor\", strokeLinecap: \"round\", strokeLinejoin: \"round\" })), /* @__PURE__ */ React.createElement(\"defs\", null, /* @__PURE__ */ React.createElement(\"clipPath\", { id: \"clip0_4797_15331\" }, /* @__PURE__ */ React.createElement(\"rect\", { width: 22, height: 18.86, fill: \"white\", transform: \"translate(1 2.54999)\" }))));\nexport default SvgOrderError;\n","import { FunctionComponent } from 'preact';\nimport { HTMLAttributes } from 'preact/compat';\nimport { classes } from '@adobe/elsie/lib';\nimport '@/checkout/components/EmptyCart/EmptyCart.css';\nimport { Button, Icon, IllustratedMessage } from '@adobe/elsie/components';\nimport { Cart } from '@adobe/elsie/icons';\nimport { useText } from '@adobe/elsie/i18n';\n\nexport interface EmptyCartProps extends HTMLAttributes<HTMLDivElement> {\n  title?: string;\n  routeHome?: () => string;\n}\n\nexport const EmptyCart: FunctionComponent<EmptyCartProps> = ({\n  className,\n  title,\n  routeHome,\n  ...props\n}) => {\n  const translations = useText({\n    Title: 'Checkout.EmptyCart.title',\n    Button: 'Checkout.EmptyCart.button',\n  });\n\n  return (\n    <IllustratedMessage\n      {...props}\n      data-testid=\"checkout-empty-cart\"\n      className={classes(['checkout-empty-cart', className])}\n      heading={title ?? translations.Title}\n      icon={\n        <Icon\n          className={classes(['checkout-empty-cart__icon'])}\n          source={Cart}\n        />\n      }\n      action={\n        routeHome?.() ? (\n          <Button\n            className=\"checkout-empty-cart__button\"\n            size=\"medium\"\n            variant=\"primary\"\n            key=\"routeHome\"\n            type=\"submit\"\n            href={routeHome?.()}\n          >\n            {translations.Button}\n          </Button>\n        ) : undefined\n      }\n    />\n  );\n};\n","import { FunctionComponent, JSX } from 'preact';\nimport { HTMLAttributes } from 'preact/compat';\nimport { classes } from '@adobe/elsie/lib';\nimport '@/checkout/components/OutOfStock/OutOfStock.css';\nimport { Text, useText } from '@adobe/elsie/i18n';\nimport { Button, Icon, IllustratedMessage } from '@adobe/elsie/components';\nimport { OrderError } from '@adobe/elsie/icons';\n\nexport interface OutOfStockProps\n  extends Omit<HTMLAttributes<HTMLDivElement>, 'icon'> {\n  icon?: FunctionComponent<JSX.SVGAttributes<SVGElement>>;\n  routeCart?: () => string;\n}\n\nexport const OutOfStock: FunctionComponent<OutOfStockProps> = ({\n  className,\n  icon,\n  routeCart,\n  ...props\n}) => {\n  const translations = useText({\n    Title: 'Checkout.OutOfStock.title',\n    Message: 'Checkout.OutOfStock.message',\n  });\n\n  return (\n    <div\n      {...props}\n      className={classes(['checkout-out-of-stock', className])}\n      data-testid=\"checkout-out-of-stock\"\n    >\n      <IllustratedMessage\n        heading={translations.Title}\n        message={<p>{translations.Message}</p>}\n        icon={\n          <Icon\n            source={icon ?? OrderError}\n            className={classes(['checkout-out-of-stock__icon'])}\n          />\n        }\n      />\n\n      {routeCart?.() && (\n        <Button\n          className=\"checkout-out-of-stock__button\"\n          size=\"medium\"\n          variant=\"primary\"\n          key=\"routeCart\"\n          type=\"submit\"\n          href={routeCart?.()}\n        >\n          <Text id=\"Checkout.OutOfStock.button\" />\n        </Button>\n      )}\n    </div>\n  );\n};\n","import { FunctionComponent } from 'preact';\nimport { HTMLAttributes } from 'preact/compat';\nimport { classes } from '@adobe/elsie/lib';\nimport '@/checkout/components/ServerError/ServerError.css';\nimport { MarkupText, useText } from '@adobe/elsie/i18n';\nimport { Button, Icon, IllustratedMessage } from '@adobe/elsie/components';\nimport { OrderError } from '@adobe/elsie/icons';\n\nexport interface ServerErrorProps\n  extends Omit<HTMLAttributes<HTMLDivElement>, 'icon'> {\n  errorMessage: string;\n  contactSupport?: string;\n  onClick?: (e: any) => void;\n}\n\nexport const ServerError: FunctionComponent<ServerErrorProps> = ({\n  className,\n  errorMessage,\n  contactSupport,\n  ...props\n}) => {\n  const { onClick } = props;\n\n  const translations = useText({\n    Title: 'Checkout.ServerError.title',\n    Message: 'Checkout.ServerError.message',\n    ContactSupport: 'Checkout.ServerError.contactSupport',\n    Button: 'Checkout.ServerError.button',\n  });\n\n  return (\n    <IllustratedMessage\n      aria-invalid=\"true\"\n      aria-describedby=\"checkout-server-error__message\"\n      aria-live=\"polite\"\n      className={classes(['checkout-server-error', className])}\n      data-testid=\"checkout-server-error\"\n      heading={errorMessage ?? translations.Title}\n      message={\n        <p id={classes(['checkout-server-error__message'])}>\n          {translations.Message}\n          <br />\n          <MarkupText id=\"\">\n            {contactSupport ?? translations.ContactSupport}\n          </MarkupText>\n        </p>\n      }\n      icon={\n        <Icon\n          className={classes(['checkout-server-error__icon'])}\n          source={OrderError}\n        />\n      }\n      action={\n        <Button\n          className={classes(['checkout-server-error__button'])}\n          onClick={onClick}\n        >\n          {translations.Button}\n        </Button>\n      }\n    />\n  );\n};\n","export const OUT_OF_STOCK = 'OUT_OF_STOCK';\n","import { ProductStockStatus } from '@/checkout/__generated__/types';\nimport {\n  getCheckoutData,\n  getStockStatus,\n  placeOrder,\n  UnexpectedError,\n} from '@/checkout/api';\nimport {\n  Checkout as CheckoutComponent,\n  EmptyCart,\n  OutOfStock,\n  ServerError,\n} from '@/checkout/components';\nimport {\n  BillingForm,\n  BillToShippingAddress,\n  CartSummary,\n  ErrorBanner,\n  LoginForm as Login,\n  OrderSummary,\n  PaymentMethods,\n  PlaceOrder,\n  ShippingForm,\n  ShippingMethods,\n} from '@/checkout/containers';\nimport { PaymentMethodSlotContext } from '@/checkout/containers/PaymentMethods';\nimport { cartSignal, isBillToShippingSignal } from '@/checkout/signals';\nimport { useText } from '@adobe/elsie/i18n';\nimport { Slot, SlotProps } from '@adobe/elsie/lib';\nimport { events } from '@adobe/event-bus';\nimport {\n  HTMLAttributes,\n  useCallback,\n  useEffect,\n  useState,\n} from 'preact/compat';\n\nexport type PreselectedAddressFields = {\n  countryCode?: string;\n  region?: string;\n  postCode?: string;\n};\n\nexport type PreselectedShippingMethod = {\n  carrierCode: string;\n  methodCode: string;\n};\n\nexport type PreselectedCartData = {\n  address?: PreselectedAddressFields;\n  shippingMethod?: PreselectedShippingMethod;\n};\n\nexport interface CheckoutProps extends HTMLAttributes<HTMLDivElement> {\n  cartId?: string;\n  routeHome?: () => string;\n  routeCart?: () => string;\n  slots?: {\n    BillingForm?: SlotProps;\n    BillToShipping?: SlotProps;\n    CartSummary?: SlotProps;\n    Login?: SlotProps;\n    OrderSummary?: SlotProps;\n    PaymentMethods?: SlotProps<PaymentMethodSlotContext>;\n    PlaceOrder?: SlotProps;\n    ShippingForm?: SlotProps;\n    ShippingMethods?: SlotProps;\n  };\n  preselectedCartData?: PreselectedCartData;\n}\n\nexport const Checkout = (props: CheckoutProps) => {\n  const {\n    className,\n    cartId,\n    slots,\n    routeHome,\n    routeCart,\n    preselectedCartData,\n    ...restProps\n  } = props;\n  const [serverError, setServerError] = useState('');\n  const [handlePlaceOrder, setHandlePlaceOrder] =\n    useState<() => Promise<void> | undefined>();\n  const [isComplete, setIsComplete] = useState(false);\n  const [hasOutOfStock, setHasOutOfStock] = useState(false);\n\n  const hasProvidedCartId = Boolean(cartId);\n  const { data: cartData } = cartSignal.value;\n\n  const isInitialized = cartData !== undefined;\n  const isVirtual = cartData?.virtual || false;\n  const isPending = hasProvidedCartId && !isInitialized;\n  const hasErrors = serverError !== '';\n  const cartItems = cartData?.items;\n  const hasCartItems = cartItems !== undefined && cartItems!.length > 0;\n  const isEmptyCart = !isPending && !hasCartItems;\n\n  const translations = useText({\n    CheckoutUnexpectedError: 'Checkout.ServerError.unexpected',\n  });\n\n  const defaultPlaceOrderHandler = useCallback(async () => {\n    if (!cartData) return;\n    await placeOrder(cartData.id);\n    cartSignal.value = { pending: false };\n    setIsComplete(true);\n  }, [cartData]);\n\n  const onPlaceOrder = (fn: () => Promise<void>) => {\n    setHandlePlaceOrder(() => fn);\n  };\n\n  const dismissError = async () => {\n    setServerError('');\n\n    if (!cartData) return;\n    await loadCheckoutData(cartData.id);\n  };\n\n  const handleServerError = (error: any) => {\n    setServerError(\n      error instanceof TypeError || error instanceof UnexpectedError\n        ? translations.CheckoutUnexpectedError\n        : error.message\n    );\n  };\n\n  const loadCheckoutData = async (cartId: string) => {\n    const data = await getCheckoutData(cartId);\n    if (data?.virtual) {\n      isBillToShippingSignal.value = { checked: false, setByUser: false };\n    }\n  };\n\n  const checkStockStatus = async (cartId: string) => {\n    const result = await getStockStatus(cartId);\n    setHasOutOfStock(result === ProductStockStatus.OutOfStock);\n  };\n\n  /*\n  Load the checkout data with the provided cart reference and check for out of stock items.\n  After placing the order, the cart will no longer be available but the reference received via prop will still be present.\n  When the checkout is complete, do nothing even if we still have the old cart reference.\n */\n  useEffect(() => {\n    if (!cartId || isComplete) return;\n    loadCheckoutData(cartId);\n    checkStockStatus(cartId);\n  }, [cartId, isComplete]);\n\n  useEffect(() => {\n    const onCartData = events.on(\n      'cart/data',\n      (cart) => {\n        if (!cartId && cart) {\n          loadCheckoutData(cart.id);\n          checkStockStatus(cart.id);\n        }\n      },\n      { eager: true }\n    );\n\n    return () => {\n      onCartData?.off();\n    };\n  }, [cartId]);\n\n  if (isComplete) {\n    return null;\n  }\n\n  if (isEmptyCart) {\n    return <EmptyCart routeHome={routeHome} />;\n  }\n\n  if (hasErrors) {\n    return <ServerError errorMessage={serverError} onClick={dismissError} />;\n  }\n\n  const renderMain = () => {\n    if (hasOutOfStock) {\n      return (\n        <CheckoutComponent.Main\n          outOfStock={<OutOfStock routeCart={routeCart} />}\n        />\n      );\n    }\n\n    return (\n      <CheckoutComponent.Main\n        sections={{\n          billingAddress: (\n            <Slot name=\"BillingForm\" slot={slots?.BillingForm}>\n              <BillingForm />\n            </Slot>\n          ),\n          billToShippingAddress: isVirtual ? undefined : (\n            <Slot name=\"BillToShipping\" slot={slots?.BillToShipping}>\n              <BillToShippingAddress />\n            </Slot>\n          ),\n          login: (\n            <Slot name=\"Login\" slot={slots?.Login}>\n              <Login />\n            </Slot>\n          ),\n          paymentMethods: (\n            <PaymentMethods\n              isShippingInfoRequired={!isVirtual}\n              onPlaceOrder={onPlaceOrder}\n              handleServerError={handleServerError}\n              paymentMethodsSlot={slots?.PaymentMethods}\n            />\n          ),\n          placeOrder: (\n            <PlaceOrder\n              onClick={handlePlaceOrder ?? defaultPlaceOrderHandler}\n              handleServerError={handleServerError}\n            />\n          ),\n          shippingAddress: isVirtual ? undefined : (\n            <Slot name=\"ShippingForm\" slot={slots?.ShippingForm}>\n              <ShippingForm preselectedFields={preselectedCartData?.address} />\n            </Slot>\n          ),\n          shippingMethods: isVirtual ? undefined : (\n            <Slot name=\"ShippingMethods\" slot={slots?.ShippingMethods}>\n              <ShippingMethods\n                preSelectedMethod={preselectedCartData?.shippingMethod}\n              />\n            </Slot>\n          ),\n        }}\n      />\n    );\n  };\n\n  const renderAside = () => {\n    return (\n      <CheckoutComponent.Aside\n        sections={{\n          cartSummary: (\n            <Slot name=\"CartSummary\" slot={slots?.CartSummary}>\n              <CartSummary routeCart={routeCart} />\n            </Slot>\n          ),\n          orderSummary: (\n            <Slot name=\"OrderSummary\" slot={slots?.OrderSummary}>\n              <OrderSummary />\n            </Slot>\n          ),\n        }}\n      />\n    );\n  };\n\n  return (\n    <CheckoutComponent\n      className={className}\n      banner={<ErrorBanner />}\n      {...restProps}\n    >\n      {renderAside()}\n      {renderMain()}\n    </CheckoutComponent>\n  );\n};\n"],"names":["EmptyCart","className","title","routeHome","props","translations","useText","Title","Button","_jsx","IllustratedMessage","classes","heading","icon","Icon","source","Cart","action","size","variant","type","href","children","undefined","OutOfStock","routeCart","Message","_jsxs","message","OrderError","Text","id","ServerError","errorMessage","contactSupport","onClick","ContactSupport","MarkupText","OUT_OF_STOCK","Checkout","cartId","slots","preselectedCartData","restProps","serverError","setServerError","useState","handlePlaceOrder","setHandlePlaceOrder","isComplete","setIsComplete","hasOutOfStock","setHasOutOfStock","hasProvidedCartId","Boolean","data","cartData","cartSignal","value","isInitialized","isVirtual","virtual","isPending","hasErrors","cartItems","items","hasCartItems","length","isEmptyCart","CheckoutUnexpectedError","defaultPlaceOrderHandler","useCallback","placeOrder","pending","onPlaceOrder","fn","dismissError","loadCheckoutData","handleServerError","error","TypeError","UnexpectedError","getCheckoutData","isBillToShippingSignal","checked","setByUser","checkStockStatus","result","getStockStatus","ProductStockStatus","useEffect","onCartData","events","on","cart","eager","off","renderMain","CheckoutComponent","Main","outOfStock","sections","billingAddress","Slot","name","slot","BillingForm","billToShippingAddress","BillToShipping","BillToShippingAddress","login","Login","paymentMethods","PaymentMethods","isShippingInfoRequired","paymentMethodsSlot","PlaceOrder","shippingAddress","ShippingForm","preselectedFields","address","shippingMethods","ShippingMethods","preSelectedMethod","shippingMethod","renderAside","Aside","cartSummary","CartSummary","orderSummary","OrderSummary","banner","ErrorBanner"],"mappings":"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"}