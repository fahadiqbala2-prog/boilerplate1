import{u as V,H as A}from"./usePreselectedFields__op7w4BuLdn.js";import{Card as b,Skeleton as T,SkeletonRow as I,Divider as _,Accordion as H,AccordionSection as $,Icon as N,CartItem as z,Image as P,Price as S}from"@dropins/tools/components/index.js";import"@dropins/tools/preact-hooks.js";import{i as Q,T as R,l as W}from"./countries__BWdjypaepl.js";import"@dropins/tools/event-bus.js";/* empty css                                 */import{jsx as a,jsxs as l,Fragment as g}from"@dropins/tools/preact-jsx-runtime.js";import{CartItemSkeleton as f}from"@adobe/elsie/components/CartItem/CartItemSkeleton";import{S as F}from"./cart-item__CslQ7p973r.js";import*as v from"@dropins/tools/preact-compat.js";import{useState as j,useCallback as M,useMemo as q}from"@dropins/tools/preact-compat.js";import{useText as w,Text as k}from"@dropins/tools/i18n.js";import{c as O}from"./classes__DJBjVfEyCI.js";import{e as B}from"./transform-shipping-methods__C9nMUveXm0.js";function G(n){window.location.href=n}const x=n=>v.createElement("svg",{width:24,height:24,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",...n},v.createElement("path",{vectorEffect:"non-scaling-stroke",d:"M0.75 12C0.75 5.78421 5.78421 0.75 12 0.75C18.2158 0.75 23.25 5.78421 23.25 12C23.25 18.2158 18.2158 23.25 12 23.25C5.78421 23.25 0.75 18.2158 0.75 12Z",stroke:"currentColor"}),v.createElement("path",{vectorEffect:"non-scaling-stroke",d:"M11.75 5.88423V4.75H12.25V5.88423L12.0485 13.0713H11.9515L11.75 5.88423ZM11.7994 18.25V16.9868H12.2253V18.25H11.7994Z",stroke:"currentColor"})),X=()=>a(b,{children:l(T,{"data-testid":"cart-summary-skeleton",className:"checkout-cart-summary-skeleton",style:{gridTemplateColumns:"1fr"},children:[a(I,{variant:"heading",fullWidth:!0,size:"medium"}),a(f,{}),a(f,{}),a(f,{}),a(f,{}),a(f,{}),a(I,{size:"medium",fullWidth:!0})]})}),Z=()=>a(T,{"data-testid":"cart-summary-skeleton",className:"checkout-mobile-cart-summary-skeleton",style:{gridTemplateColumns:"1fr"},children:a(I,{fullWidth:!0,size:"xlarge"})}),D=({type:n,onClick:e,children:s})=>l(g,{children:[a(_,{className:"checkout-cart-summary__divider-bottom",variant:"primary"}),a("button",{"data-testid":`action-${n}`,className:"checkout-cart-summary__action",onClick:e,children:s})]}),U=({title:n,isLoading:e,totalQuantity:s,routeCart:t,items:r,taxIncluded:i,action:o})=>a(g,{children:e?a(Z,{}):a(H,{actionIconPosition:"left",children:l($,{title:`${n} (${s})`,secondaryText:(t==null?void 0:t())&&a("a",{href:t==null?void 0:t(),rel:"noreferrer",children:a(k,{id:"Checkout.CartSummary.editCart"})}),children:[r==null?void 0:r.map(c=>a(E,{item:c,taxIncluded:i},c==null?void 0:c.uid)),o]})})}),J=({title:n,isLoading:e,totalQuantity:s,routeCart:t,items:r,action:i,taxIncluded:o})=>a(g,{children:e?a(X,{}):l(b,{children:[l("div",{className:"checkout-cart-summary__heading",children:[l(A,{level:2,className:"checkout-cart-summary__title",children:[n," (",s,")"]}),(t==null?void 0:t())&&a("a",{className:"checkout-cart-summary__edit",href:t==null?void 0:t(),rel:"noreferrer",children:a(k,{id:"Checkout.CartSummary.editCart"})})]}),a(_,{className:"checkout-cart-summary__divider-top",variant:"primary"}),a("div",{className:"checkout-cart-summary__items",children:r==null?void 0:r.map(c=>a(E,{item:c,taxIncluded:o},c==null?void 0:c.uid))}),i]})}),K=({className:n,...e})=>{const s=w("Checkout.CartSummary.title").title,t=V();return a("div",{className:O(["checkout-cart-summary",n]),children:t==="small"?a(U,{title:s,...e}):a(J,{title:s,...e})})},E=({className:n,item:e,taxIncluded:s=!1})=>{var u,h;const t=w({Sender:"Checkout.CartSummary.GiftCard.sender",Recipient:"Checkout.CartSummary.GiftCard.recipient",Message:"Checkout.CartSummary.GiftCard.message",Download:"Checkout.CartSummary.Downloadable.download",OutOfStockAlert:"Checkout.OutOfStock.alert",..."links"in e&&e.links?{Files:a(k,{id:"Checkout.CartSummary.Downloadable.files",plural:e.links.length,fields:{count:e.links.length}})}:{}});let r=e.regularPrice,i=e.total;s&&(r=e.priceInclTax,i=e.totalInclTax);const o={..."customizableOptions"in e?e.customizableOptions:{},..."configurableOptions"in e?e.configurableOptions:{},..."links"in e&&e.links?{[t.Files]:e.links.join(", ")}:{},..."senderName"in e&&e.senderName?{[t.Sender]:e.senderName}:{},..."recipientName"in e&&e.recipientName?{[t.Recipient]:e.recipientName}:{},..."senderEmail"in e&&"senderName"in e&&e.senderName&&e.senderEmail?{[t.Sender]:`${e.senderName} (${e.senderEmail})`}:{},..."recipientEmail"in e&&"recipientName"in e&&e.recipientName&&e.recipientEmail?{[t.Recipient]:`${e.recipientName} (${e.recipientEmail})`}:{},..."message"in e&&e.message&&e.message!=""?{[t.Message]:c(e.message,60)}:{}};function c(d,m){return d.length>m?`${d.slice(0,m)}...`:d}const y=e.stockStatus===F.OutOfStock?l("span",{"data-testid":"checkout-cart-item-alert",children:[a(N,{source:x,size:"16"}),t.OutOfStockAlert]}):void 0,p=!y&&e.onlyXLeftInStock?l("span",{"data-testid":"checkout-cart-item-low-inventory",children:[a(N,{source:x,size:"16"}),a(k,{id:"Checkout.OutOfStock.lowInventory",plural:e.onlyXLeftInStock,fields:{count:e.onlyXLeftInStock}})]}):void 0;return a("div",{className:O(["checkout-cart-summary-item",n]),children:a(z,{"data-testid":"cart-summary-item",taxIncluded:s,title:a("div",{"data-testid":"product-name",children:e.name}),sku:a("div",{children:e.sku}),quantity:e.quantity,image:a(P,{src:((u=e.image)==null?void 0:u.src)??"",alt:(h=e.image)==null?void 0:h.alt,loading:"lazy",width:"80",height:"80",params:{width:80}}),warning:p,alert:y,configurations:o,price:a(S,{amount:e.regularPrice.value,currency:r.currency,weight:"normal"}),total:l(g,{children:[a(S,{amount:e.regularPrice.value*e.quantity,currency:r.currency,variant:e.discounted?"strikethrough":"default"}),e.discounted&&a(S,{amount:i.value,currency:i.currency,sale:!0})]})},e.uid)})},Y=5,ee={canDisplayMoreItems:!1,hasHiddenItems:!1,isLoading:!0,isTaxIncluded:!1,totalQuantity:0,visibleItems:[]};function ae(n){const{config:e}=Q(),s=e===void 0,t=B.value.data;if(s||t===void 0)return ee;const{cartSummaryMaxItems:i,cartSummaryTotalDisplay:o,taxCartDisplay:c}=e,y=o===R.Quantity,p=c.shoppingCartDisplayPrice===W.IncludingTax,{items:u,totalQty:h}=t,d=y?h:u.length,m=n?i:Math.min(i,Y),C=u.length>m,L=u.slice(0,m);return{canDisplayMoreItems:C&&!n&&m!=i,hasHiddenItems:C,isLoading:!1,isTaxIncluded:p,totalQuantity:d,visibleItems:L}}const fe=({routeCart:n,...e})=>{const[s,t]=j(!1),r=w({ViewAll:"Checkout.CartSummary.viewAll",ViewMore:"Checkout.CartSummary.viewMore"}),{canDisplayMoreItems:i,hasHiddenItems:o,isLoading:c,isTaxIncluded:y,visibleItems:p,totalQuantity:u}=ae(s),h=M(()=>{t(!0)},[]),d=M(()=>{n&&G(n())},[n]),m=q(()=>{if(o){if(i)return a(D,{type:"view-more",onClick:h,children:r.ViewMore});if(n)return a(D,{type:"view-all",onClick:d,children:r.ViewAll})}},[o,i,h,r.ViewMore,r.ViewAll,d,n]);return a(K,{...e,action:m,taxIncluded:y,isLoading:c,items:p,routeCart:n,totalQuantity:u})};export{fe as C,ae as u};
//# sourceMappingURL=CartSummary__BO_nbGK54x.js.map
