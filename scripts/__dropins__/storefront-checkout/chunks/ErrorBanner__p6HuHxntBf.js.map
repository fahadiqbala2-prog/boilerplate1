{"version":3,"file":"ErrorBanner__p6HuHxntBf.js","sources":["../../../ElsieSDK/packages/elsie/src/icons/WarningFilled.svg","../../src/containers/ErrorBanner/ErrorBanner.tsx"],"sourcesContent":["import * as React from \"react\";\nconst SvgWarningFilled = (props) => /* @__PURE__ */ React.createElement(\"svg\", { width: 24, height: 24, viewBox: \"0 0 24 24\", fill: \"none\", xmlns: \"http://www.w3.org/2000/svg\", ...props }, /* @__PURE__ */ React.createElement(\"path\", { vectorEffect: \"non-scaling-stroke\", fillRule: \"evenodd\", clipRule: \"evenodd\", d: \"M1 20.8953L12.1922 1.5L23.395 20.8953H1ZM13.0278 13.9638L13.25 10.0377V9H11.25V10.0377L11.4722 13.9638H13.0278ZM11.2994 16V17.7509H13.2253V16H11.2994Z\", fill: \"currentColor\" }));\nexport default SvgWarningFilled;\n","import { FunctionComponent, useEffect, useState } from 'preact/compat';\nimport { useText } from '@adobe/elsie/i18n';\nimport { events } from '@adobe/event-bus';\nimport { AlertBanner, AlertBannerProps, Icon } from '@adobe/elsie/components';\nimport { WarningFilled } from '@adobe/elsie/icons';\n\nexport const ErrorBanner: FunctionComponent<Partial<AlertBannerProps>> = (\n  props\n) => {\n  const [hasError, setHasError] = useState<boolean>(false);\n\n  useEffect(() => {\n    const subscription = events.on('error', (data) => {\n      if (data?.source === 'checkout' && data?.type === 'network') {\n        setHasError(true);\n      }\n    });\n    return () => {\n      subscription?.off();\n    };\n  }, []);\n\n  const onDismiss = () => {\n    setHasError(false);\n  };\n\n  const translations = useText({\n    message: 'Checkout.ErrorBanner.genericMessage',\n    label: 'Checkout.ErrorBanner.dismissLabel',\n  });\n\n  if (!hasError) return null;\n\n  return (\n    <AlertBanner\n      {...props}\n      data-testid=\"error-banner\"\n      icon={<Icon source={WarningFilled} />}\n      message={<span>{translations.message}</span>}\n      onDismiss={onDismiss}\n      variant=\"warning\"\n    />\n  );\n};\n"],"names":["ErrorBanner","props","hasError","setHasError","useState","useEffect","subscription","events","on","data","source","type","off","onDismiss","translations","useText","message","label","_jsx","AlertBanner","icon","Icon","WarningFilled","children","variant"],"mappings":";;;;;;AACA,MAAM,mBAAmB,CAAC,UAA0B,sBAAM,cAAc,OAAO,EAAE,OAAO,IAAI,QAAQ,IAAI,SAAS,aAAa,MAAM,QAAQ,OAAO,8BAA8B,GAAG,MAAO,GAAkB,sBAAM,cAAc,QAAQ,EAAE,cAAc,sBAAsB,UAAU,WAAW,UAAU,WAAW,GAAG,0JAA0J,MAAM,eAAc,CAAE,CAAC;ACKte,MAAMA,cACXC,CACG,UAAA;AACH,QAAM,CAACC,UAAUC,WAAW,IAAIC,SAAkB,KAAK;AAEvDC,YAAU,MAAM;AACd,UAAMC,eAAeC,OAAOC,GAAG,SAAUC,CAAS,SAAA;AAChD,WAAIA,6BAAMC,YAAW,eAAcD,6BAAME,UAAS,WAAW;AAC3DR,oBAAY,IAAI;AAAA,MAClB;AAAA,IAAA,CACD;AACD,WAAO,MAAM;AACXG,mDAAcM;AAAAA,IAAI;AAAA,EAEtB,GAAG,CAAE,CAAA;AAEL,QAAMC,YAAYA,MAAM;AACtBV,gBAAY,KAAK;AAAA,EAAA;AAGnB,QAAMW,eAAeC,QAAQ;AAAA,IAC3BC,SAAS;AAAA,IACTC,OAAO;AAAA,EAAA,CACR;AAED,MAAI,CAACf;AAAiB,WAAA;AAEtB,SACEgB,IAACC,aAAW;AAAA,IAAA,GACNlB;AAAAA,IACJ,eAAY;AAAA,IACZmB,MAAMF,IAACG,MAAI;AAAA,MAACX,QAAQY;AAAAA,IAAAA,CAAgB;AAAA,IACpCN,SAASE,IAAA,QAAA;AAAA,MAAAK,UAAOT,aAAaE;AAAAA,IAAAA,CAAc;AAAA,IAC3CH;AAAAA,IACAW,SAAQ;AAAA,EAAA,CACT;AAEL;"}