{"version":3,"file":"ErrorBanner__BKKCpXVYQT.js","sources":["../../../ElsieSDK/packages/elsie/src/icons/Close.svg","../../../ElsieSDK/packages/elsie/src/icons/WarningFilled.svg","../../../ElsieSDK/packages/elsie/src/components/AlertBanner/AlertBanner.tsx","../../src/containers/ErrorBanner/ErrorBanner.tsx"],"sourcesContent":["import * as React from \"react\";\nconst SvgClose = (props) => /* @__PURE__ */ React.createElement(\"svg\", { width: 24, height: 24, viewBox: \"0 0 24 24\", fill: \"none\", xmlns: \"http://www.w3.org/2000/svg\", ...props }, /* @__PURE__ */ React.createElement(\"path\", { vectorEffect: \"non-scaling-stroke\", d: \"M18.3599 5.64001L5.62988 18.37\", stroke: \"currentColor\" }), /* @__PURE__ */ React.createElement(\"path\", { vectorEffect: \"non-scaling-stroke\", d: \"M18.3599 18.37L5.62988 5.64001\", stroke: \"currentColor\" }));\nexport default SvgClose;\n","import * as React from \"react\";\nconst SvgWarningFilled = (props) => /* @__PURE__ */ React.createElement(\"svg\", { width: 24, height: 24, viewBox: \"0 0 24 24\", fill: \"none\", xmlns: \"http://www.w3.org/2000/svg\", ...props }, /* @__PURE__ */ React.createElement(\"path\", { vectorEffect: \"non-scaling-stroke\", fillRule: \"evenodd\", clipRule: \"evenodd\", d: \"M1 20.8953L12.1922 1.5L23.395 20.8953H1ZM13.0278 13.9638L13.25 10.0377V9H11.25V10.0377L11.4722 13.9638H13.0278ZM11.2994 16V17.7509H13.2253V16H11.2994Z\", fill: \"currentColor\" }));\nexport default SvgWarningFilled;\n","import { FunctionComponent, VNode } from 'preact';\nimport { HTMLAttributes } from 'preact/compat';\nimport { classes, VComponent } from '@adobe/elsie/lib';\nimport '@adobe/elsie/components/AlertBanner/AlertBanner.css';\nimport { Button, Icon } from '@adobe/elsie/components';\nimport { Close } from '@adobe/elsie/icons';\nimport { useText } from '@adobe/elsie/i18n';\n\nexport interface AlertBannerProps\n  extends Omit<HTMLAttributes<HTMLDivElement>, 'icon' | 'action'> {\n  variant: 'brand' | 'neutral' | 'success' | 'warning';\n  icon?: VNode<HTMLAttributes<SVGSVGElement>>;\n  message: VNode;\n  onDismiss: () => void;\n  action?: {\n    label: string;\n    onClick: (event: Event) => void;\n  };\n}\n\nexport const AlertBanner: FunctionComponent<AlertBannerProps> = ({\n  className,\n  variant,\n  icon,\n  message,\n  onDismiss,\n  action,\n  ...props\n}) => {\n  const translations = useText({\n    dismiss: 'Dropin.InlineAlert.dismissLabel',\n  });\n\n  return (\n    <div\n      {...props}\n      className={classes([\n        className,\n        'dropin-alert-banner',\n        `dropin-alert-banner--${variant}`,\n      ])}\n    >\n      <div className={'dropin-alert-banner__content'}>\n        {icon && (\n          <VComponent\n            node={icon}\n            aria-hidden=\"true\"\n            className={'dropin-alert-banner__icon'}\n          />\n        )}\n\n        {/* Message */}\n        <VComponent\n          node={message}\n          className={classes(['dropin-alert-banner__message'])}\n        />\n      </div>\n\n      <div className={'dropin-alert-banner__actions'}>\n        {action && (\n          <Button\n            variant=\"tertiary\"\n            className={'dropin-alert-banner__action'}\n            onClick={action.onClick}\n            aria-label={action.label}\n          >\n            {action.label}\n          </Button>\n        )}\n\n        <Button\n          icon={<Icon source={Close} size=\"24\" stroke=\"2\" />}\n          className=\"dropin-alert-banner__dismiss-button\"\n          variant=\"primary\"\n          onClick={onDismiss}\n          aria-label={translations.dismiss}\n        />\n      </div>\n    </div>\n  );\n};\n","import { FunctionComponent, useEffect, useState } from 'preact/compat';\nimport { useText } from '@adobe/elsie/i18n';\nimport { events } from '@adobe/event-bus';\nimport { AlertBanner, AlertBannerProps, Icon } from '@adobe/elsie/components';\nimport { WarningFilled } from '@adobe/elsie/icons';\n\nexport const ErrorBanner: FunctionComponent<Partial<AlertBannerProps>> = (\n  props\n) => {\n  const [hasError, setHasError] = useState<boolean>(false);\n\n  useEffect(() => {\n    const subscription = events.on('error', (data) => {\n      if (data?.source === 'checkout' && data?.type === 'network') {\n        setHasError(true);\n      }\n    });\n    return () => {\n      subscription?.off();\n    };\n  }, []);\n\n  const onDismiss = () => {\n    setHasError(false);\n  };\n\n  const translations = useText({\n    message: 'Checkout.ErrorBanner.genericMessage',\n    label: 'Checkout.ErrorBanner.dismissLabel',\n  });\n\n  if (!hasError) return null;\n\n  return (\n    <AlertBanner\n      {...props}\n      data-testid=\"error-banner\"\n      icon={<Icon source={WarningFilled} />}\n      message={<span>{translations.message}</span>}\n      onDismiss={onDismiss}\n      variant=\"warning\"\n    />\n  );\n};\n"],"names":["SvgClose","props","React","SvgWarningFilled","AlertBanner","className","variant","icon","message","onDismiss","action","translations","useText","dismiss","_jsxs","classes","children","_jsx","VComponent","node","Button","onClick","label","Icon","source","Close","size","stroke","ErrorBanner","hasError","setHasError","useState","useEffect","subscription","events","on","data","type","off","WarningFilled"],"mappings":"ucACA,MAAMA,EAAYC,GAA0BC,EAAM,cAAc,MAAO,CAAE,MAAO,GAAI,OAAQ,GAAI,QAAS,YAAa,KAAM,OAAQ,MAAO,6BAA8B,GAAGD,CAAK,EAAoBC,EAAM,cAAc,OAAQ,CAAE,aAAc,qBAAsB,EAAG,iCAAkC,OAAQ,cAAc,CAAE,EAAmBA,EAAM,cAAc,OAAQ,CAAE,aAAc,qBAAsB,EAAG,iCAAkC,OAAQ,cAAc,CAAE,CAAC,ECAjdC,EAAoBF,GAA0BC,EAAM,cAAc,MAAO,CAAE,MAAO,GAAI,OAAQ,GAAI,QAAS,YAAa,KAAM,OAAQ,MAAO,6BAA8B,GAAGD,CAAO,EAAkBC,EAAM,cAAc,OAAQ,CAAE,aAAc,qBAAsB,SAAU,UAAW,SAAU,UAAW,EAAG,yJAA0J,KAAM,cAAc,CAAE,CAAC,ECmBheE,EAAmDA,CAAC,CAC/DC,UAAAA,EACAC,QAAAA,EACAC,KAAAA,EACAC,QAAAA,EACAC,UAAAA,EACAC,OAAAA,EACA,GAAGT,CACL,IAAM,CACJ,MAAMU,EAAeC,EAAQ,CAC3BC,QAAS,iCAAA,CACV,EAED,OACEC,EAAA,MAAA,CAAA,GACMb,EACJI,UAAWU,EAAQ,CACjBV,EACA,sBACC,wBAAuBC,CAAQ,EAAC,CAClC,EAAEU,UAEHF,EAAA,MAAA,CAAKT,UAAW,+BAA+BW,SAC5CT,CAAAA,GACCU,EAACC,EAAU,CACTC,KAAMZ,EACN,cAAY,OACZF,UAAW,2BAAA,CACZ,EAIHY,EAACC,EAAU,CACTC,KAAMX,EACNH,UAAWU,EAAQ,CAAC,8BAA8B,CAAC,CAAA,CACpD,CAAC,CAAA,CACC,EAELD,EAAA,MAAA,CAAKT,UAAW,+BAA+BW,SAC5CN,CAAAA,GACCO,EAACG,EAAM,CACLd,QAAQ,WACRD,UAAW,8BACXgB,QAASX,EAAOW,QAChB,aAAYX,EAAOY,MAAMN,SAExBN,EAAOY,KAAAA,CACF,EAGVL,EAACG,EAAM,CACLb,KAAMU,EAACM,EAAI,CAACC,OAAQC,EAAOC,KAAK,KAAKC,OAAO,GAAA,CAAK,EACjDtB,UAAU,sCACVC,QAAQ,UACRe,QAASZ,EACT,aAAYE,EAAaE,OAAAA,CAC1B,CAAC,CAAA,CACC,CAAC,CAAA,CACH,CAET,EC1Eae,EAER3B,GAAA,CACH,KAAM,CAAC4B,EAAUC,CAAW,EAAIC,EAAkB,EAAK,EAEvDC,EAAU,IAAM,CACd,MAAMC,EAAeC,EAAOC,GAAG,QAAmBC,GAAA,EAC5CA,GAAAA,YAAAA,EAAMZ,UAAW,aAAcY,GAAAA,YAAAA,EAAMC,QAAS,WAChDP,EAAY,EAAI,CAClB,CACD,EACD,MAAO,IAAM,CACXG,GAAAA,MAAAA,EAAcK,KAAI,CAEtB,EAAG,CAAE,CAAA,EAEL,MAAM7B,EAAYA,IAAM,CACtBqB,EAAY,EAAK,CAAA,EAGbnB,EAAeC,EAAQ,CAC3BJ,QAAS,sCACTc,MAAO,mCAAA,CACR,EAED,OAAKO,EAGHZ,EAACb,EAAW,CAAA,GACNH,EACJ,cAAY,eACZM,KAAMU,EAACM,EAAI,CAACC,OAAQe,CAAAA,CAAgB,EACpC/B,QAASS,EAAA,OAAA,CAAAD,SAAOL,EAAaH,OAAAA,CAAc,EAC3CC,UAAAA,EACAH,QAAQ,SAAA,CACT,EAVmB,IAYxB"}