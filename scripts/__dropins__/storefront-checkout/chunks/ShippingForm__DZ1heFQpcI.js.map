{"version":3,"file":"ShippingForm__DZ1heFQpcI.js","sources":["../../src/containers/ShippingForm/ShippingForm.tsx"],"sourcesContent":["import {\n  prepareAddress,\n  setBillingAddress,\n  setShippingAddress,\n} from '@/checkout/api';\nimport AddressForm, {\n  SaveAddressCommand,\n} from '@/checkout/components/AddressForm';\nimport { SHIPPING_FORM_NAME } from '@/checkout/containers/ShippingForm';\nimport { Container } from '@adobe/elsie/lib';\nimport { HTMLAttributes, useCallback } from 'preact/compat';\nimport { PreselectedAddressFields } from '@/checkout/containers';\nimport { cartSignal, isBillToShippingSignal } from '@/checkout/signals';\nimport { AddressFormTypes } from '@/checkout/data/models';\n\nexport interface ShippingFormProps extends HTMLAttributes<HTMLDivElement> {\n  preselectedFields?: PreselectedAddressFields;\n}\n\nexport const ShippingForm: Container<ShippingFormProps> = ({\n  preselectedFields,\n  ...props\n}) => {\n  const { data: CartData } = cartSignal.value;\n  const cartId = CartData?.id || '';\n  const isBillToShipping = isBillToShippingSignal.value.checked;\n\n  const saveAddressHandler = useCallback(\n    (command: SaveAddressCommand) => {\n      return setShippingAddress({\n        signal: command.signal,\n        cartId,\n        address: prepareAddress(command.address),\n      }).then(() => {\n        if (isBillToShipping) {\n          return setBillingAddress({\n            cartId,\n            input: { same_as_shipping: true },\n          });\n        }\n      });\n    },\n    [cartId, isBillToShipping]\n  );\n\n  return (\n    <AddressForm\n      {...props}\n      addressType={AddressFormTypes.SHIPPING}\n      headingId=\"Checkout.ShippingAddress.title\"\n      name={SHIPPING_FORM_NAME}\n      preselectedFields={preselectedFields}\n      saveAddressHandler={saveAddressHandler}\n    />\n  );\n};\n"],"names":["ShippingForm","preselectedFields","props","data","CartData","cartSignal","value","cartId","id","isBillToShipping","isBillToShippingSignal","checked","saveAddressHandler","useCallback","command","setShippingAddress","signal","address","prepareAddress","then","setBillingAddress","input","same_as_shipping","_jsx","AddressForm","addressType","AddressFormTypes","SHIPPING","headingId","name","SHIPPING_FORM_NAME"],"mappings":";;;;;;;;;;;;AAmBO,MAAMA,eAA6CA,CAAC;AAAA,EACzDC;AAAAA,EACA,GAAGC;AACL,MAAM;AACE,QAAA;AAAA,IAAEC,MAAMC;AAAAA,EAAAA,IAAaC,WAAWC;AAChCC,QAAAA,UAASH,qCAAUI,OAAM;AACzBC,QAAAA,mBAAmBC,uBAAuBJ,MAAMK;AAEhDC,QAAAA,qBAAqBC,YACzB,CAACC,YAAgC;AAC/B,WAAOC,mBAAmB;AAAA,MACxBC,QAAQF,QAAQE;AAAAA,MAChBT;AAAAA,MACAU,SAASC,eAAeJ,QAAQG,OAAO;AAAA,IAAA,CACxC,EAAEE,KAAK,MAAM;AACZ,UAAIV,kBAAkB;AACpB,eAAOW,kBAAkB;AAAA,UACvBb;AAAAA,UACAc,OAAO;AAAA,YAAEC,kBAAkB;AAAA,UAAK;AAAA,QAAA,CACjC;AAAA,MACH;AAAA,IAAA,CACD;AAAA,EAAA,GAEH,CAACf,QAAQE,gBAAgB,CAC3B;AAEA,SACEc,IAACC,aAAW;AAAA,IAAA,GACNtB;AAAAA,IACJuB,aAAaC,iBAAiBC;AAAAA,IAC9BC,WAAU;AAAA,IACVC,MAAMC;AAAAA,IACN7B;AAAAA,IACAW;AAAAA,EAAAA,CACD;AAEL;"}