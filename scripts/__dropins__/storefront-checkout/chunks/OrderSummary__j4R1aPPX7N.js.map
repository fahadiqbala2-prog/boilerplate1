{"version":3,"file":"OrderSummary__j4R1aPPX7N.js","sources":["../../src/components/OrderSummary/OrderSummary.tsx","../../src/components/OrderSummary/OrderSummarySkeleton.tsx","../../src/containers/OrderSummary/constants.ts","../../src/containers/OrderSummary/OrderSummary.tsx"],"sourcesContent":["import { FunctionComponent } from 'preact';\nimport { HTMLAttributes } from 'preact/compat';\nimport { classes } from '@adobe/elsie/lib';\nimport '@/checkout/components/OrderSummary/OrderSummary.css';\nimport { Heading } from '@/checkout/components';\nimport { Text } from '@adobe/elsie/i18n';\nimport { Card, Divider, Price, ProgressSpinner } from '@adobe/elsie/components';\nimport { CartTaxItem } from '@/checkout/__generated__/types';\n\nexport type Summary = {\n  total: {\n    inclTax: {\n      amount: number;\n      currency: string;\n    };\n    exclTax?: {\n      amount: number;\n      currency: string;\n    };\n  };\n  subtotal: {\n    amount: number;\n    currency: string;\n    isTaxIncl: boolean;\n  };\n  shipping?: {\n    amount: number;\n    currency: string;\n    isEstimated: boolean;\n  };\n  tax?: {\n    amount: number;\n    currency: string;\n    breakdown?: CartTaxItem[];\n  };\n};\n\nexport interface OrderSummaryProps\n  extends Omit<HTMLAttributes<HTMLDivElement>, 'summary'> {\n  isLoading?: boolean;\n  summary: Summary;\n}\n\nexport const OrderSummary: FunctionComponent<OrderSummaryProps> = ({\n  className,\n  summary,\n  isLoading = false,\n  ...props\n}) => {\n  const { total, subtotal, shipping, tax } = summary;\n\n  return (\n    <Card\n      {...props}\n      className={classes([\n        'checkout-order-summary',\n        ['checkout-order-summary--loading', isLoading],\n        className,\n      ])}\n    >\n      <Heading\n        level={2}\n        className=\"checkout-order-summary__title\"\n        children={<Text id=\"Checkout.OrderSummary.title\" />}\n      />\n\n      <Divider variant=\"primary\" />\n\n      {isLoading && (\n        <ProgressSpinner className=\"checkout-order-summary__spinner\" />\n      )}\n\n      <div\n        data-testid=\"order-summary-subtotal\"\n        className=\"checkout-order-summary__row\"\n      >\n        <p>\n          <Text id=\"Checkout.OrderSummary.subtotal\" />\n        </p>\n        <Price\n          amount={subtotal.amount}\n          currency={subtotal.currency}\n          className={classes(['checkout-order-summary__price', className])}\n        />\n      </div>\n\n      {subtotal.isTaxIncl && (\n        <div\n          data-testid=\"order-summary-subtotal-incl-tax\"\n          className=\"checkout-order-summary__row checkout-order-summary__row--muted\"\n        >\n          <p>\n            <Text id=\"Checkout.OrderSummary.includingTaxes\" />\n          </p>\n        </div>\n      )}\n\n      {shipping != undefined && (\n        <div\n          data-testid=\"order-summary-shipping\"\n          className=\"checkout-order-summary__row\"\n        >\n          <p data-testid=\"order-summary-shipping-label\">\n            {shipping.isEstimated ? (\n              <Text id=\"Checkout.OrderSummary.estimatedShipping\" />\n            ) : (\n              <Text id=\"Checkout.OrderSummary.shipping\" />\n            )}\n          </p>\n\n          {shipping.amount === 0 ? (\n            <p\n              data-testid=\"estimated-shipping\"\n              className=\"checkout-order-summary__price\"\n            >\n              <Text id=\"Checkout.OrderSummary.freeShipping\" />\n            </p>\n          ) : (\n            <Price\n              data-testid=\"estimated-shipping\"\n              amount={shipping.amount}\n              currency={shipping.currency}\n              className={classes(['checkout-order-summary__price', className])}\n            />\n          )}\n        </div>\n      )}\n\n      {tax != undefined && !tax.breakdown && (\n        <div\n          data-testid=\"order-summary-tax\"\n          className=\"checkout-order-summary__row\"\n        >\n          <p>\n            <Text id=\"Checkout.OrderSummary.tax\" />\n          </p>\n          <Price\n            amount={tax.amount}\n            currency={tax.currency}\n            className={classes(['checkout-order-summary__price', className])}\n          />\n        </div>\n      )}\n\n      {tax != undefined && tax.breakdown && (\n        <>\n          <Divider variant=\"secondary\" />\n\n          <div className=\"checkout-order-summary__row checkout-order-summary__row--margin-bottom\">\n            <p>\n              <Text id=\"Checkout.OrderSummary.taxBreakdown\" />\n            </p>\n          </div>\n\n          {tax.breakdown.map((tax) => (\n            <div\n              data-testid=\"order-summary-tax-breakdown\"\n              key={tax.label}\n              className=\"checkout-order-summary__row checkout-order-summary__row--muted\"\n            >\n              <p>{tax.label}</p>\n\n              <Price\n                amount={tax.amount.value!}\n                currency={tax.amount.currency!}\n                className={classes([\n                  'checkout-order-summary__price',\n                  className,\n                ])}\n              />\n            </div>\n          ))}\n\n          <div\n            data-testid=\"order-summary-tax-breakdown-total\"\n            className=\"checkout-order-summary__row checkout-order-summary__row--strong checkout-order-summary__row--margin-top\"\n          >\n            <p>\n              <Text id=\"Checkout.OrderSummary.taxTotal\" />\n            </p>\n\n            <Price\n              amount={tax.amount}\n              currency={tax.currency}\n              className={classes(['checkout-order-summary__price', className])}\n            />\n          </div>\n\n          <Divider variant=\"secondary\" />\n        </>\n      )}\n\n      <div\n        data-testid=\"order-summary-total-incl-tax\"\n        className=\"checkout-order-summary__row checkout-order-summary__row--emphasized\"\n      >\n        <p>\n          <Text id=\"Checkout.OrderSummary.total\" />\n        </p>\n\n        <Price\n          amount={total.inclTax.amount}\n          currency={total.inclTax.currency}\n          className={classes(['checkout-order-summary__price', className])}\n        />\n      </div>\n\n      {total.exclTax != undefined && (\n        <div\n          data-testid=\"order-summary-total-excl-tax\"\n          className=\"checkout-order-summary__row checkout-order-summary__row--muted\"\n        >\n          <p>\n            <Text id=\"Checkout.OrderSummary.totalExclTax\" />\n          </p>\n\n          <Price\n            amount={total.exclTax.amount}\n            currency={total.exclTax.currency}\n            className={classes(['checkout-order-summary__price', className])}\n          />\n        </div>\n      )}\n    </Card>\n  );\n};\n","import { FunctionComponent } from 'preact';\nimport { Skeleton, SkeletonRow } from '@adobe/elsie/components';\n\nexport const OrderSummarySkeleton: FunctionComponent = () => {\n  return (\n    <Skeleton\n      data-testid=\"order-summary-skeleton\"\n      className=\"order-summary__skeleton\"\n    >\n      <SkeletonRow variant=\"heading\" size=\"medium\" />\n      <SkeletonRow variant=\"empty\" size=\"medium\" />\n      <SkeletonRow size=\"large\" fullWidth={true} lines={3} />\n    </Skeleton>\n  );\n};\n","export const ZERO_AMOUNT = 0;\n","import { CartTaxItem } from '@/checkout/__generated__/types';\nimport { OrderSummarySkeleton } from '@/checkout/components';\nimport {\n  OrderSummary as OrderSummaryComponent,\n  Summary,\n} from '@/checkout/components/OrderSummary/OrderSummary';\nimport { useStore } from '@/checkout/context/store';\nimport { cartSignal, selectedShippingMethodSignal } from '@/checkout/signals';\nimport { Container } from '@adobe/elsie/lib';\nimport { HTMLAttributes } from 'preact/compat';\nimport { ZERO_AMOUNT } from './constants';\n\nexport interface OrderSummaryProps extends HTMLAttributes<HTMLDivElement> {}\n\nexport type OrderSummaryState = {\n  isLoading: boolean;\n  summary?: Summary;\n};\n\nconst INCLUDE_TAX = 2;\n\nconst loadingState: OrderSummaryState = {\n  isLoading: true,\n};\n\nexport function useOrderSummary(): OrderSummaryState {\n  const { config } = useStore();\n  const isLoadingStoreConfig = config === undefined;\n\n  const cartData = cartSignal.value.data;\n  const isLoadingCartData = cartData === undefined;\n\n  if (isLoadingStoreConfig || isLoadingCartData) return loadingState;\n\n  const taxCartDisplay = config.taxCartDisplay;\n  const inclTaxInSubtotal =\n    taxCartDisplay.shoppingCartDisplaySubtotal === INCLUDE_TAX;\n\n  const shippingAddresses = cartData?.shippingAddresses;\n  const hasAddresses = !!shippingAddresses?.length;\n\n  const prices = cartData?.prices;\n\n  const grandTotal = prices?.grand_total;\n  const hasGrandTotal = !!grandTotal;\n\n  const subtotal = inclTaxInSubtotal\n    ? prices?.subtotal_including_tax\n    : prices?.subtotal_excluding_tax;\n\n  const appliedTaxes = prices?.applied_taxes || [];\n  const hasTaxesApplied = !!appliedTaxes.length;\n\n  if (!hasGrandTotal) return { isLoading: false };\n\n  const summary: Summary = {\n    total: {\n      inclTax: {\n        amount: grandTotal.value!,\n        currency: grandTotal.currency!,\n      },\n    },\n    subtotal: {\n      amount: subtotal!.value!,\n      currency: subtotal!.currency!,\n      isTaxIncl: inclTaxInSubtotal,\n    },\n  };\n\n  if (hasTaxesApplied) {\n    const totalTaxAmount = appliedTaxes.reduce(\n      (total, tax) => total + tax!.amount.value!,\n      ZERO_AMOUNT\n    );\n\n    const firstTax = appliedTaxes[0];\n\n    summary.tax = {\n      amount: totalTaxAmount,\n      currency: firstTax!.amount.currency!,\n    };\n\n    if (taxCartDisplay.shoppingCartDisplayFullSummary) {\n      summary.tax.breakdown = appliedTaxes as CartTaxItem[];\n    }\n  }\n\n  if (!hasTaxesApplied && taxCartDisplay.shoppingCartDisplayZeroTax) {\n    summary.tax = {\n      amount: ZERO_AMOUNT,\n      currency: summary.total.inclTax.currency,\n    };\n  }\n\n  if (taxCartDisplay.shoppingCartDisplayGrandTotal) {\n    const totalExclTax = summary.tax\n      ? summary.total.inclTax.amount - summary.tax.amount\n      : summary.total.inclTax.amount;\n\n    summary.total.exclTax = {\n      amount: totalExclTax,\n      currency: summary.total.inclTax.currency,\n    };\n  }\n\n  if (hasAddresses) {\n    const firstAddress = shippingAddresses[0];\n    const shippingMethod = firstAddress?.selectedShippingMethod;\n\n    if (!shippingMethod) return { isLoading: false, summary };\n\n    summary.shipping = {\n      amount: shippingMethod?.amount.value!,\n      currency: shippingMethod?.amount.currency!,\n      isEstimated: false,\n    };\n\n    return { isLoading: false, summary };\n  }\n\n  if (!selectedShippingMethodSignal.value) return { isLoading: false, summary };\n\n  summary.shipping = {\n    amount: selectedShippingMethodSignal.value.amount.value,\n    currency: selectedShippingMethodSignal.value.amount.currency,\n    isEstimated: true,\n  };\n\n  summary.total.inclTax.amount += summary.shipping.amount;\n  if (summary.total.exclTax) {\n    summary.total.exclTax.amount += summary.shipping.amount;\n  }\n\n  return { isLoading: false, summary };\n}\n\nexport const OrderSummary: Container<OrderSummaryProps> = ({ ...props }) => {\n  const { isLoading, summary } = useOrderSummary();\n\n  return (\n    <div {...props}>\n      {!summary && <OrderSummarySkeleton />}\n\n      {summary && (\n        <OrderSummaryComponent isLoading={isLoading} summary={summary} />\n      )}\n    </div>\n  );\n};\n"],"names":["OrderSummary","className","summary","isLoading","props","total","subtotal","shipping","tax","_jsxs","Card","classes","children","_jsx","Heading","level","Text","id","Divider","variant","ProgressSpinner","Price","amount","currency","isTaxIncl","undefined","isEstimated","breakdown","_Fragment","map","label","value","inclTax","exclTax","OrderSummarySkeleton","Skeleton","SkeletonRow","size","fullWidth","lines","ZERO_AMOUNT","INCLUDE_TAX","loadingState","useOrderSummary","config","useStore","isLoadingStoreConfig","cartData","cartSignal","data","isLoadingCartData","taxCartDisplay","inclTaxInSubtotal","shoppingCartDisplaySubtotal","shippingAddresses","hasAddresses","length","prices","grandTotal","grand_total","hasGrandTotal","subtotal_including_tax","subtotal_excluding_tax","appliedTaxes","applied_taxes","hasTaxesApplied","totalTaxAmount","reduce","firstTax","shoppingCartDisplayFullSummary","shoppingCartDisplayZeroTax","shoppingCartDisplayGrandTotal","totalExclTax","firstAddress","shippingMethod","selectedShippingMethod","selectedShippingMethodSignal","OrderSummaryComponent"],"mappings":"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"}