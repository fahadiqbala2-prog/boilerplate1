{"version":3,"file":"CartSummary__DRvzmpjG1H.js","sources":["../../src/lib/redirect.ts","../../../ElsieSDK/packages/elsie/src/icons/WarningWithCircle.svg","../../../ElsieSDK/packages/elsie/src/components/CartItem/CartItemSkeleton.tsx","../../src/components/CartSummary/CartSummarySkeleton.tsx","../../src/components/CartSummary/MobileCartSummarySkeleton.tsx","../../src/components/CartSummary/CartSummary.tsx","../../src/components/CartSummaryItem/CartSummaryItem.tsx","../../src/containers/CartSummary/constants.ts","../../src/containers/CartSummary/CartSummary.tsx"],"sourcesContent":["export function redirect(location: string): void {\n  window.location.href = location;\n}\n","import * as React from \"react\";\nconst SvgWarningWithCircle = (props) => /* @__PURE__ */ React.createElement(\"svg\", { width: 24, height: 24, viewBox: \"0 0 24 24\", fill: \"none\", xmlns: \"http://www.w3.org/2000/svg\", ...props }, /* @__PURE__ */ React.createElement(\"path\", { vectorEffect: \"non-scaling-stroke\", d: \"M0.75 12C0.75 5.78421 5.78421 0.75 12 0.75C18.2158 0.75 23.25 5.78421 23.25 12C23.25 18.2158 18.2158 23.25 12 23.25C5.78421 23.25 0.75 18.2158 0.75 12Z\", stroke: \"currentColor\" }), /* @__PURE__ */ React.createElement(\"path\", { vectorEffect: \"non-scaling-stroke\", d: \"M11.75 5.88423V4.75H12.25V5.88423L12.0485 13.0713H11.9515L11.75 5.88423ZM11.7994 18.25V16.9868H12.2253V18.25H11.7994Z\", stroke: \"currentColor\" }));\nexport default SvgWarningWithCircle;\n","import { FunctionComponent } from 'preact';\nimport { Skeleton, SkeletonRow } from '@adobe/elsie/components';\n\nexport const CartItemSkeleton: FunctionComponent = () => {\n  return (\n    <div className=\"dropin-cart-item dropin-cart-item-skeleton\">\n      <Skeleton className=\"dropin-cart-item__skeleton dropin-cart-item__wrapper\">\n        <div className=\"dropin-cart-item__image\">\n          <SkeletonRow className=\"dropin-cart-item__skeleton__item\" />\n        </div>\n        <div className=\"dropin-cart-item__title\">\n          <SkeletonRow className=\"dropin-cart-item__skeleton__item\" />\n        </div>\n        <div className=\"dropin-cart-item__sku\">\n          <SkeletonRow className=\"dropin-cart-item__skeleton__item\" />\n        </div>\n        <div className=\"dropin-cart-item__price\">\n          <SkeletonRow className=\"dropin-cart-item__skeleton__item\" />\n        </div>\n        <div className=\"dropin-cart-item__quantity\">\n          <SkeletonRow className=\"dropin-cart-item__skeleton__item\" />\n        </div>\n        <div className=\"dropin-cart-item__total\">\n          <SkeletonRow className=\"dropin-cart-item__skeleton__item\" />\n        </div>\n      </Skeleton>\n    </div>\n  );\n};\n","import { CartItemSkeleton } from '@adobe/elsie/components/CartItem/CartItemSkeleton';\nimport { FunctionComponent } from 'preact';\nimport { Card, Skeleton, SkeletonRow } from '@adobe/elsie/components';\n\nexport const CartSummarySkeleton: FunctionComponent = () => {\n  return (\n    <Card>\n      <Skeleton\n        data-testid=\"cart-summary-skeleton\"\n        className=\"checkout-cart-summary-skeleton\"\n        style={{ gridTemplateColumns: '1fr' }}\n      >\n        <SkeletonRow variant=\"heading\" fullWidth={true} size=\"medium\" />\n        <CartItemSkeleton />\n        <CartItemSkeleton />\n        <CartItemSkeleton />\n        <CartItemSkeleton />\n        <CartItemSkeleton />\n        <SkeletonRow size=\"medium\" fullWidth={true} />\n      </Skeleton>\n    </Card>\n  );\n};\n","import { FunctionComponent } from 'preact';\nimport { Skeleton, SkeletonRow } from '@adobe/elsie/components';\n\nexport const MobileCartSummarySkeleton: FunctionComponent = () => {\n  return (\n    <Skeleton\n      data-testid=\"cart-summary-skeleton\"\n      className=\"checkout-mobile-cart-summary-skeleton\"\n      style={{ gridTemplateColumns: '1fr' }}\n    >\n      <SkeletonRow fullWidth={true} size=\"xlarge\" />\n    </Skeleton>\n  );\n};\n","import { FunctionComponent, VNode } from 'preact';\nimport { HTMLAttributes } from 'preact/compat';\nimport { classes } from '@adobe/elsie/lib';\nimport '@/checkout/components/CartSummary/CartSummary.css';\nimport {\n  Accordion,\n  AccordionSection,\n  Card,\n  Divider,\n} from '@adobe/elsie/components';\nimport { Text, useText } from '@adobe/elsie/i18n';\nimport { CartSummaryItem, Heading } from '@/checkout/components';\nimport { CartSummarySkeleton } from '@/checkout/components/CartSummary/CartSummarySkeleton';\nimport { MobileCartSummarySkeleton } from '@/checkout/components/CartSummary/MobileCartSummarySkeleton';\nimport { useBreakpoint } from '@/checkout/hooks/useBreakpoint';\nimport { Item } from '@/checkout/data/models';\n\nexport type CartSummaryActionProps = {\n  type: 'view-more' | 'view-all';\n  onClick: () => void;\n};\n\nexport interface CartSummaryProps\n  extends Omit<HTMLAttributes<HTMLDivElement>, 'action'> {\n  action?: VNode<CartSummaryActionProps>;\n  taxIncluded: boolean;\n  isLoading: boolean;\n  items: Item[];\n  routeCart?: () => string;\n  totalQuantity: number;\n}\n\nexport const CartSummaryAction: FunctionComponent<CartSummaryActionProps> = ({\n  type,\n  onClick,\n  children,\n}) => {\n  return (\n    <>\n      <Divider\n        className=\"checkout-cart-summary__divider-bottom\"\n        variant=\"primary\"\n      />\n      <button\n        data-testid={`action-${type}`}\n        className=\"checkout-cart-summary__action\"\n        onClick={onClick}\n      >\n        {children}\n      </button>\n    </>\n  );\n};\n\nconst Mobile: FunctionComponent<CartSummaryProps> = ({\n  title,\n  isLoading,\n  totalQuantity,\n  routeCart,\n  items,\n  taxIncluded,\n  action,\n}) => {\n  return (\n    <>\n      {isLoading ? (\n        <MobileCartSummarySkeleton />\n      ) : (\n        <Accordion actionIconPosition=\"left\">\n          <AccordionSection\n            title={`${title} (${totalQuantity})`}\n            secondaryText={\n              routeCart?.() && (\n                <a href={routeCart?.()} rel=\"noreferrer\">\n                  <Text id=\"Checkout.CartSummary.editCart\" />\n                </a>\n              )\n            }\n          >\n            {items?.map((item) => (\n              <CartSummaryItem\n                key={item?.uid}\n                item={item}\n                taxIncluded={taxIncluded}\n              />\n            ))}\n\n            {action}\n          </AccordionSection>\n        </Accordion>\n      )}\n    </>\n  );\n};\n\nconst Desktop: FunctionComponent<CartSummaryProps> = ({\n  title,\n  isLoading,\n  totalQuantity,\n  routeCart,\n  items,\n  action,\n  taxIncluded,\n}) => {\n  return (\n    <>\n      {isLoading ? (\n        <CartSummarySkeleton />\n      ) : (\n        <Card>\n          <div className=\"checkout-cart-summary__heading\">\n            <Heading level={2} className=\"checkout-cart-summary__title\">\n              {title} ({totalQuantity})\n            </Heading>\n\n            {routeCart?.() && (\n              <a\n                className=\"checkout-cart-summary__edit\"\n                href={routeCart?.()}\n                rel=\"noreferrer\"\n              >\n                <Text id=\"Checkout.CartSummary.editCart\" />\n              </a>\n            )}\n          </div>\n\n          <Divider\n            className=\"checkout-cart-summary__divider-top\"\n            variant=\"primary\"\n          />\n\n          <div className=\"checkout-cart-summary__items\">\n            {items?.map((item) => (\n              <CartSummaryItem\n                key={item?.uid}\n                item={item}\n                taxIncluded={taxIncluded}\n              />\n            ))}\n          </div>\n\n          {action}\n        </Card>\n      )}\n    </>\n  );\n};\n\nexport const CartSummary: FunctionComponent<CartSummaryProps> = ({\n  className,\n  ...props\n}) => {\n  const title = useText('Checkout.CartSummary.title').title;\n  const breakpoint = useBreakpoint();\n\n  return (\n    <div className={classes(['checkout-cart-summary', className])}>\n      {breakpoint === 'small' ? (\n        <Mobile title={title} {...props} />\n      ) : (\n        <Desktop title={title} {...props} />\n      )}\n    </div>\n  );\n};\n","import { FunctionComponent } from 'preact';\nimport { HTMLAttributes } from 'preact/compat';\nimport { classes } from '@adobe/elsie/lib';\nimport '@/checkout/components/CartSummaryItem/CartSummaryItem.css';\nimport { WarningWithCircle } from '@adobe/elsie/icons';\nimport { CartItem, Icon, Image, Price } from '@adobe/elsie/components';\nimport { Item, StockStatus } from '@/checkout/data/models';\nimport { useText, Text } from '@adobe/elsie/i18n';\n\nexport interface CartSummaryItemProps extends HTMLAttributes<HTMLDivElement> {\n  item: Item;\n  taxIncluded?: boolean;\n}\n\nexport const CartSummaryItem: FunctionComponent<CartSummaryItemProps> = ({\n  className,\n  item,\n  taxIncluded = false,\n}) => {\n  const translations = useText({\n    Sender: 'Checkout.CartSummary.GiftCard.sender',\n    Recipient: 'Checkout.CartSummary.GiftCard.recipient',\n    Message: 'Checkout.CartSummary.GiftCard.message',\n    Download: 'Checkout.CartSummary.Downloadable.download',\n    OutOfStockAlert: 'Checkout.OutOfStock.alert',\n    ...('links' in item && item.links\n      ? {\n          Files: (\n            <Text\n              id=\"Checkout.CartSummary.Downloadable.files\"\n              plural={item.links.length}\n              fields={{\n                count: item.links.length,\n              }}\n            />\n          ),\n        }\n      : {}),\n  });\n\n  // Taking advantage of using withText() to build the string literal for translations.Files\n  // https://github.com/synacor/preact-i18n/tree/2.3.1-preactx?tab=readme-ov-file#examples-4\n\n  let price = item.regularPrice;\n  let total = item.total;\n\n  if (taxIncluded) {\n    price = item.priceInclTax;\n    total = item.totalInclTax;\n  }\n\n  const configurations = {\n    ...('customizableOptions' in item ? item.customizableOptions : {}),\n    ...('configurableOptions' in item ? item.configurableOptions : {}),\n    ...('links' in item && item.links\n      ? { [translations.Files]: item.links.join(', ') }\n      : {}),\n    ...('senderName' in item && item.senderName\n      ? { [translations.Sender]: item.senderName }\n      : {}),\n    ...('recipientName' in item && item.recipientName\n      ? { [translations.Recipient]: item.recipientName }\n      : {}),\n    ...('senderEmail' in item &&\n    'senderName' in item &&\n    item.senderName &&\n    item.senderEmail\n      ? { [translations.Sender]: `${item.senderName} (${item.senderEmail})` }\n      : {}),\n    ...('recipientEmail' in item &&\n    'recipientName' in item &&\n    item.recipientName &&\n    item.recipientEmail\n      ? {\n          [translations.Recipient]: `${item.recipientName} (${item.recipientEmail})`,\n        }\n      : {}),\n    ...('message' in item && item.message && item.message != ''\n      ? { [translations.Message]: truncateMessage(item.message as string, 60) }\n      : {}),\n  };\n\n  function truncateMessage(message: string, limit: number) {\n    if (message.length > limit) {\n      return `${message.slice(0, limit)}...`;\n    }\n    return message;\n  }\n\n  const alert =\n    item.stockStatus === StockStatus.OutOfStock ? (\n      <span data-testid=\"checkout-cart-item-alert\">\n        <Icon source={WarningWithCircle} size=\"16\" />\n        {translations.OutOfStockAlert}\n      </span>\n    ) : undefined;\n\n  const lowInventory =\n    !alert && item.onlyXLeftInStock ? (\n      <span data-testid=\"checkout-cart-item-low-inventory\">\n        <Icon source={WarningWithCircle} size=\"16\" />\n        <Text\n          id=\"Checkout.OutOfStock.lowInventory\"\n          plural={item.onlyXLeftInStock}\n          fields={{\n            count: item.onlyXLeftInStock,\n          }}\n        />\n      </span>\n    ) : undefined;\n\n  return (\n    <div className={classes(['checkout-cart-summary-item', className])}>\n      <CartItem\n        data-testid=\"cart-summary-item\"\n        key={item.uid}\n        taxIncluded={taxIncluded}\n        title={<div data-testid=\"product-name\">{item.name}</div>}\n        sku={<div>{item.sku}</div>}\n        quantity={item.quantity}\n        image={\n          <Image\n            src={item.image?.src ?? ''}\n            alt={item.image?.alt}\n            loading=\"lazy\"\n            width=\"80\"\n            height=\"80\"\n            params={{ width: 80 }}\n          />\n        }\n        warning={lowInventory}\n        alert={alert}\n        configurations={configurations}\n        price={\n          <Price\n            amount={item.regularPrice.value}\n            currency={price.currency}\n            weight=\"normal\"\n          />\n        }\n        total={\n          <>\n            <Price\n              amount={item.regularPrice.value * item.quantity}\n              currency={price.currency}\n              variant={item.discounted ? 'strikethrough' : 'default'}\n            />\n\n            {item.discounted && (\n              <Price amount={total.value} currency={total.currency} sale />\n            )}\n          </>\n        }\n      />\n    </div>\n  );\n};\n","export const DEFAULT_VISIBLE_ITEMS = 5;\n","import {\n  CartSummaryAction,\n  CartSummary as CartSummaryComponent,\n} from '@/checkout/components/CartSummary/CartSummary';\nimport { DEFAULT_VISIBLE_ITEMS } from '@/checkout/containers/CartSummary/constants';\nimport { useStore } from '@/checkout/context/store';\nimport { Item, PriceDisplay, TotalDisplay } from '@/checkout/data/models';\nimport { redirect } from '@/checkout/lib';\nimport { cartSignal } from '@/checkout/signals';\nimport { useText } from '@adobe/elsie/i18n';\nimport { Container } from '@adobe/elsie/lib';\nimport { HTMLAttributes, useCallback, useMemo, useState } from 'preact/compat';\n\nexport interface CartSummaryProps extends HTMLAttributes<HTMLDivElement> {\n  routeCart?: () => string;\n}\n\ntype CartSummaryState = {\n  canDisplayMoreItems: boolean;\n  hasHiddenItems: boolean;\n  isLoading: boolean;\n  isTaxIncluded: boolean;\n  totalQuantity: number;\n  visibleItems: Item[];\n};\n\nconst initialState: CartSummaryState = {\n  canDisplayMoreItems: false,\n  hasHiddenItems: false,\n  isLoading: true,\n  isTaxIncluded: false,\n  totalQuantity: 0,\n  visibleItems: [],\n};\n\nexport function useCartSummary(displayMaxItems: boolean): CartSummaryState {\n  const { config } = useStore();\n  const isLoadingStoreConfig = config === undefined;\n\n  const cartData = cartSignal.value.data;\n  const isLoadingCartData = cartData === undefined;\n\n  if (isLoadingStoreConfig || isLoadingCartData) return initialState;\n\n  const { cartSummaryMaxItems, cartSummaryTotalDisplay, taxCartDisplay } =\n    config;\n\n  const useQtys = cartSummaryTotalDisplay === TotalDisplay.Quantity;\n  const isTaxIncluded =\n    taxCartDisplay.shoppingCartDisplayPrice === PriceDisplay.IncludingTax;\n\n  const { items, totalQty } = cartData;\n  const totalQuantity = useQtys ? totalQty : items.length;\n\n  const numOfVisibleItems = displayMaxItems\n    ? cartSummaryMaxItems\n    : Math.min(cartSummaryMaxItems, DEFAULT_VISIBLE_ITEMS);\n\n  const hasHiddenItems = items.length > numOfVisibleItems;\n  const visibleItems = items.slice(0, numOfVisibleItems);\n\n  const canDisplayMoreItems =\n    hasHiddenItems &&\n    !displayMaxItems &&\n    numOfVisibleItems != cartSummaryMaxItems;\n\n  return {\n    canDisplayMoreItems,\n    hasHiddenItems,\n    isLoading: false,\n    isTaxIncluded,\n    totalQuantity,\n    visibleItems,\n  };\n}\n\nexport const CartSummary: Container<CartSummaryProps> = ({\n  routeCart,\n  ...props\n}) => {\n  const [displayMaxItems, setDisplayMaxItems] = useState<boolean>(false);\n\n  const translations = useText({\n    ViewAll: 'Checkout.CartSummary.viewAll',\n    ViewMore: 'Checkout.CartSummary.viewMore',\n  });\n\n  const {\n    canDisplayMoreItems,\n    hasHiddenItems,\n    isLoading,\n    isTaxIncluded,\n    visibleItems,\n    totalQuantity,\n  } = useCartSummary(displayMaxItems);\n\n  const viewMaxItems = useCallback(() => {\n    setDisplayMaxItems(true);\n  }, []);\n\n  const viewAllItems = useCallback(() => {\n    if (!routeCart) return;\n    redirect(routeCart());\n  }, [routeCart]);\n\n  const action = useMemo(() => {\n    if (!hasHiddenItems) return;\n\n    if (canDisplayMoreItems) {\n      return (\n        <CartSummaryAction type=\"view-more\" onClick={viewMaxItems}>\n          {translations.ViewMore}\n        </CartSummaryAction>\n      );\n    }\n\n    if (routeCart) {\n      return (\n        <CartSummaryAction type=\"view-all\" onClick={viewAllItems}>\n          {translations.ViewAll}\n        </CartSummaryAction>\n      );\n    }\n  }, [\n    hasHiddenItems,\n    canDisplayMoreItems,\n    viewMaxItems,\n    translations.ViewMore,\n    translations.ViewAll,\n    viewAllItems,\n    routeCart,\n  ]);\n\n  return (\n    <CartSummaryComponent\n      {...props}\n      action={action}\n      taxIncluded={isTaxIncluded}\n      isLoading={isLoading}\n      items={visibleItems}\n      routeCart={routeCart}\n      totalQuantity={totalQuantity}\n    />\n  );\n};\n"],"names":["redirect","location","window","href","CartItemSkeleton","_jsx","className","children","_jsxs","Skeleton","SkeletonRow","CartSummarySkeleton","Card","style","gridTemplateColumns","variant","fullWidth","size","MobileCartSummarySkeleton","CartSummaryAction","type","onClick","_Fragment","Divider","Mobile","title","isLoading","totalQuantity","routeCart","items","taxIncluded","action","Accordion","actionIconPosition","AccordionSection","secondaryText","rel","Text","id","map","item","CartSummaryItem","uid","Desktop","Heading","level","CartSummary","props","useText","breakpoint","useBreakpoint","classes","translations","Sender","Recipient","Message","Download","OutOfStockAlert","links","Files","plural","length","fields","count","price","regularPrice","total","priceInclTax","totalInclTax","configurations","customizableOptions","configurableOptions","join","senderName","recipientName","senderEmail","recipientEmail","message","truncateMessage","limit","slice","alert","stockStatus","StockStatus","OutOfStock","Icon","source","WarningWithCircle","undefined","lowInventory","onlyXLeftInStock","CartItem","name","sku","quantity","image","Image","src","alt","loading","width","height","params","warning","Price","amount","value","currency","weight","discounted","sale","DEFAULT_VISIBLE_ITEMS","initialState","canDisplayMoreItems","hasHiddenItems","isTaxIncluded","visibleItems","useCartSummary","displayMaxItems","config","useStore","isLoadingStoreConfig","cartData","cartSignal","data","isLoadingCartData","cartSummaryMaxItems","cartSummaryTotalDisplay","taxCartDisplay","useQtys","TotalDisplay","Quantity","shoppingCartDisplayPrice","PriceDisplay","IncludingTax","totalQty","numOfVisibleItems","Math","min","setDisplayMaxItems","useState","ViewAll","ViewMore","viewMaxItems","useCallback","viewAllItems","useMemo","CartSummaryComponent"],"mappings":"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"}