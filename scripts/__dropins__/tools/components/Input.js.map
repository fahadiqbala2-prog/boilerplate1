{"version":3,"file":"Input.js","sources":["../../src/components/Input/Input.tsx"],"sourcesContent":["import { Icon } from '@adobe/elsie/components/Icon';\nimport '@adobe/elsie/components/Input/Input.css';\nimport { CheckWithCircle, WarningWithCircle } from '@adobe/elsie/icons';\nimport { VComponent, classes, debounce } from '@adobe/elsie/lib';\nimport { FunctionComponent, VNode } from 'preact';\nimport { HTMLAttributes } from 'preact/compat';\nimport { useCallback } from 'preact/hooks';\n\nexport interface InputProps\n  extends Omit<HTMLAttributes<HTMLInputElement>, 'size' | 'icon'> {\n  id?: string;\n  name?: string;\n  variant?: 'primary' | 'secondary';\n  disabled?: boolean;\n  error?: boolean;\n  floatingLabel?: string;\n  onUpdateError?: (error: Error) => void;\n  onValue?: (value: any) => void;\n  size?: 'medium' | 'large';\n  success?: boolean;\n  icon?: VNode<HTMLAttributes<SVGSVGElement>>;\n  maxLength?: number;\n}\n\nexport const Input: FunctionComponent<InputProps> = ({\n  name,\n  value,\n  variant = 'primary',\n  className,\n  disabled,\n  error,\n  floatingLabel,\n  onValue,\n  onUpdateError,\n  size = 'medium',\n  icon,\n  maxLength,\n  success,\n  ...props\n}) => {\n  const id = props?.id || name || `dropin-input-${Math.random().toString(36)}`;\n\n  // eslint-disable-next-line react-hooks/exhaustive-deps\n  const debouncedOnValueHandler = useCallback(\n    debounce(async (newValue: any) => {\n      if (onValue) {\n        try {\n          await onValue(newValue);\n        } catch (e) {\n          if (onUpdateError) {\n            onUpdateError(e as Error);\n          }\n        }\n      }\n    }, 200),\n    [onValue, onUpdateError]\n  );\n\n  const handleOnValue = (e: Event) => {\n    const input = e.target as HTMLInputElement;\n\n    debouncedOnValueHandler(input.value.trim());\n  };\n\n  return (\n    <div\n      className={classes([\n        'dropin-input-container',\n        `dropin-input-container--${variant}`,\n        [`dropin-input-container--floating`, !!floatingLabel],\n        ['dropin-input-container--disabled', disabled],\n      ])}\n    >\n      {icon && (\n        <VComponent\n          node={icon}\n          className={classes([\n            'dropin-input__field-icon--left',\n            icon.props.className,\n          ])}\n        />\n      )}\n      <div className=\"dropin-input-label-container\">\n        {/* Input */}\n        <input\n          id={id}\n          onChange={handleOnValue}\n          type=\"text\"\n          maxLength={maxLength}\n          name={name}\n          value={value}\n          {...props}\n          className={classes([\n            'dropin-input',\n            `dropin-input--${size}`,\n            `dropin-input--${variant}`,\n            [`dropin-input--error`, !!error],\n            [`dropin-input--success`, !!success],\n            ['dropin-input--disabled', disabled],\n            [`dropin-input--floating`, !!floatingLabel],\n            [`dropin-input--icon-left`, !!icon],\n            className,\n          ])}\n          disabled={disabled}\n        />\n\n        {/* Floating Label */}\n        {floatingLabel && (\n          <label\n            htmlFor={id}\n            className={classes([\n              [`dropin-input__label--floating`, !!floatingLabel],\n              [`dropin-input__label--floating--icon-left`, !!icon],\n              [`dropin-input__label--floating--error`, !!error],\n            ])}\n          >\n            {floatingLabel}\n          </label>\n        )}\n      </div>\n\n      {error && (\n        <div\n          className={classes([\n            'dropin-input__field-icon--right',\n            'dropin-input__field-icon--error',\n          ])}\n        >\n          <Icon\n            source={WarningWithCircle}\n            size=\"16\"\n            stroke=\"2\"\n            className=\"dropin-input--warning-icon\"\n            viewBox=\"-1 -1 26 26\"\n          />\n        </div>\n      )}\n\n      {success && (\n        <div\n          className={classes([\n            'dropin-input__field-icon--right',\n            'dropin-input__field-icon--success',\n          ])}\n        >\n          <Icon\n            source={CheckWithCircle}\n            size=\"16\"\n            stroke=\"2\"\n            className=\"dropin-input--success-icon\"\n            viewBox=\"-1 -1 26 26\"\n          />\n        </div>\n      )}\n    </div>\n  );\n};\n"],"names":["Input","name","value","variant","className","disabled","error","floatingLabel","onValue","onUpdateError","size","icon","maxLength","success","props","id","Math","random","toString","debouncedOnValueHandler","useCallback","debounce","newValue","e","handleOnValue","input","target","trim","_jsxs","classes","children","_jsx","VComponent","node","onChange","type","htmlFor","Icon","source","WarningWithCircle","stroke","viewBox","CheckWithCircle"],"mappings":"4fAwBO,MAAMA,EAAuCA,CAAC,CACnDC,KAAAA,EACAC,MAAAA,EACAC,QAAAA,EAAU,UACVC,UAAAA,EACAC,SAAAA,EACAC,MAAAA,EACAC,cAAAA,EACAC,QAAAA,EACAC,cAAAA,EACAC,KAAAA,EAAO,SACPC,KAAAA,EACAC,UAAAA,EACAC,QAAAA,EACA,GAAGC,CACL,IAAM,CACEC,MAAAA,GAAKD,GAAAA,YAAAA,EAAOC,KAAMd,GAAS,gBAAee,KAAKC,OAAO,EAAEC,SAAS,EAAE,CAAE,GAGrEC,EAA0BC,EAC9BC,EAAS,MAAOC,GAAkB,CAChC,GAAId,EACE,GAAA,CACF,MAAMA,EAAQc,CAAQ,QACfC,EAAG,CACNd,GACFA,EAAcc,CAAW,CAE7B,GAED,GAAG,EACN,CAACf,EAASC,CAAa,CACzB,EAEMe,EAAiBD,GAAa,CAClC,MAAME,EAAQF,EAAEG,OAEQD,EAAAA,EAAMvB,MAAMyB,KAAM,CAAA,CAAA,EAG5C,OACEC,EAAA,MAAA,CACExB,UAAWyB,EAAQ,CACjB,yBACC,2BAA0B1B,CAAQ,GACnC,CAAE,mCAAmC,CAAC,CAACI,CAAa,EACpD,CAAC,mCAAoCF,CAAQ,CAAC,CAC/C,EAAEyB,SAEFnB,CAAAA,GACCoB,EAACC,EAAU,CACTC,KAAMtB,EACNP,UAAWyB,EAAQ,CACjB,iCACAlB,EAAKG,MAAMV,SAAS,CACrB,CAAA,CACF,EAEHwB,EAAA,MAAA,CAAKxB,UAAU,+BAA8B0B,UAE3CC,EAAA,QAAA,CACEhB,GAAAA,EACAmB,SAAUV,EACVW,KAAK,OACLvB,UAAAA,EACAX,KAAAA,EACAC,MAAAA,EAAa,GACTY,EACJV,UAAWyB,EAAQ,CACjB,eACC,iBAAgBnB,CAAK,GACrB,iBAAgBP,CAAQ,GACzB,CAAE,sBAAsB,CAAC,CAACG,CAAK,EAC/B,CAAE,wBAAwB,CAAC,CAACO,CAAO,EACnC,CAAC,yBAA0BR,CAAQ,EACnC,CAAE,yBAAyB,CAAC,CAACE,CAAa,EAC1C,CAAE,0BAA0B,CAAC,CAACI,CAAI,EAClCP,CAAS,CACV,EACDC,SAAAA,CAAAA,CACD,EAGAE,GACCwB,EAAA,QAAA,CACEK,QAASrB,EACTX,UAAWyB,EAAQ,CACjB,CAAE,gCAAgC,CAAC,CAACtB,CAAa,EACjD,CAAE,2CAA2C,CAAC,CAACI,CAAI,EACnD,CAAE,uCAAuC,CAAC,CAACL,CAAK,CAAC,CAClD,EAAEwB,SAEFvB,CAAAA,CACI,CACR,CAAA,CACE,EAEJD,GACCyB,EAAA,MAAA,CACE3B,UAAWyB,EAAQ,CACjB,kCACA,iCAAiC,CAClC,EAAEC,SAEHC,EAACM,EAAI,CACHC,OAAQC,EACR7B,KAAK,KACL8B,OAAO,IACPpC,UAAU,6BACVqC,QAAQ,aAAA,CACT,CAAA,CACE,EAGN5B,GACCkB,EAAA,MAAA,CACE3B,UAAWyB,EAAQ,CACjB,kCACA,mCAAmC,CACpC,EAAEC,SAEHC,EAACM,EAAI,CACHC,OAAQI,EACRhC,KAAK,KACL8B,OAAO,IACPpC,UAAU,6BACVqC,QAAQ,aAAA,CACT,CAAA,CACE,CACN,CAAA,CACE,CAET"}