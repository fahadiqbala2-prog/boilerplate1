{"version":3,"file":"PriceRange.js","sources":["../../src/components/PriceRange/PriceRange.tsx"],"sourcesContent":["import { FunctionComponent } from 'preact';\nimport { HTMLAttributes, useMemo } from 'preact/compat';\nimport { classes } from '@adobe/elsie/lib';\nimport '@adobe/elsie/components/PriceRange/PriceRange.css';\nimport { Price } from '@adobe/elsie/components/Price';\nimport { useText } from '@adobe/elsie/i18n';\n\nexport interface PriceRangeProps\n  extends Omit<HTMLAttributes<HTMLDivElement>, 'size'> {\n  locale?: string;\n  currency?: string;\n  amount?: number; // simple product\n  variant?: 'default' | 'strikethrough';\n  minimumAmount?: number; // configurable product\n  maximumAmount?: number; // configurable product\n  display?: 'dash' | 'from to' | 'as low as';\n  size?: 'small' | 'medium' | 'large';\n  specialPrice?: number;\n  sale?: boolean;\n}\n\nexport const PriceRange: FunctionComponent<PriceRangeProps> = ({\n  className,\n  children,\n  locale,\n  currency,\n  amount,\n  variant = 'default',\n  minimumAmount,\n  maximumAmount,\n  size = 'small',\n  display = 'dash',\n  specialPrice,\n  sale = false,\n  ...props\n}) => {\n  const isSimpleProduct = useMemo(\n    () =>\n      amount ||\n      minimumAmount === maximumAmount ||\n      (minimumAmount && !maximumAmount) ||\n      (maximumAmount && !minimumAmount),\n    [amount, maximumAmount, minimumAmount]\n  );\n\n  return (\n    <div>\n      {/* Simple product price or when configurable product minimum price equals to maximum price */}\n      {isSimpleProduct ? (\n        <div {...props} className={classes(['dropin-price-range', className])}>\n          <Price\n            amount={amount ?? minimumAmount ?? maximumAmount}\n            currency={currency}\n            locale={locale}\n            size={size}\n            variant={variant}\n            sale={sale}\n          />\n        </div>\n      ) : (\n        <div {...props} className={classes(['dropin-price-range', className])}>\n          {display === 'dash' ? (\n            <Dashed\n              specialPrice={specialPrice}\n              minimumAmount={minimumAmount}\n              maximumAmount={maximumAmount}\n              currency={currency}\n              locale={locale}\n              size={size}\n              sale={sale}\n            />\n          ) : null}\n\n          {display === 'from to' ? (\n            <FromTo\n              specialPrice={specialPrice}\n              minimumAmount={minimumAmount}\n              maximumAmount={maximumAmount}\n              currency={currency}\n              locale={locale}\n              size={size}\n              sale={sale}\n            />\n          ) : null}\n\n          {display === 'as low as' ? (\n            <SpecialPrice\n              specialPrice={specialPrice}\n              minimumAmount={minimumAmount}\n              maximumAmount={maximumAmount}\n              currency={currency}\n              locale={locale}\n              size={size}\n              sale={sale}\n            />\n          ) : null}\n        </div>\n      )}\n    </div>\n  );\n};\n\n// Variations\n\nfunction Dashed({\n  specialPrice,\n  minimumAmount,\n  maximumAmount,\n  currency,\n  locale,\n  size,\n  sale,\n}: PriceRangeProps) {\n  return (\n    <>\n      <Price\n        amount={specialPrice ?? minimumAmount}\n        currency={currency}\n        locale={locale}\n        size={size}\n        sale={!!specialPrice && sale}\n      />\n      <span className=\"dropin-price-range__separator\">-</span>\n      <Price\n        amount={maximumAmount}\n        currency={currency}\n        locale={locale}\n        size={size}\n      />\n    </>\n  );\n}\n\nfunction FromTo({\n  specialPrice,\n  minimumAmount,\n  maximumAmount,\n  currency,\n  locale,\n  size,\n  sale,\n}: PriceRangeProps) {\n  // Translations\n  const translations = useText({\n    from: 'Dropin.PriceRange.from.label',\n    to: 'Dropin.PriceRange.to.label',\n    asLowAs: 'Dropin.PriceRange.asLowAs.label',\n  });\n\n  return (\n    <>\n      <span\n        className={classes([\n          'dropin-price-range__from',\n          `dropin-price-range__from--${size}`,\n        ])}\n      >\n        {translations.from}\n      </span>\n      <Price\n        amount={specialPrice ?? minimumAmount}\n        currency={currency}\n        locale={locale}\n        size={size}\n        sale={!!specialPrice && sale}\n      />\n      <span\n        className={classes([\n          'dropin-price-range__to',\n          `dropin-price-range__to--${size}`,\n        ])}\n      >\n        {translations.to}\n      </span>\n      <Price\n        amount={maximumAmount}\n        currency={currency}\n        locale={locale}\n        size={size}\n      />\n    </>\n  );\n}\n\nfunction SpecialPrice({\n  specialPrice,\n  minimumAmount,\n  maximumAmount,\n  currency,\n  locale,\n  size,\n  sale,\n}: PriceRangeProps) {\n  // Translations\n  const translations = useText({\n    from: 'Dropin.PriceRange.from.label',\n    to: 'Dropin.PriceRange.to.label',\n    asLowAs: 'Dropin.PriceRange.asLowAs.label',\n  });\n\n  return (\n    <>\n      <span\n        className={classes([\n          'dropin-price-range__as-low-as',\n          `dropin-price-range__as-low-as--${size}`,\n        ])}\n      >\n        {translations.asLowAs}\n      </span>\n      {specialPrice ? (\n        <div>\n          <Price\n            amount={maximumAmount}\n            currency={currency}\n            locale={locale}\n            size={size}\n            variant=\"strikethrough\"\n          />\n          <Price\n            amount={specialPrice}\n            currency={currency}\n            locale={locale}\n            size={size}\n            className=\"dropin-price-range__special\"\n            sale={!!specialPrice && sale}\n          />\n        </div>\n      ) : (\n        <Price\n          amount={minimumAmount}\n          currency={currency}\n          locale={locale}\n          size={size}\n        />\n      )}\n    </>\n  );\n}\n"],"names":["PriceRange","className","children","locale","currency","amount","variant","minimumAmount","maximumAmount","size","display","specialPrice","sale","props","isSimpleProduct","useMemo","_jsx","classes","Price","_jsxs","Dashed","FromTo","SpecialPrice","_Fragment","translations","useText","from","to","asLowAs"],"mappings":"kVAqBO,MAAMA,EAAiDA,CAAC,CAC7DC,UAAAA,EACAC,SAAAA,EACAC,OAAAA,EACAC,SAAAA,EACAC,OAAAA,EACAC,QAAAA,EAAU,UACVC,cAAAA,EACAC,cAAAA,EACAC,KAAAA,EAAO,QACPC,QAAAA,EAAU,OACVC,aAAAA,EACAC,KAAAA,EAAO,GACP,GAAGC,CACL,IAAM,CACJ,MAAMC,EAAkBC,EACtB,IACEV,GACAE,IAAkBC,GACjBD,GAAiB,CAACC,GAClBA,GAAiB,CAACD,EACrB,CAACF,EAAQG,EAAeD,CAAa,CACvC,EAEA,OACES,EAAA,MAAA,CAAAd,SAEGY,EACCE,EAAA,MAAA,CAAA,GAASH,EAAOZ,UAAWgB,EAAQ,CAAC,qBAAsBhB,CAAS,CAAC,EAAEC,SACpEc,EAACE,EAAK,CACJb,OAAQA,GAAUE,GAAiBC,EACnCJ,SAAAA,EACAD,OAAAA,EACAM,KAAAA,EACAH,QAAAA,EACAM,KAAAA,CAAAA,CACD,CAAA,CACE,EAELO,EAAA,MAAA,CAAA,GAASN,EAAOZ,UAAWgB,EAAQ,CAAC,qBAAsBhB,CAAS,CAAC,EAAEC,UACnEQ,IAAY,OACXM,EAACI,EAAM,CACLT,aAAAA,EACAJ,cAAAA,EACAC,cAAAA,EACAJ,SAAAA,EACAD,OAAAA,EACAM,KAAAA,EACAG,KAAAA,CACD,CAAA,EACC,KAEHF,IAAY,UACXM,EAACK,EAAM,CACLV,aAAAA,EACAJ,cAAAA,EACAC,cAAAA,EACAJ,SAAAA,EACAD,OAAAA,EACAM,KAAAA,EACAG,KAAAA,CACD,CAAA,EACC,KAEHF,IAAY,YACXM,EAACM,EAAY,CACXX,aAAAA,EACAJ,cAAAA,EACAC,cAAAA,EACAJ,SAAAA,EACAD,OAAAA,EACAM,KAAAA,EACAG,KAAAA,CACD,CAAA,EACC,IAAI,CAAA,CACL,CAAA,CAEJ,CAET,EAIA,SAASQ,EAAO,CACdT,aAAAA,EACAJ,cAAAA,EACAC,cAAAA,EACAJ,SAAAA,EACAD,OAAAA,EACAM,KAAAA,EACAG,KAAAA,CACe,EAAG,CAClB,OACEO,EAAAI,EAAA,CAAArB,SAAA,CACEc,EAACE,EAAK,CACJb,OAAQM,GAAgBJ,EACxBH,SAAAA,EACAD,OAAAA,EACAM,KAAAA,EACAG,KAAM,CAAC,CAACD,GAAgBC,CAAAA,CACzB,EACDI,EAAA,OAAA,CAAMf,UAAU,gCAA+BC,SAAC,GAAA,CAAO,EACvDc,EAACE,EAAK,CACJb,OAAQG,EACRJ,SAAAA,EACAD,OAAAA,EACAM,KAAAA,CAAAA,CACD,CAAC,CAAA,CACF,CAEN,CAEA,SAASY,EAAO,CACdV,aAAAA,EACAJ,cAAAA,EACAC,cAAAA,EACAJ,SAAAA,EACAD,OAAAA,EACAM,KAAAA,EACAG,KAAAA,CACe,EAAG,CAElB,MAAMY,EAAeC,EAAQ,CAC3BC,KAAM,+BACNC,GAAI,6BACJC,QAAS,iCAAA,CACV,EAED,OACET,EAAAI,EAAA,CAAArB,UACEc,EAAA,OAAA,CACEf,UAAWgB,EAAQ,CACjB,2BACC,6BAA4BR,CAAK,EAAC,CACpC,EAAEP,SAEFsB,EAAaE,IAAAA,CACV,EACNV,EAACE,EAAK,CACJb,OAAQM,GAAgBJ,EACxBH,SAAAA,EACAD,OAAAA,EACAM,KAAAA,EACAG,KAAM,CAAC,CAACD,GAAgBC,CAAAA,CACzB,EACDI,EAAA,OAAA,CACEf,UAAWgB,EAAQ,CACjB,yBACC,2BAA0BR,CAAK,EAAC,CAClC,EAAEP,SAEFsB,EAAaG,EAAAA,CACV,EACNX,EAACE,EAAK,CACJb,OAAQG,EACRJ,SAAAA,EACAD,OAAAA,EACAM,KAAAA,CAAAA,CACD,CAAC,CAAA,CACF,CAEN,CAEA,SAASa,EAAa,CACpBX,aAAAA,EACAJ,cAAAA,EACAC,cAAAA,EACAJ,SAAAA,EACAD,OAAAA,EACAM,KAAAA,EACAG,KAAAA,CACe,EAAG,CAElB,MAAMY,EAAeC,EAAQ,CAC3BC,KAAM,+BACNC,GAAI,6BACJC,QAAS,iCAAA,CACV,EAED,OACET,EAAAI,EAAA,CAAArB,UACEc,EAAA,OAAA,CACEf,UAAWgB,EAAQ,CACjB,gCACC,kCAAiCR,CAAK,EAAC,CACzC,EAAEP,SAEFsB,EAAaI,OAAAA,CACV,EACLjB,EACCQ,EAAA,MAAA,CAAAjB,SAAA,CACEc,EAACE,EAAK,CACJb,OAAQG,EACRJ,SAAAA,EACAD,OAAAA,EACAM,KAAAA,EACAH,QAAQ,eAAA,CACT,EACDU,EAACE,EAAK,CACJb,OAAQM,EACRP,SAAAA,EACAD,OAAAA,EACAM,KAAAA,EACAR,UAAU,8BACVW,KAAM,CAAC,CAACD,GAAgBC,CAAAA,CACzB,CAAC,CAAA,CACC,EAELI,EAACE,EAAK,CACJb,OAAQE,EACRH,SAAAA,EACAD,OAAAA,EACAM,KAAAA,CAAAA,CACD,CACF,CAAA,CACD,CAEN"}