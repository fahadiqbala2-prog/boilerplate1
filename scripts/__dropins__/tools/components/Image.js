import"../preact-compat.js";import{c as d}from"../chunks/classes.js";import{g as f}from"../chunks/image-params-keymap.js";import"../preact.js";import{jsx as p}from"../preact-jsx-runtime.js";import{useState as h,useMemo as w}from"../preact-hooks.js";const g={medium:768,large:1024,xlarge:1366,xxlarge:1920},x=(i,e)=>{const[n,r]=i.split("?"),t=new URLSearchParams(r),a=f();let m={};return a&&Object.keys(a).length>0&&e?m=Object.entries(e).reduce((c,[s,l])=>{const o=a[s];return o&&(c[o]=l),c},{}):m={auto:"webp",quality:80,crop:!1,fit:"cover",...e},Object.entries(m).forEach(([c,s])=>{s!=null&&t.set(c,String(s))}),`${n}?${t.toString()}`},y=(i,e)=>{if(!i||!(e!=null&&e.width))return;const n=r=>x(i,{...r});return Object.entries(g).map(([,r])=>{const t=e.width*r/g.xxlarge;return`${n({...e,width:t})} ${r}w`}).join(`,
`)},q=({className:i,src:e,params:n,loading:r="lazy",srcSet:t,onLoad:a,...m})=>{const[c,s]=h(!1),l=w(()=>{if(t)return t;if(!(!e||!n))return y(e,{...n})},[n,e,t]),o=u=>{s(!0),a==null||a(u)};return p("img",{...m,className:d(["dropin-image",["dropin-image--loaded",c],i]),loading:r,onLoad:o,src:e,srcSet:l})};export{q as Image};
//# sourceMappingURL=Image.js.map
