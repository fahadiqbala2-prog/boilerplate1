import"../preact-compat.js";import{c as d}from"../chunks/classes__DJBjVfEyCI.js";import{g as f}from"../chunks/image-params-keymap__DhvefBR8Rn.js";import"../preact.js";import{jsx as p}from"../preact-jsx-runtime.js";import{useState as h,useMemo as w}from"../preact-hooks.js";import"../chunks/preload-helper__uemlvruIqb.js";import"../i18n.js";const g={medium:768,large:1024,xlarge:1366,xxlarge:1920},x=(i,e)=>{const[n,r]=i.split("?"),t=new URLSearchParams(r),a=f();let o={};return a&&Object.keys(a).length>0&&e?o=Object.entries(e).reduce((m,[s,l])=>{const c=a[s];return c&&(m[c]=l),m},{}):o={auto:"webp",quality:80,crop:!1,fit:"cover",...e},Object.entries(o).forEach(([m,s])=>{s!=null&&t.set(m,String(s))}),`${n}?${t.toString()}`},y=(i,e)=>{if(!i||!(e!=null&&e.width))return;const n=r=>x(i,{...r});return Object.entries(g).map(([,r])=>{const t=e.width*r/g.xxlarge;return`${n({...e,width:t})} ${r}w`}).join(`,
`)},M=({className:i,src:e,params:n,loading:r="lazy",srcSet:t,onLoad:a,...o})=>{const[m,s]=h(!1),l=w(()=>{if(t)return t;if(!(!e||!n))return y(e,{...n})},[n,e,t]),c=u=>{s(!0),a==null||a(u)};return p("img",{...o,className:d(["dropin-image",["dropin-image--loaded",m],i]),loading:r,onLoad:c,src:e,srcSet:l})};export{M as Image};
//# sourceMappingURL=Image.js.map
