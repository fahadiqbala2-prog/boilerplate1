{"version":3,"file":"CartItem.js","sources":["../../src/components/CartItem/CartItem.tsx","../../src/components/CartItem/CartItemSkeleton.tsx"],"sourcesContent":["import { FunctionComponent, VNode } from 'preact';\nimport { HTMLAttributes, useContext } from 'preact/compat';\nimport { classes, VComponent } from '@adobe/elsie/lib';\nimport {\n  Button,\n  CartItemSkeleton,\n  Icon,\n  Incrementer,\n  UIContext,\n  ProgressSpinner,\n} from '@adobe/elsie/components';\nimport { useText } from '@adobe/elsie/i18n';\nimport { Trash } from '@adobe/elsie/icons';\n\nimport '@adobe/elsie/components/CartItem/CartItem.css';\n\nexport interface CartItemProps\n  extends Omit<HTMLAttributes<HTMLDivElement>, 'title' | 'loading'> {\n  ariaLabel?: string;\n  image: VNode;\n  title: VNode;\n  price: VNode;\n  taxIncluded?: boolean;\n  taxExcluded?: boolean;\n  total: VNode;\n  totalExcludingTax?: VNode;\n  sku: VNode;\n  quantity?: number;\n  description?: VNode;\n  configurations?: { [key: string]: any };\n  warning?: VNode;\n  alert?: VNode;\n  loading?: boolean;\n  updating?: boolean;\n  onRemove?: () => void;\n  onQuantity?: (value: number) => void;\n}\n\nexport const CartItem: FunctionComponent<CartItemProps> = ({\n  className,\n  children,\n  ariaLabel,\n  image,\n  title,\n  price,\n  taxIncluded = false,\n  taxExcluded = false,\n  total,\n  totalExcludingTax,\n  sku,\n  configurations,\n  warning,\n  alert,\n  quantity = 1,\n  description,\n  loading = false,\n  updating = false,\n  onQuantity,\n  onRemove,\n  ...props\n}) => {\n  const { locale } = useContext(UIContext);\n\n  const labels = useText({\n    each: 'Dropin.CartItem.each.label',\n    quantity: 'Dropin.CartItem.quantity.label',\n    remove: 'Dropin.CartItem.remove.label',\n    removeDefault: 'Dropin.CartItem.removeDefault.label',\n    taxIncluded: 'Dropin.CartItem.taxIncluded.label',\n    taxExcluded: 'Dropin.CartItem.taxExcluded.label',\n    updating: 'Dropin.CartItem.updating.label',\n    updatingDefault: 'Dropin.ProgressSpinner.updating.label',\n  });\n\n  if (loading) return <CartItemSkeleton />;\n\n  return (\n    <div\n      {...props}\n      className={classes([\n        'dropin-cart-item',\n        ['dropin-cart-item--updating', updating],\n        className,\n      ])}\n    >\n      {updating && (\n        <ProgressSpinner\n          className={classes(['dropin-cart-item__spinner'])}\n          ariaLabel={\n            ariaLabel\n              ? labels.updating?.replace('{product}', ariaLabel)\n              : labels.updatingDefault\n          }\n        />\n      )}\n      <div className=\"dropin-cart-item__wrapper\">\n        {/* Image */}\n        <VComponent\n          node={image}\n          className={classes(['dropin-cart-item__image'])}\n        />\n\n        {/* Title */}\n        <VComponent\n          node={title}\n          className={classes([\n            'dropin-cart-item__title',\n            ['dropin-cart-item__title--edit', !!onQuantity || !!onRemove],\n          ])}\n        />\n\n        {/* Description */}\n        {description && (\n          <VComponent\n            node={description}\n            className={classes(['dropin-cart-item__description'])}\n          />\n        )}\n\n        {/* SKU */}\n        <VComponent node={sku} className={classes(['dropin-cart-item__sku'])} />\n        {/* Configurations */}\n        {configurations && (\n          <ul className={classes(['dropin-cart-item__configurations'])}>\n            {Object.entries(configurations).map(([key, value]) => (\n              <li\n                key={key}\n                className={classes(['dropin-cart-item__configurations__item'])}\n              >\n                {key}:{' '}\n                <strong\n                  className={classes([\n                    'dropin-cart-item__configurations__item__value',\n                  ])}\n                >\n                  {value}\n                </strong>\n              </li>\n            ))}\n          </ul>\n        )}\n\n        {/* Price */}\n        <span className={classes(['dropin-cart-item__price'])}>\n          {!onQuantity && (\n            <span className=\"dropin-cart-item__price__quantity\">\n              {quantity.toLocaleString(locale)} x{' '}\n            </span>\n          )}\n\n          <VComponent node={price} role=\"text\" />\n\n          {quantity > 1 && (\n            <>\n              &nbsp;\n              {labels.each}\n            </>\n          )}\n\n          {taxIncluded && (\n            <span\n              data-testid=\"tax-message\"\n              className=\"dropin-cart-item__price-tax-message\"\n            >\n              &nbsp;\n              {labels.taxIncluded}\n            </span>\n          )}\n\n          {taxExcluded && (\n            <span\n              data-testid=\"tax-message\"\n              className=\"dropin-cart-item__price-tax-message\"\n            >\n              &nbsp;\n              {labels.taxExcluded}\n            </span>\n          )}\n        </span>\n\n        {/* Quantity */}\n        <div\n          className={classes([\n            'dropin-cart-item__quantity',\n            ['dropin-cart-item__quantity--edit', !!onQuantity],\n          ])}\n        >\n          {onQuantity ? (\n            <Incrementer\n              className={classes(['dropin-cart-item__quantity__incrementer'])}\n              value={quantity}\n              min={1}\n              onValue={(value) => onQuantity?.(Number(value))}\n              name=\"quantity\"\n              aria-label={labels.quantity}\n              disabled={updating}\n            />\n          ) : (\n            <span className={classes(['dropin-cart-item__quantity__value'])}>\n              {labels.quantity}:{' '}\n              <strong className=\"dropin-cart-item__quantity__number\">\n                {Number(quantity).toLocaleString(locale)}\n              </strong>\n            </span>\n          )}\n\n          {/* Warning */}\n          {warning && (\n            <VComponent\n              node={warning}\n              className={classes([\n                'dropin-cart-item__warning',\n                'dropin-cart-item__warning--quantity',\n              ])}\n            />\n          )}\n\n          {/* Alert */}\n          {alert && (\n            <VComponent\n              node={alert}\n              className={classes([\n                'dropin-cart-item__alert',\n                'dropin-cart-item__alert--quantity',\n              ])}\n            />\n          )}\n        </div>\n\n        {/* Warning */}\n        {warning && (\n          <VComponent\n            node={warning}\n            className={classes(['dropin-cart-item__warning'])}\n          />\n        )}\n\n        {/* Alert */}\n        {alert && (\n          <VComponent\n            node={alert}\n            className={classes(['dropin-cart-item__alert'])}\n          />\n        )}\n\n        {/* Total */}\n        <div\n          className={classes([\n            'dropin-cart-item__total',\n            ['dropin-cart-item__total--edit', !!onRemove],\n          ])}\n        >\n          <div className=\"dropin-cart-item__row-total\">\n            <VComponent node={total} role=\"text\" />\n          </div>\n          {taxIncluded && (\n            <span\n              data-testid=\"tax-message\"\n              className={classes(['dropin-cart-item__total-tax-message'])}\n            >\n              &nbsp;\n              {labels.taxIncluded}\n            </span>\n          )}\n\n          {taxExcluded && (\n            <div className=\"dropin-cart-item__total-tax-excluded\">\n              <span\n                data-testid=\"tax-message\"\n                className={classes([\n                  'dropin-cart-item__total-tax-excluded-message',\n                ])}\n              >\n                {totalExcludingTax && (\n                  <VComponent node={totalExcludingTax} role=\"text\" />\n                )}\n                &nbsp;\n                {labels.taxExcluded}\n              </span>\n            </div>\n          )}\n        </div>\n      </div>\n\n      {/* Remove Item */}\n      {onRemove && (\n        <Button\n          className={classes(['dropin-cart-item__remove'])}\n          variant=\"tertiary\"\n          onClick={() => onRemove?.()}\n          icon={\n            <Icon\n              source={Trash}\n              size=\"24\"\n              stroke=\"2\"\n              viewBox=\"0 0 24 24\"\n              aria-label={\n                ariaLabel\n                  ? labels.remove?.replace('{product}', ariaLabel)\n                  : labels.removeDefault\n              }\n            />\n          }\n          disabled={updating}\n        />\n      )}\n    </div>\n  );\n};\n","import { FunctionComponent } from 'preact';\nimport { Skeleton, SkeletonRow } from '@adobe/elsie/components';\n\nexport const CartItemSkeleton: FunctionComponent = () => {\n  return (\n    <div className=\"dropin-cart-item dropin-cart-item-skeleton\">\n      <Skeleton className=\"dropin-cart-item__skeleton dropin-cart-item__wrapper\">\n        <div className=\"dropin-cart-item__image\">\n          <SkeletonRow className=\"dropin-cart-item__skeleton__item\" />\n        </div>\n        <div className=\"dropin-cart-item__title\">\n          <SkeletonRow className=\"dropin-cart-item__skeleton__item\" />\n        </div>\n        <div className=\"dropin-cart-item__sku\">\n          <SkeletonRow className=\"dropin-cart-item__skeleton__item\" />\n        </div>\n        <div className=\"dropin-cart-item__price\">\n          <SkeletonRow className=\"dropin-cart-item__skeleton__item\" />\n        </div>\n        <div className=\"dropin-cart-item__quantity\">\n          <SkeletonRow className=\"dropin-cart-item__skeleton__item\" />\n        </div>\n        <div className=\"dropin-cart-item__total\">\n          <SkeletonRow className=\"dropin-cart-item__skeleton__item\" />\n        </div>\n      </Skeleton>\n    </div>\n  );\n};\n"],"names":["CartItem","className","children","ariaLabel","image","title","price","taxIncluded","taxExcluded","total","totalExcludingTax","sku","configurations","warning","alert","quantity","description","loading","updating","onQuantity","onRemove","props","locale","useContext","UIContext","labels","useText","each","remove","removeDefault","updatingDefault","_jsx","CartItemSkeleton","_jsxs","classes","ProgressSpinner","replace","VComponent","node","Object","entries","map","key","value","toLocaleString","role","_Fragment","Incrementer","min","onValue","Number","name","disabled","Button","variant","onClick","icon","Icon","source","Trash","size","stroke","viewBox","Skeleton","SkeletonRow"],"mappings":"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"}