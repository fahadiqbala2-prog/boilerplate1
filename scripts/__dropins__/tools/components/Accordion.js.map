{"version":3,"file":"Accordion.js","sources":["../../src/components/Accordion/Accordion.tsx"],"sourcesContent":["import { FunctionComponent, VNode } from 'preact';\nimport { HTMLAttributes, useState } from 'preact/compat';\nimport { classes } from '@adobe/elsie/lib';\nimport { Divider, Icon } from '@adobe/elsie/components';\nimport { Add, Minus } from '@adobe/elsie/icons';\nimport { useText } from '@adobe/elsie/i18n';\nimport '@adobe/elsie/components/Accordion/Accordion.css';\nexport interface AccordionSectionProps\n  extends Omit<HTMLAttributes<HTMLDivElement>, 'icon'> {\n  actionIconPosition?: 'left' | 'right';\n  iconOpen?: VNode<HTMLAttributes<SVGSVGElement>>;\n  iconClose?: VNode<HTMLAttributes<SVGSVGElement>>;\n  iconLeft?: VNode<HTMLAttributes<SVGSVGElement>>;\n  showIconLeft?: boolean;\n  secondaryText?: string | VNode<HTMLAttributes<HTMLSpanElement>>;\n  renderContentWhenClosed?: boolean;\n  onStateChange?: (open: boolean) => void;\n}\n\nexport const AccordionSection: FunctionComponent<AccordionSectionProps> = ({\n  className,\n  children,\n  title,\n  secondaryText,\n  actionIconPosition = 'left',\n  iconOpen = Add,\n  iconClose = Minus,\n  iconLeft = Add,\n  showIconLeft = false,\n  renderContentWhenClosed = true,\n  onStateChange,\n  ...props\n}) => {\n  const [open, setOpen] = useState<boolean>(false);\n  const onClickHandler = (e: { stopImmediatePropagation: () => void }) => {\n    e.stopImmediatePropagation();\n\n    const next = !open;\n    setOpen(next);\n    onStateChange?.(next);\n  };\n\n  const buttonLabel = useText(\n    `Dropin.Accordion.${open ? 'close' : 'open'}.label`\n  ).label;\n\n  const openIcon = (\n    <Icon\n      source={iconOpen}\n      size=\"24\"\n      onClick={onClickHandler}\n      onKeyPress={onClickHandler}\n      className={'dropin-accordion-section__open-icon'}\n    />\n  );\n\n  const closeIcon = (\n    <Icon\n      source={iconClose}\n      size=\"24\"\n      onClick={onClickHandler}\n      onKeyPress={onClickHandler}\n      className={'dropin-accordion-section__close-icon'}\n    />\n  );\n\n  const leftIcon = <Icon source={iconLeft} size=\"24\" />;\n\n  return (\n    <div\n      {...props}\n      className={classes(['dropin-accordion-section', className])}\n    >\n      <div className={'dropin-accordion-section__heading'}>\n        <div\n          className={'dropin-accordion-section__flex'}\n          onClick={onClickHandler}\n          onKeyPress={onClickHandler}\n          role=\"button\"\n          aria-label={`${buttonLabel} ${title}`}\n          tabIndex={0}\n        >\n          <div className={'dropin-accordion-section__title-container'}>\n            {actionIconPosition === 'left' && (open ? closeIcon : openIcon)}\n\n            {showIconLeft && leftIcon}\n\n            <h3 className={'dropin-accordion-section__title'}>{title}</h3>\n          </div>\n        </div>\n\n        <div className={'dropin-accordion-section__secondary-text-container'}>\n          {secondaryText && (\n            <h4 className={'dropin-accordion-section__secondary-text'}>\n              {secondaryText}\n            </h4>\n          )}\n\n          {actionIconPosition === 'right' && (open ? closeIcon : openIcon)}\n        </div>\n      </div>\n\n      <div\n        className={'dropin-accordion-section__content-container'}\n        style={{ display: open ? 'grid' : 'none' }}\n      >\n        {(open || (renderContentWhenClosed && !open)) && children}\n      </div>\n    </div>\n  );\n};\n\nexport interface AccordionProps\n  extends Omit<HTMLAttributes<HTMLDivElement>, 'icon'> {\n  actionIconPosition?: 'left' | 'right';\n  iconOpen?: VNode<HTMLAttributes<SVGSVGElement>>;\n  iconClose?: VNode<HTMLAttributes<SVGSVGElement>>;\n  iconLeft?: VNode<HTMLAttributes<SVGSVGElement>>;\n  showIconLeft?: boolean;\n  secondaryText?: string | VNode<HTMLAttributes<HTMLSpanElement>>;\n  children: VNode<AccordionSectionProps>[] | VNode<AccordionSectionProps>;\n}\n\nexport const Accordion: FunctionComponent<AccordionProps> = ({\n  className,\n  children,\n  actionIconPosition = 'left',\n  iconOpen = Add,\n  iconClose = Minus,\n  ...props\n}) => {\n  const divider = <Divider variant=\"secondary\" />;\n\n  const renderAccordionSection = (child: VNode<AccordionSectionProps>) => (\n    <>\n      <AccordionSection\n        {...child.props}\n        actionIconPosition={actionIconPosition}\n        iconOpen={iconOpen}\n        iconClose={iconClose}\n      />\n      {divider}\n    </>\n  );\n\n  return (\n    <div {...props} className={classes(['dropin-accordion', className])}>\n      {[\n        divider,\n        ...(\n          (Array.isArray(children)\n            ? children\n            : [children]) as VNode<AccordionSectionProps>[]\n        ).map(renderAccordionSection),\n      ]}\n    </div>\n  );\n};\n"],"names":["AccordionSection","className","children","title","secondaryText","actionIconPosition","iconOpen","Add","iconClose","Minus","iconLeft","showIconLeft","renderContentWhenClosed","onStateChange","props","open","setOpen","useState","onClickHandler","e","stopImmediatePropagation","next","buttonLabel","useText","label","openIcon","_jsx","Icon","source","size","onClick","onKeyPress","closeIcon","leftIcon","_jsxs","classes","role","tabIndex","style","display","Accordion","divider","Divider","variant","renderAccordionSection","child","_Fragment","Array","isArray","map"],"mappings":"uZAmBO,MAAMA,EAA6DA,CAAC,CACzEC,UAAAA,EACAC,SAAAA,EACAC,MAAAA,EACAC,cAAAA,EACAC,mBAAAA,EAAqB,OACrBC,SAAAA,EAAWC,EACXC,UAAAA,EAAYC,EACZC,SAAAA,EAAWH,EACXI,aAAAA,EAAe,GACfC,wBAAAA,EAA0B,GAC1BC,cAAAA,EACA,GAAGC,CACL,IAAM,CACJ,KAAM,CAACC,EAAMC,CAAO,EAAIC,EAAkB,EAAK,EACzCC,EAAkBC,GAAgD,CACtEA,EAAEC,yBAAyB,EAE3B,MAAMC,EAAO,CAACN,EACdC,EAAQK,CAAI,EACZR,GAAAA,MAAAA,EAAgBQ,EAAI,EAGhBC,EAAcC,EACjB,oBAAmBR,EAAO,QAAU,MAAO,QAC9C,EAAES,MAEIC,EACJC,EAACC,EAAI,CACHC,OAAQtB,EACRuB,KAAK,KACLC,QAASZ,EACTa,WAAYb,EACZjB,UAAW,qCAAA,CACZ,EAGG+B,EACJN,EAACC,EAAI,CACHC,OAAQpB,EACRqB,KAAK,KACLC,QAASZ,EACTa,WAAYb,EACZjB,UAAW,sCAAA,CACZ,EAGGgC,EAAWP,EAACC,EAAI,CAACC,OAAQlB,EAAUmB,KAAK,IAAA,CAAM,EAEpD,OACEK,EAAA,MAAA,CAAA,GACMpB,EACJb,UAAWkC,EAAQ,CAAC,2BAA4BlC,CAAS,CAAC,EAAEC,UAE5DgC,EAAA,MAAA,CAAKjC,UAAW,oCAAoCC,UAClDwB,EAAA,MAAA,CACEzB,UAAW,iCACX6B,QAASZ,EACTa,WAAYb,EACZkB,KAAK,SACL,aAAa,GAAEd,CAAY,IAAGnB,CAAM,GACpCkC,SAAU,EAAEnC,SAEZgC,EAAA,MAAA,CAAKjC,UAAW,4CAA4CC,UACzDG,IAAuB,SAAWU,EAAOiB,EAAYP,GAErDd,GAAgBsB,EAEjBP,EAAA,KAAA,CAAIzB,UAAW,kCAAkCC,SAAEC,CAAAA,CAAU,CAAC,CAAA,CAC3D,CAAA,CACF,EAEL+B,EAAA,MAAA,CAAKjC,UAAW,qDAAqDC,SAAA,CAClEE,GACCsB,EAAA,KAAA,CAAIzB,UAAW,2CAA2CC,SACvDE,CAAAA,CACC,EAGLC,IAAuB,UAAYU,EAAOiB,EAAYP,EAAS,CAAA,CAC7D,CAAC,CAAA,CACH,EAELC,EAAA,MAAA,CACEzB,UAAW,8CACXqC,MAAO,CAAEC,QAASxB,EAAO,OAAS,MAAO,EAAEb,UAEzCa,GAASH,GAA2B,CAACG,IAAUb,CAAAA,CAC9C,CAAC,CAAA,CACH,CAET,EAaasC,EAA+CA,CAAC,CAC3DvC,UAAAA,EACAC,SAAAA,EACAG,mBAAAA,EAAqB,OACrBC,SAAAA,EAAWC,EACXC,UAAAA,EAAYC,EACZ,GAAGK,CACL,IAAM,CACE2B,MAAAA,EAAUf,EAACgB,EAAO,CAACC,QAAQ,WAAA,CAAa,EAExCC,EAA0BC,GAC9BX,EAAAY,EAAA,CAAA5C,SAAA,CACEwB,EAAC1B,EAAgB,CAAA,GACX6C,EAAM/B,MACVT,mBAAAA,EACAC,SAAAA,EACAE,UAAAA,CACD,CAAA,EACAiC,CAAO,CAAA,CACR,EAGJ,OACEf,EAAA,MAAA,CAAA,GAASZ,EAAOb,UAAWkC,EAAQ,CAAC,mBAAoBlC,CAAS,CAAC,EAAEC,SACjE,CACCuC,EACA,IACGM,MAAMC,QAAQ9C,CAAQ,EACnBA,EACA,CAACA,CAAQ,GACb+C,IAAIL,CAAsB,CAAC,CAAA,CAE5B,CAET"}