const __vite__fileDeps=["debugger.css"],__vite__mapDeps=i=>i.map(i=>__vite__fileDeps[i]);
import{_ as y}from"../chunks/preload-helper__uemlvruIqb.js";import{useRef as S,useState as _,useMemo as R,useContext as I,useCallback as l,useEffect as m}from"../preact-hooks.js";import"../chunks/image-params-keymap__LH6wjfp1fd.js";import"../preact.js";import{jsx as N}from"../preact-jsx-runtime.js";import{IntlContext as b}from"../i18n.js";function O(o={},u,n){const d=S(null),a=S(!1),c=S([]),[h,f]=_({children:[n==null?void 0:n({})]}),[g,P]=_({}),w=R(()=>({get:t=>g[t],set:(t,e)=>{P({...w,[t]:e})}}),[g]),{intl:C}=I(b);o.dictionary=C.dictionary,o._setProps=f;const i=l(t=>{typeof t=="function"?c.current.push(t):console.warn("Skipped: Invalid _registerMethod",t)},[]);o._registerMethod=i;const p=l(t=>N("div",{"data-slot-html-element":t.tagName.toLowerCase(),ref:e=>{e==null||e.appendChild(t)}}),[]);return o._htmlElementToVNode=p,o.getSlotElement=l(t=>{const e=document.querySelector(`[data-slot-key="${t}"]`);if(e)return{appendChild:s=>{e.appendChild(s)},prependChild:s=>{e.insertBefore(s,e.firstChild)},appendSibling:s=>{const r=e.parentNode;r==null||r.insertBefore(s,e.nextSibling)},prependSibling:s=>{const r=e.parentNode;r==null||r.insertBefore(s,e)}}},[]),o.onChange=l(t=>{c.current.push(t)},[]),o.replaceWith=l(t=>{i(e=>{const s=p(t);e._setProps({children:[s]})})},[p,i]),o.appendChild=l(t=>{i(e=>{const s=p(t);e._setProps(r=>({...r,children:[...r.children,s]}))})},[p,i]),o.prependChild=l(t=>{i(e=>{const s=p(t);e._setProps(r=>({...r,children:[s,...r.children]}))})},[p,i]),o.appendSibling=l(t=>{i(()=>{var s,r;const e=(s=d.current)==null?void 0:s.parentNode;e==null||e.insertBefore(t,((r=d.current)==null?void 0:r.nextSibling)??null)})},[i]),o.prependSibling=l(t=>{i(()=>{var s;const e=(s=d.current)==null?void 0:s.parentNode;e==null||e.insertBefore(t,d.current)})},[i]),m(()=>{const t=d.current;if(!(!u||!t))try{u(o,t)}catch(e){console.error(`Error in "${u.name}" Slot callback`,e)}},[]),m(()=>{f({children:[n==null?void 0:n(h)]}),c.current.forEach(t=>{t(o,w)}),(n==null?void 0:n.name)==="render"&&a.current===!1&&(a.current=!0)},[JSON.stringify(o),JSON.stringify(g),a.current]),[d,h]}function L({name:o,slot:u,context:n,children:d,render:a,...c}){const[h,f]=O(n,u,a??(()=>d));return m(()=>{o||console.warn('Slot "name" is required')},[o]),N("div",{...c,ref:h,"data-slot":o,children:f.children})}window.DROPINS=window.DROPINS||{};window.DROPINS.showSlots=async o=>{if(window.sessionStorage.setItem("dropin-debugger--show-slots",o.toString()),document.body.classList.toggle("dropin-debugger--show-slots",o),o)try{await y(()=>Promise.resolve({}),__vite__mapDeps([0]))}catch{}};window.DROPINS.showSlots(window.sessionStorage.getItem("dropin-debugger--show-slots")==="true");export{L as Slot,O as useSlot};
//# sourceMappingURL=slot.js.map
