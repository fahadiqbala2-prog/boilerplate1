/*! Copyright 2025 Adobe
All Rights Reserved. */
import{jsx as A,jsxs as J}from"@dropins/tools/preact-jsx-runtime.js";import{useState as O,useEffect as K,useMemo as w}from"@dropins/tools/preact-compat.js";import{Slot as R}from"@dropins/tools/lib.js";import{Image as Z}from"@dropins/tools/components.js";import{events as U}from"@dropins/tools/event-bus.js";import{g as V}from"../chunks/getFetchedProductData.js";import{Z as W,C as j,O as X}from"../chunks/Zoom.js";/* empty css             */import{useText as Y}from"@dropins/tools/i18n.js";import"@dropins/tools/preact.js";const $=({initialData:v=null,controls:G="dots",loop:I=!0,peak:k=!1,gap:H=null,arrows:N=!0,arrowsOnMainImage:Q=!1,zoom:h=!1,imageParams:t,thumbnailParams:o,children:s,slots:l,...F})=>{var x,y,_,S,T,D;const c=Y("PDP.Product.Image.label").label,[e,q]=O(v),[f,C]=O(null);K(()=>{const r=U.on("pdp/data",q);return()=>{r==null||r.off()}},[]);const g=w(()=>({data:e}),[e]),B=w(()=>{var r;return((r=e==null?void 0:e.images)==null?void 0:r.map(({label:i,url:n},p)=>{const d=({...u})=>{var M;const E={title:i,src:n,alt:c==null?void 0:c.replace("{product}",i).replace("{key}",String(p+1)).replace("{total}",String((M=e==null?void 0:e.images)==null?void 0:M.length)),width:(t==null?void 0:t.width)??960,height:(t==null?void 0:t.height)??1191,params:t??{width:960},loading:p===0?"eager":"lazy",...u};return A(R,{name:"CarouselMainImage",slot:l==null?void 0:l.CarouselMainImage,context:{...g,defaultImageProps:E},children:A(Z,{...E})})};return h?A(W,{closeButton:typeof h=="object"?h.closeButton:!1,children:A(d,{})},n):A(d,{onClick:()=>C(p)},n)}))??A("img",{src:"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",className:"pdp-product-gallery__images__placeholder",width:(t==null?void 0:t.width)??960,height:(t==null?void 0:t.height)??1191,"aria-hidden":!0},"pleaceholder")},[c,e==null?void 0:e.images,t,h,g,l==null?void 0:l.CarouselMainImage]),z=w(()=>{var r;return((r=e==null?void 0:e.images)==null?void 0:r.map(({label:i,url:n},p)=>{var u;const d={title:i,src:n,alt:c==null?void 0:c.replace("{product}",i).replace("{key}",String(p+1)).replace("{total}",String((u=e==null?void 0:e.images)==null?void 0:u.length)),width:(o==null?void 0:o.width)??200,height:(o==null?void 0:o.height)??248,params:o??{width:200},loading:"lazy"};return A(R,{name:"CarouselThumbnail",slotTag:"span",slot:l==null?void 0:l.CarouselThumbnail,context:{...g,defaultImageProps:d},children:A(Z,{...d})},n)}))??A("img",{src:"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",className:"pdp-product-gallery__thumbnail__placeholder",width:(o==null?void 0:o.width)??200,height:(o==null?void 0:o.height)??248,"aria-hidden":!0},"pleaceholder")},[c,e==null?void 0:e.images,o,g,l==null?void 0:l.CarouselThumbnail]);return e?J("div",{...F,children:[A(j,{arrows:!!((x=e==null?void 0:e.images)!=null&&x.length)&&N,arrowsOnMainImage:Q,controls:(y=e==null?void 0:e.images)!=null&&y.length?G:void 0,loop:I&&!!((_=e.images)!=null&&_.length),peak:!!((S=e==null?void 0:e.images)!=null&&S.length)&&k,gap:H,defaultIndex:f||0,thumbnails:z,children:B}),f===null?null:A(X,{onClose:()=>C(null),centered:!0,children:A(j,{arrows:!!((T=e==null?void 0:e.images)!=null&&T.length),width:"100%",height:"100%",defaultIndex:f,loop:I&&!!((D=e.images)!=null&&D.length),controls:"dots",isZoomed:!0,children:B})})]}):null};$.getInitialData=V;export{$ as ProductGallery,$ as default};
