{"version":3,"mappings":"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","names":["debounce","fn","ms","timeoutId","args","clearTimeout","setTimeout","apply","BREAKPOINTS","medium","large","xlarge","xxlarge","resolveImageUrl","url","_opts","base","query","split","params","URLSearchParams","keyMapping","getImageParamsKeyMap","opts","Object","keys","length","entries","reduce","acc","key","value","newKey","auto","quality","crop","fit","forEach","set","String","toString","generateSrcset","imageURL","options","width","generateSrcsetUrl","map","relativeWidth","join","toLanguageTag","locale","replace","useSlot","context","callback","render","elementRef","useRef","loadedRef","methodsRef","props","_setProps","useState","children","_state","setState","state","useMemo","get","intl","useContext","IntlContext","dictionary","_registerMethod","useCallback","current","push","warn","_htmlElementToVNode","elem","_jsx","tagName","toLowerCase","ref","refElem","appendChild","getSlotElement","element","document","querySelector","prependChild","insertBefore","firstChild","appendSibling","parent","parentNode","nextSibling","prependSibling","onChange","replaceWith","next","vnode","prev","useEffect","error","console","name","method","JSON","stringify","Slot","slot","slotProps","window","DROPINS","showSlots","sessionStorage","setItem","body","classList","toggle","__vitePreload","getItem","SvgAdd","React","SvgChevronDown","SvgClose","SvgMinus","Incrementer","className","disabled","success","min","max","onValue","onUpdateError","size","currentValue","setCurrentValue","Number","minValue","maxValue","debouncedOnValueHandler","newValue","e","handleIncrementer","_value","classes","_jsxs","Localizer","type","onClick","Text","id","Icon","source","Minus","stroke","viewBox","step","currentTarget","Add","Image","src","loading","srcSet","onLoad","loaded","setLoaded","_srcSet","onLoadHandler","Price","amount","currency","undefined","variant","weight","sale","formatOptions","formatter","Intl","NumberFormat","style","minimumFractionDigits","maximumFractionDigits","formattedAmount","format","Button","icon","active","activeChildren","activeIcon","href","buttonType","iconClassName","attributes","node","role","VComponent","Picker","floatingLabel","handleSelect","placeholder","defaultOption","Math","random","firstAvailableeOption","find","option","selectedValue","setSelectedValue","text","selected","handleOptionClick","event","target","optionsListItems","placeholderOptionRef","ChevronDown","htmlFor","ColorSwatch","label","groupAriaLabel","color","outOfStock","multi","outOfStockLabel","useText","selectedLabel","swatchLabel","onValueHandler","handleOnValue","input","validColor","colorStyle","Option","handleAriaLabel","checked","TextSwatch","isOverflowing","setIsOverflowing","spanRef","scrollWidth","clientWidth","ImageSwatch","alt","onError","display","Breadcrumbs","categories","separator","_Fragment","category","index","Carousel","show","scrollbar","peak","arrows","controls","arrowsOnMainImage","loop","gap","direction","height","defaultIndex","thumbnails","isZoomed","Label","SlideLabel","PreviousLabel","NextLabel","ControlsLabel","ControlsBtnLabel","perPage","setPerPage","getPerPageFromBreakpoint","ceil","Children","toArray","gapSizes","small","peakWidth","gapWidth","rest","thumbGap","thumbSeen","iconSize","setCurrent","thumbnailsRefs","thumbWidth","setThumbWidth","thumbHeight","setThumbHeight","thumbnailSlides","slides","returnValue","child","i","slice","concat","wrapperRef","thumbnailsWrapperRef","thumbnailControls","wrapper","handleResize","offsetWidth","offsetHeight","innerWidth","newPerPage","observer","ResizeObserver","observe","unobserve","handleThumbnailsScroll","nextSlideIndex","nextItem","thumbnailRef","oneItemWidth","oneItemHeight","thumbnailsWrapper","scrollBehavior","scrollLeft","scrollTop","handleScrollTo","smooth","reset","realWidth","Array","from","querySelectorAll","filter","dataIndex","getAttribute","isNaN","futureIndex","diff","handleGoToPrev","handleGoToNext","lastSlideIndex","handleKeyDown","preventDefault","addEventListener","removeEventListener","handleOnScroll","dividing","round","totalWidth","getArrow","forThumbnails","prevArrow","nextArrow","prevArrowMainImage","nextArrowMainImage","tabIndex","page","orphan","_","buttonsLength","el","breakpoints","mediumViewport","Product","title","breadcrumbs","galleryContent","infoContent","productContent","sku","hideSku","shortDescription","description","images","price","specialPrice","quantity","actions","carouselConfig","RegularPriceLabel","SpecialPriceLabel","OutOfStockLabel","ImagesLabel","zoom","setZoom","galleryImages","image","localThumbnailsImages","thumbnailsLoadingMode","loopable","desktop","GalleryGrid","mobile","Overlay","onClose","centered","count","PriceRange","minimumAmount","maximumAmount","CloseLabel","handleOnClose","scrollingElement","defaultOverflowValue","overflow","CloseSVG","supportedTypes","mapToPickerOptions","items","item","inStock","Swatches","hideSelectedValue","onValues","onErrors","defaultOptions","selectionsToUpdate","RequiredLabel","selections","setSelections","accum","defaultSelection","includes","selectionToUpdate","selectedItem","errors","required","handleOnSelection","optionId","handlePickerSelect","selection","selectedOptions","common","multiple","toDateString","isDateValid","Error","Date","toLocaleDateString","dateString","some","test","date","getTime","setUrlParams","urlSearchParams","location","search","delete","pathname","hash","history","replaceState","getUrlParams","ProductDetails","hideQuantity","hideShortDescription","hideDescription","hideAttributes","hideURLParams","hideSelectedOptionValue","slots","initialData","carousel","optionsConfig","onAddToCart","AddToCartLabel","IncrementerLabel","DetailsLabel","setLocale","config","getConfig","defaultLocale","setSelectionsToUpdate","data","setData","values","setValues","defaultValues","optionUIDs","optionsUIDs","valid","setValid","defaultSlotContext","localeEvent","events","on","payload","then","off","handleOnValues","newValues","handleOptionSelected","getRefinedProduct","anchorOptions","processUpdates","previousOptionsUIDs","updatedOptionsUIDs","every","handleOnErrors","_errors","__html","dangerouslySetInnerHTML","Quantity","defaultValue","renderOptions","Options","Title","SKU","setSeparator","attrs","nextSeparator","appendLink","p","link","appendHTMLElement","domElement","Actions","appendButton","_button","buttonProps","button","ShortDescription","Description","imageParams","prices","visible","SpecialPrice","final","regular","RegularPrice","thumbnailParams","Attributes","GalleryContent","InfoContent","Content","getInitialData","defaultSelections","models","getProductData"],"ignoreList":[],"sources":["../../../ElsieSDK/packages/elsie/src/lib/debounce.ts","../../../ElsieSDK/packages/elsie/src/lib/resolve-image.ts","../../../ElsieSDK/packages/elsie/src/lib/i18n.ts","../../../ElsieSDK/packages/elsie/src/lib/slot.tsx","../../../ElsieSDK/packages/elsie/src/icons/Add.svg","../../../ElsieSDK/packages/elsie/src/icons/ChevronDown.svg","../../../ElsieSDK/packages/elsie/src/icons/Close.svg","../../../ElsieSDK/packages/elsie/src/icons/Minus.svg","../../../ElsieSDK/packages/elsie/src/components/Incrementer/Incrementer.tsx","../../../ElsieSDK/packages/elsie/src/components/Image/Image.tsx","../../../ElsieSDK/packages/elsie/src/components/Price/Price.tsx","../../../ElsieSDK/packages/elsie/src/components/Button/Button.tsx","../../../ElsieSDK/packages/elsie/src/components/Picker/Picker.tsx","../../../ElsieSDK/packages/elsie/src/components/ColorSwatch/ColorSwatch.tsx","../../../ElsieSDK/packages/elsie/src/components/TextSwatch/TextSwatch.tsx","../../../ElsieSDK/packages/elsie/src/components/ImageSwatch/ImageSwatch.tsx","../../../ElsieSDK/packages/elsie/src/components/Breadcrumbs/Breadcrumbs.tsx","../../src/components/Carousel/Carousel.tsx","../../src/components/Product/Product.tsx","../../src/components/GalleryGrid/GalleryGrid.tsx","../../src/components/PriceRange/PriceRange.tsx","../../src/components/Overlay/Overlay.tsx","../../src/components/Swatches/Swatches.tsx","../../src/lib/date.ts","../../src/lib/url-params.ts","../../src/containers/ProductDetails/ProductDetails.tsx"],"sourcesContent":["export const debounce = (fn: Function, ms: number) => {\n  let timeoutId: ReturnType<typeof setTimeout>;\n  return function (this: any, ...args: any[]) {\n    clearTimeout(timeoutId);\n    timeoutId = setTimeout(() => fn.apply(this, args), ms);\n  };\n};\n","import { getImageParamsKeyMap } from '@adobe/elsie/lib/';\n\nconst BREAKPOINTS = {\n  medium: 768,\n  large: 1024,\n  xlarge: 1366,\n  xxlarge: 1920,\n};\n\nexport interface ResolveImageUrlOptions {\n  width: number;\n  height?: number;\n  auto?: string;\n  quality?: number;\n  crop?: boolean;\n  fit?: string;\n}\n\nconst resolveImageUrl = (url: string, _opts?: ResolveImageUrlOptions) => {\n  const [base, query] = url.split('?');\n  const params = new URLSearchParams(query);\n\n  const keyMapping = getImageParamsKeyMap();\n\n  let opts = {};\n\n  if (keyMapping && Object.keys(keyMapping).length > 0 && _opts) {\n    opts = Object.entries(_opts).reduce((acc, [key, value]) => {\n      const newKey = keyMapping[key];\n      if (newKey) {\n        acc[newKey] = value;\n      }\n      return acc;\n    }, {} as { [key: string]: any });\n  } else {\n    opts = {\n      auto: 'webp',\n      quality: 80,\n      crop: false,\n      fit: 'cover',\n      ..._opts,\n    };\n  }\n  // Append image optimization parameters\n  Object.entries(opts).forEach(([key, value]) => {\n    if (value !== undefined && value !== null) {\n      params.set(key, String(value));\n    }\n  });\n\n  return `${base}?${params.toString()}`;\n};\n\nexport const generateSrcset = (\n  imageURL: string,\n  options: ResolveImageUrlOptions\n) => {\n  if (!imageURL || !options?.width) return;\n\n  const generateSrcsetUrl = (options: ResolveImageUrlOptions) => {\n    return resolveImageUrl(imageURL, {\n      ...options,\n    });\n  };\n\n  return Object.entries(BREAKPOINTS)\n    .map(([, value]) => {\n      // calculate breakpoints width\n      const relativeWidth = (options.width * value) / BREAKPOINTS.xxlarge;\n\n      return `${generateSrcsetUrl({\n        ...options,\n        width: relativeWidth,\n      })} ${value}w`;\n    })\n    .join(',\\n');\n};\n","/**\n * Convert locale from Magento standard to react-intl BCP 47 language tag\n *\n * @param {string} locale - A locale (e.g. `fr_FR`).\n * @returns {string} A BCP 47 language tag (e.g. `fr-FR`).\n */\nexport const toLanguageTag = (locale: string) => {\n  return locale.replace('_', '-');\n};\n","import { RefObject, VNode } from 'preact';\nimport {\n  StateUpdater,\n  useContext,\n  useState,\n  useRef,\n  useEffect,\n  useMemo,\n  useCallback,\n} from 'preact/hooks';\nimport { IntlContext, Lang } from '@adobe/elsie/i18n';\nimport { HTMLAttributes } from 'preact/compat';\n\ntype MutateElement = (elem: HTMLElement) => void;\n\ninterface State {\n  get: (key: string) => void;\n  set: (key: string, value: any) => void;\n}\n\ninterface SlotElement {\n  appendChild: MutateElement;\n  prependChild: MutateElement;\n  appendSibling: MutateElement;\n  prependSibling: MutateElement;\n}\n\ninterface PrivateContext<T> {\n  _setProps: StateUpdater<{}>;\n  _registerMethod: (\n    cb: (next: T & DefaultSlotContext<T>, state: State) => void\n  ) => void;\n  _htmlElementToVNode: (element: HTMLElement) => VNode;\n}\n\ninterface DefaultSlotContext<T> extends PrivateContext<T> {\n  dictionary: Lang;\n  getSlotElement: (key: string) => SlotElement;\n  replaceWith: MutateElement;\n  appendChild: MutateElement;\n  prependChild: MutateElement;\n  appendSibling: MutateElement;\n  prependSibling: MutateElement;\n  onChange: (cb: (next: T & DefaultSlotContext<T>) => void) => void;\n}\n\ntype Context<T> = T & ThisType<DefaultSlotContext<T>>; // NOSONAR\n\nexport type SlotProps<T = any> = (\n  ctx: T & DefaultSlotContext<T>,\n  element: HTMLDivElement | null\n) => void;\n\nexport type SlotMethod<P = any> = (\n  callback: (next: unknown, state: State) => P\n) => void;\n\n// Slot Hook\nexport function useSlot<K, V extends HTMLDivElement>(\n  // @ts-ignore\n  context: Context<K> = {},\n  callback?: SlotProps<K>,\n  render?: Function\n): [RefObject<V>, Record<string, any>] {\n  // HTML Element\n  const elementRef = useRef<V>(null);\n\n  const loadedRef = useRef(false);\n\n  // Methods\n  const methodsRef = useRef<any>([]);\n\n  // Children VNodes\n  const [props, _setProps] = useState<Record<string, any>>({\n    children: [render?.({})],\n  });\n\n  // Attributes\n  const [_state, setState] = useState<any>({});\n\n  const state = useMemo(\n    () => ({\n      get: (key: string) => _state[key],\n      set: (key: string, value: any) => {\n        setState({ ...state, [key]: value });\n      },\n    }),\n    [_state]\n  );\n\n  /** Internationalization */\n  const { intl }: any = useContext(IntlContext);\n\n  // @ts-ignore\n  context.dictionary = intl.dictionary;\n\n  /** Privates */\n  // @ts-ignore\n  context._setProps = _setProps;\n\n  const _registerMethod = useCallback((callback: Function) => {\n    if (typeof callback === 'function') {\n      methodsRef.current.push(callback);\n    } else {\n      console.warn('Skipped: Invalid _registerMethod', callback);\n    }\n  }, []);\n\n  // @ts-ignore\n  context._registerMethod = _registerMethod;\n\n  const _htmlElementToVNode = useCallback((elem: HTMLElement) => {\n    return (\n      <div\n        data-slot-html-element={elem.tagName.toLowerCase()}\n        ref={(refElem) => {\n          refElem?.appendChild(elem);\n        }}\n      />\n    );\n  }, []);\n\n  // @ts-ignore\n  context._htmlElementToVNode = _htmlElementToVNode;\n\n  /** Prebuilt Methods */\n  // @ts-ignore\n  context.getSlotElement = useCallback((key: string) => {\n    const element = document.querySelector(`[data-slot-key=\"${key}\"]`);\n\n    if (!element) return;\n\n    return {\n      appendChild: (elem: HTMLElement) => {\n        element.appendChild(elem);\n      },\n\n      prependChild: (elem: HTMLElement) => {\n        element.insertBefore(elem, element.firstChild);\n      },\n\n      appendSibling: (elem: HTMLElement) => {\n        const parent = element.parentNode;\n        parent?.insertBefore(elem, element.nextSibling);\n      },\n\n      prependSibling: (elem: HTMLElement) => {\n        const parent = element.parentNode;\n        parent?.insertBefore(elem, element);\n      },\n    };\n  }, []);\n\n  // @ts-ignore\n  context.onChange = useCallback((callback: Function) => {\n    methodsRef.current.push(callback);\n  }, []);\n\n  // @ts-ignore\n  context.replaceWith = useCallback(\n    (elem: HTMLElement) => {\n      // @ts-ignore\n      _registerMethod((next) => {\n        // @ts-ignore\n        const children = _htmlElementToVNode(elem);\n\n        next._setProps({ children: [children] });\n      });\n    },\n    [_htmlElementToVNode, _registerMethod]\n  );\n\n  // @ts-ignore\n  context.appendChild = useCallback(\n    (elem: HTMLElement) => {\n      // @ts-ignore\n      _registerMethod((next) => {\n        // @ts-ignore\n        const vnode = _htmlElementToVNode(elem);\n\n        next._setProps((prev: any) => {\n          return {\n            ...prev,\n            children: [...prev.children, vnode],\n          };\n        });\n      });\n    },\n    [_htmlElementToVNode, _registerMethod]\n  );\n\n  // @ts-ignore\n  context.prependChild = useCallback(\n    (elem: HTMLElement) => {\n      // @ts-ignore\n      _registerMethod((next) => {\n        // @ts-ignore\n        const vnode = _htmlElementToVNode(elem);\n\n        next._setProps((prev: any) => {\n          return {\n            ...prev,\n            children: [vnode, ...prev.children],\n          };\n        });\n      });\n    },\n    [_htmlElementToVNode, _registerMethod]\n  );\n\n  // @ts-ignore\n  context.appendSibling = useCallback(\n    (elem: HTMLElement) => {\n      // @ts-ignore\n      _registerMethod(() => {\n        const parent = elementRef.current?.parentNode;\n\n        parent?.insertBefore(elem, elementRef.current?.nextSibling ?? null);\n      });\n    },\n    [_registerMethod]\n  );\n\n  // @ts-ignore\n  context.prependSibling = useCallback(\n    (elem: HTMLElement) => {\n      // @ts-ignore\n      _registerMethod(() => {\n        const parent = elementRef.current?.parentNode;\n\n        parent?.insertBefore(elem, elementRef.current);\n      });\n    },\n    [_registerMethod]\n  );\n\n  // Initialization\n  useEffect(() => {\n    const element = elementRef.current;\n\n    if (!callback || !element) return;\n\n    // Run callback\n    try {\n      callback(context as K & DefaultSlotContext<K>, element);\n    } catch (error) {\n      console.error(`Error in \"${callback.name}\" Slot callback`, error);\n    }\n\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n\n  // Lifecycles\n  useEffect(() => {\n    // Reset\n    _setProps({ children: [render?.(props)] });\n\n    // Run all registered methods\n    methodsRef.current.forEach((method: any) => {\n      method(context, state);\n    });\n\n    // Required to trigger re-render of render method\n    if (render?.name === 'render' && loadedRef.current === false) {\n      loadedRef.current = true;\n    }\n\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [JSON.stringify(context), JSON.stringify(_state), loadedRef.current]);\n\n  return [elementRef, props];\n}\n\n// Slot Component\ninterface SlotPropsComponent<T>\n  extends Omit<HTMLAttributes<HTMLDivElement>, 'slot'> {\n  name: string;\n  slot?: SlotProps<T>;\n  context?: Context<T>;\n  render?: (props: Record<string, any>) => VNode | VNode[];\n}\n\nexport function Slot<T>({\n  name,\n  slot,\n  context,\n  children,\n  render,\n  ...props\n}: Readonly<SlotPropsComponent<T>>) {\n  const [elementRef, slotProps] = useSlot<T, HTMLDivElement>(\n    context,\n    slot,\n    render ?? (() => children)\n  );\n\n  useEffect(() => {\n    if (!name) console.warn('Slot \"name\" is required');\n  }, [name]);\n\n  return (\n    <div {...props} ref={elementRef} data-slot={name}>\n      {slotProps.children}\n    </div>\n  );\n}\n\n// Debugger\n\n// @ts-ignore\nwindow.DROPINS = window.DROPINS || {};\n\n// @ts-ignore\nwindow.DROPINS.showSlots = async (state) => {\n  // cache state in session storage\n  window.sessionStorage.setItem(\n    'dropin-debugger--show-slots',\n    state.toString()\n  );\n\n  document.body.classList.toggle('dropin-debugger--show-slots', state);\n\n  if (state) {\n    try {\n      await import('@adobe/elsie/components/UIProvider/debugger.css');\n    } catch (error) {}\n  }\n};\n\n// @ts-ignore\nwindow.DROPINS.showSlots(\n  window.sessionStorage.getItem('dropin-debugger--show-slots') === 'true'\n);\n","import * as React from \"react\";\nconst SvgAdd = (props) => /* @__PURE__ */ React.createElement(\"svg\", { id: \"Icon_Add_Base\", \"data-name\": \"Icon \\\\u2013 Add \\\\u2013 Base\", xmlns: \"http://www.w3.org/2000/svg\", width: 24, height: 24, viewBox: \"0 0 24 24\", ...props }, /* @__PURE__ */ React.createElement(\"g\", { id: \"Large\" }, /* @__PURE__ */ React.createElement(\"rect\", { id: \"Placement_area\", \"data-name\": \"Placement area\", width: 24, height: 24, fill: \"#fff\", opacity: 0 }), /* @__PURE__ */ React.createElement(\"g\", { id: \"Add_icon\", \"data-name\": \"Add icon\", transform: \"translate(9.734 9.737)\" }, /* @__PURE__ */ React.createElement(\"line\", { vectorEffect: \"non-scaling-stroke\", id: \"Line_579\", \"data-name\": \"Line 579\", y2: 12.7, transform: \"translate(2.216 -4.087)\", fill: \"none\", stroke: \"currentColor\" }), /* @__PURE__ */ React.createElement(\"line\", { vectorEffect: \"non-scaling-stroke\", id: \"Line_580\", \"data-name\": \"Line 580\", x2: 12.7, transform: \"translate(-4.079 2.263)\", fill: \"none\", stroke: \"currentColor\" }))));\nexport default SvgAdd;\n","import * as React from \"react\";\nconst SvgChevronDown = (props) => /* @__PURE__ */ React.createElement(\"svg\", { width: 24, height: 24, viewBox: \"0 0 24 24\", fill: \"none\", xmlns: \"http://www.w3.org/2000/svg\", ...props }, /* @__PURE__ */ React.createElement(\"path\", { d: \"M7.74512 9.87701L12.0001 14.132L16.2551 9.87701\", stroke: \"currentColor\", strokeWidth: 1.5, strokeLinecap: \"square\", strokeLinejoin: \"round\" }));\nexport default SvgChevronDown;\n","import * as React from \"react\";\nconst SvgClose = (props) => /* @__PURE__ */ React.createElement(\"svg\", { width: 24, height: 24, viewBox: \"0 0 24 24\", fill: \"none\", xmlns: \"http://www.w3.org/2000/svg\", ...props }, /* @__PURE__ */ React.createElement(\"path\", { vectorEffect: \"non-scaling-stroke\", d: \"M18.3599 5.64001L5.62988 18.37\", stroke: \"currentColor\" }), /* @__PURE__ */ React.createElement(\"path\", { vectorEffect: \"non-scaling-stroke\", d: \"M18.3599 18.37L5.62988 5.64001\", stroke: \"currentColor\" }));\nexport default SvgClose;\n","import * as React from \"react\";\nconst SvgMinus = (props) => /* @__PURE__ */ React.createElement(\"svg\", { width: 24, height: 24, viewBox: \"0 0 24 24\", fill: \"none\", xmlns: \"http://www.w3.org/2000/svg\", ...props }, /* @__PURE__ */ React.createElement(\"path\", { d: \"M17.3332 11.75H6.6665\", strokeWidth: 1.5, strokeLinecap: \"square\", strokeLinejoin: \"round\", vectorEffect: \"non-scaling-stroke\", fill: \"none\", stroke: \"currentColor\" }));\nexport default SvgMinus;\n","import { FunctionComponent } from 'preact';\nimport { useState, useEffect, useCallback } from 'preact/hooks';\nimport { HTMLAttributes } from 'preact/compat';\nimport { classes, debounce } from '@adobe/elsie/lib';\nimport { Add, Minus } from '@adobe/elsie/icons';\nimport { Icon } from '@adobe/elsie/components/Icon';\nimport { Localizer, Text } from '@adobe/elsie/i18n';\nimport '@adobe/elsie/components/Incrementer/Incrementer.css';\n\nexport interface IncrementerProps\n  extends Omit<HTMLAttributes<HTMLInputElement>, 'size'> {\n  name?: string;\n  size?: 'medium' | 'large';\n  onValue?: (value: any) => void;\n  onUpdateError?: (error: Error) => void;\n  error?: boolean;\n  success?: boolean;\n  min?: number;\n  max?: number;\n  disabled?: boolean;\n  maxLength?: number;\n}\n\nexport const Incrementer: FunctionComponent<IncrementerProps> = ({\n  name,\n  value = '1',\n  className,\n  disabled,\n  error,\n  success,\n  min,\n  max,\n  onValue,\n  onUpdateError,\n  size = 'medium',\n  ...props\n}) => {\n  const [currentValue, setCurrentValue] = useState<number>(Number(value));\n  const minValue = Number(min);\n  const maxValue = Number(max);\n\n  useEffect(() => {\n    setCurrentValue(Number(value));\n  }, [value]);\n\n  // eslint-disable-next-line react-hooks/exhaustive-deps\n  const debouncedOnValueHandler = useCallback(\n    debounce(async (newValue: any) => {\n      if (onValue) {\n        try {\n          await onValue(newValue);\n        } catch (e) {\n          if (onUpdateError) {\n            onUpdateError(e as Error);\n          }\n        }\n      }\n    }, 200),\n    [onValue, onUpdateError]\n  );\n\n  const handleIncrementer = (_value: number) => {\n    let newValue = _value;\n    if (_value < minValue) newValue = minValue;\n    if (_value > maxValue) newValue = maxValue;\n    debouncedOnValueHandler(newValue);\n    setCurrentValue(newValue);\n  };\n\n  return (\n    <div\n      className={classes([\n        'dropin-incrementer',\n        `dropin-incrementer--${size}`,\n        className,\n      ])}\n    >\n      <div\n        className={classes([\n          'dropin-incrementer__content',\n          `dropin-incrementer__content--${size}`,\n          [`dropin-incrementer__content--error`, error],\n          [`dropin-incrementer__content--success`, success],\n          [`dropin-incrementer__content--disabled`, disabled],\n        ])}\n      >\n        {/* Minus Button */}\n        <div\n          className={classes([\n            'dropin-incrementer__button-container',\n            [`dropin-incrementer__button-container--disabled`, disabled],\n          ])}\n        >\n          <Localizer>\n            <button\n              type=\"button\"\n              className={classes([\n                'dropin-incrementer__decrease-button',\n                [`dropin-incrementer__decrease-button--disabled`, disabled],\n              ])}\n              onClick={() => handleIncrementer(currentValue - 1)}\n              disabled={disabled || currentValue < minValue + 1}\n              aria-label={\n                (<Text id=\"Dropin.Incrementer.decreaseLabel\" />) as any\n              }\n            >\n              <Icon\n                source={Minus}\n                size=\"16\"\n                stroke=\"1\"\n                viewBox=\"4 2 20 20\"\n                className=\"dropin-incrementer__down\"\n              />\n            </button>\n          </Localizer>\n        </div>\n\n        {/* Input Field */}\n        <input\n          className=\"dropin-incrementer__input\"\n          max={max}\n          min={min}\n          step={1}\n          type=\"number\"\n          name={name}\n          value={currentValue}\n          disabled={disabled}\n          onChange={(e) => {\n            const newValue = e.currentTarget.value;\n            if (newValue !== '') {\n              handleIncrementer(Number(newValue));\n            }\n          }}\n          {...props}\n        />\n\n        <div\n          className={classes([\n            'dropin-incrementer__button-container',\n            [`dropin-incrementer__button-container--disabled`, disabled],\n          ])}\n        >\n          {/* Plus/Add button */}\n          <Localizer>\n            <button\n              type=\"button\"\n              className={classes([\n                'dropin-incrementer__increase-button',\n                [`dropin-incrementer__increase-button--disabled`, disabled],\n              ])}\n              onClick={() => handleIncrementer(currentValue + 1)}\n              disabled={disabled || currentValue > maxValue - 1}\n              aria-label={\n                (<Text id=\"Dropin.Incrementer.increaseLabel\" />) as any\n              }\n            >\n              <Icon\n                source={Add}\n                size=\"16\"\n                stroke=\"1\"\n                viewBox=\"4 2 20 20\"\n                className=\"dropin-incrementer__add\"\n              />\n            </button>\n          </Localizer>\n        </div>\n      </div>\n    </div>\n  );\n};\n","import { FunctionComponent } from 'preact';\nimport { HTMLAttributes, useMemo, useState } from 'preact/compat';\nimport {\n  classes,\n  generateSrcset,\n  ResolveImageUrlOptions,\n} from '@adobe/elsie/lib';\nimport '@adobe/elsie/components/Image/Image.css';\n\nexport interface ImageProps extends HTMLAttributes<HTMLDivElement> {\n  params?: ResolveImageUrlOptions;\n  src: string;\n  onLoad?: (e: any) => void;\n}\nexport const Image: FunctionComponent<ImageProps> = ({\n  className,\n  src,\n  params,\n  loading = 'lazy',\n  srcSet,\n  onLoad,\n  ...props\n}) => {\n  const [loaded, setLoaded] = useState(false);\n\n  const _srcSet = useMemo(() => {\n    // If srcSet is provided, use it\n    if (srcSet) return srcSet;\n\n    // If src is not provided, return \"undefined\"\n    if (!src || !params) return;\n\n    // Otherwise, generate srcSet based on params\n    return generateSrcset(src, { ...params });\n  }, [params, src, srcSet]);\n\n  // Add class at image onLoad\n  const onLoadHandler = (e: any) => {\n    setLoaded(true);    \n    onLoad?.(e);\n  };\n\n  return (\n    <img\n      {...props}\n      className={classes([\n        'dropin-image',\n        ['dropin-image--loaded', loaded],\n        className,\n      ])}\n      loading={loading}\n      onLoad={onLoadHandler}\n      src={src}\n      srcSet={_srcSet}\n    />\n  );\n};\n","import { FunctionComponent } from 'preact';\nimport { HTMLAttributes, useMemo } from 'preact/compat';\nimport { classes } from '@adobe/elsie/lib';\nimport '@adobe/elsie/components/Price/Price.css';\n\nexport interface PriceProps\n  extends Omit<HTMLAttributes<HTMLSpanElement>, 'size'> {\n  amount?: number;\n  currency?: string;\n  locale?: string;\n  formatOptions?: {\n    [key: string]: any;\n  };\n  variant?: 'default' | 'strikethrough';\n  weight?: 'bold' | 'normal';\n  sale?: boolean;\n  size?: 'small' | 'medium' | 'large';\n}\n\nexport const Price: FunctionComponent<PriceProps> = ({\n  amount = 0,\n  currency,\n  locale = undefined,\n  variant = 'default',\n  weight = 'bold',\n  className,\n  children,\n  sale = false,\n  formatOptions = {},\n  size = 'small',\n  ...props\n}) => {\n  const formatter = useMemo(\n    () =>\n      new Intl.NumberFormat(locale, {\n        style: 'currency',\n        currency: currency || 'USD',\n        // These options are needed to round to whole numbers if that's what you want.\n        minimumFractionDigits: 2, // (this suffices for whole numbers, but will print 2500.10 as $2,500.1)\n        maximumFractionDigits: 2, // (causes 2500.99 to be printed as $2,501)\n        ...formatOptions,\n      }),\n    [locale, currency, formatOptions]\n  );\n\n  const formattedAmount = useMemo(() => formatter.format(amount), [amount, formatter])\n\n  return (\n    <span\n      {...props}\n      className={classes([\n        'dropin-price',\n        `dropin-price--${variant}`,\n        `dropin-price--${size}`,\n        `dropin-price--${weight}`,\n        ['dropin-price--sale', sale],\n        className,\n      ])}\n    >\n      {formattedAmount}\n    </span>\n  );\n};\n","import { ComponentChildren, FunctionComponent, VNode } from 'preact';\nimport { HTMLAttributes } from 'preact/compat';\nimport { VComponent, classes } from '@adobe/elsie/lib';\nimport '@adobe/elsie/components/Button/Button.css';\n\nexport interface ButtonProps\n  extends Omit<\n    HTMLAttributes<HTMLButtonElement | HTMLAnchorElement>,\n    'size' | 'icon'\n  > {\n  variant?: 'primary' | 'secondary' | 'tertiary';\n  size?: 'medium' | 'large';\n  children?: ComponentChildren;\n  icon?: VNode<HTMLAttributes<SVGSVGElement>>;\n  disabled?: boolean;\n  active?: boolean;\n  activeChildren?: ComponentChildren;\n  activeIcon?: VNode<HTMLAttributes<SVGSVGElement>>;\n}\n\nexport const Button: FunctionComponent<ButtonProps> = ({\n  value,\n  variant = 'primary',\n  size = 'medium',\n  icon,\n  className,\n  children,\n  disabled = false,\n  active = false,\n  activeChildren,\n  activeIcon,\n  href,\n  ...props\n}) => {\n  let buttonType = 'dropin-button';\n\n  if (\n    (icon && !children) ||\n    (icon && active && !activeChildren) ||\n    (!icon && active && activeIcon)\n  ) {\n    buttonType = 'dropin-iconButton';\n  }\n\n  if (active && activeChildren) {\n    buttonType = 'dropin-button';\n  }\n\n  className = classes([\n    buttonType,\n    `${buttonType}--${size}`,\n    `${buttonType}--${variant}`,\n    [`${buttonType}--${variant}--disabled`, disabled],\n    children && icon && `${buttonType}--with-icon`,\n    !children && activeChildren && icon && `${buttonType}--with-icon`,\n    active && activeIcon && `${buttonType}--with-icon`,\n    className,\n  ]);\n\n  const iconClassName = classes([\n    'dropin-button-icon',\n    `dropin-button-icon--${variant}`,\n    [`dropin-button-icon--${variant}--disabled`, disabled],\n    icon?.props.className,\n  ]);\n\n  const attributes = href\n    ? {\n        node: <a />,\n        role: 'link',\n        href,\n        ...props,\n        disabled,\n        active,\n      }\n    : {\n        node: <button />,\n        role: 'button',\n        ...props,\n        value,\n        disabled,\n        active,\n      };\n\n  return (\n    <VComponent {...attributes} className={className}>\n      {icon && !active && <VComponent node={icon} className={iconClassName} />}\n\n      {activeIcon && active && (\n        <VComponent node={activeIcon} className={iconClassName} />\n      )}\n\n      {children &&\n        !active &&\n        (typeof children === 'string' ? <span>{children}</span> : children)}\n\n      {active &&\n        activeChildren &&\n        (typeof activeChildren === 'string' ? (\n          <span>{activeChildren}</span>\n        ) : (\n          activeChildren\n        ))}\n    </VComponent>\n  );\n};\n","import { Icon } from '@adobe/elsie/components';\nimport '@adobe/elsie/components/Picker/Picker.css';\nimport { ChevronDown } from '@adobe/elsie/icons';\nimport { classes } from '@adobe/elsie/lib';\nimport { FunctionComponent, VNode } from 'preact';\nimport { HTMLAttributes, useEffect, useState } from 'preact/compat';\nimport { useRef } from 'preact/hooks';\n\nexport interface PickerOption {\n  value: string | null;\n  text?: string;\n  icon?: VNode<HTMLAttributes<SVGSVGElement>>;\n  disabled?: boolean;\n}\n\nexport interface PickerProps\n  extends Omit<HTMLAttributes<HTMLSelectElement>, 'value' | 'size' | 'icon'> {\n  id?: string;\n  name?: string;\n  value?: string | null;\n  placeholder?: string;\n  variant?: 'primary' | 'secondary';\n  size?: 'medium' | 'large';\n  floatingLabel?: string;\n  icon?: VNode<HTMLAttributes<SVGSVGElement>>;\n  options?: PickerOption[];\n  defaultOption?: PickerOption;\n  disabled?: boolean;\n  error?: boolean;\n  handleSelect?: (event: Event) => void;\n}\n\nexport const Picker: FunctionComponent<PickerProps> = ({\n  name,\n  value = null,\n  options,\n  variant = 'primary',\n  floatingLabel,\n  size = 'medium',\n  handleSelect = () => {},\n  disabled = false,\n  error = false,\n  placeholder,\n  defaultOption,\n  icon,\n  className,\n  ...props\n}) => {\n  const id = props?.id || name || `dropin-picker-${Math.random().toString(36)}`;\n\n  // find the first option that is not disabled\n  const firstAvailableeOption = options?.find((option) => !option.disabled);\n\n  const [selectedValue, setSelectedValue] = useState<PickerOption>({\n    value,\n    text: defaultOption?.text || placeholder || firstAvailableeOption?.text,\n    icon,\n  });\n\n  useEffect(() => {\n    const selected = options?.find((option) => option.value === value);\n\n    setSelectedValue(\n      selected ?? {\n        value:\n          (defaultOption?.value as string) ||\n          ((placeholder || floatingLabel\n            ? null\n            : firstAvailableeOption?.value) as string),\n        text: defaultOption?.text || placeholder || firstAvailableeOption?.text,\n        icon,\n      }\n    );\n  }, [value, options, placeholder, icon, defaultOption, floatingLabel]);\n\n  const handleOptionClick = (event: Event) => {\n    const { options, value } = event.target as HTMLSelectElement;\n\n    for (const element of options) {\n      if (element.selected) {\n        setSelectedValue({ value, text: element.text, icon });\n        handleSelect(event);\n      }\n    }\n  };\n\n  const optionsListItems = options?.map((option) => {\n    const { value, text, disabled } = option;\n    const selected = value === selectedValue.value;\n\n    return (\n      <option\n        value={value as string}\n        key={value}\n        selected={selected}\n        disabled={disabled}\n        className={classes(['dropin-picker__option'])}\n      >\n        {text}\n      </option>\n    );\n  });\n\n  const placeholderOptionRef = useRef(null);\n  // @ts-ignore\n  const selected = !placeholderOptionRef.current?.selected || !!defaultOption;\n\n  return (\n    <div\n      className={classes([\n        className,\n        'dropin-picker',\n        `dropin-picker__${size}`,\n        ['dropin-picker__floating', !!floatingLabel],\n        ['dropin-picker__selected', selected],\n        ['dropin-picker__error', error],\n        ['dropin-picker__disabled', disabled],\n        ['dropin-picker__icon', icon],\n      ])}\n    >\n      {icon && (\n        // @ts-ignore\n        <icon.type\n          {...icon.props}\n          className={'dropin-picker__icon--placeholder'}\n        />\n      )}\n\n      <select\n        id={id}\n        className={classes([\n          'dropin-picker__select',\n          `dropin-picker__select--${variant}`,\n          `dropin-picker__select--${size}`,\n          ['dropin-picker__select--floating', !!floatingLabel],\n        ])}\n        name={name}\n        aria-label={name}\n        disabled={disabled}\n        onChange={handleOptionClick}\n        {...props}\n      >\n        {!defaultOption && (floatingLabel || placeholder) && (\n          <option\n            value={''}\n            key={value}\n            ref={placeholderOptionRef}\n            className={classes([\n              'dropin-picker__option dropin-picker__placeholder',\n            ])}\n          >\n            {floatingLabel ?? placeholder}\n          </option>\n        )}\n\n        {optionsListItems}\n      </select>\n\n      <Icon\n        source={ChevronDown}\n        size=\"24\"\n        stroke=\"2\"\n        className=\"dropin-picker__chevronDown\"\n      />\n\n      {floatingLabel && selected && (\n        <label\n          htmlFor={id}\n          className={classes(['dropin-picker__floatingLabel', !!floatingLabel])}\n        >\n          {floatingLabel}\n        </label>\n      )}\n    </div>\n  );\n};\n","import { FunctionComponent } from 'preact';\nimport { HTMLAttributes, useCallback } from 'preact/compat';\nimport { classes } from '@adobe/elsie/lib';\nimport '@adobe/elsie/components/ColorSwatch/ColorSwatch.css';\nimport { useText } from '@adobe/elsie/i18n';\n\nexport interface ColorSwatchProps\n  extends Omit<HTMLAttributes<HTMLInputElement>, 'label' | 'size'> {\n  name?: string;\n  label?: string;\n  groupAriaLabel?: string;\n  id?: string;\n  size?: 'medium' | 'large';\n  color?: string;\n  value?: string;\n  disabled?: boolean;\n  selected?: boolean;\n  outOfStock?: boolean;\n  multi?: boolean;\n  onValue?: (value: any) => void;\n  onUpdateError?: (error: Error) => void;\n}\n\nexport const ColorSwatch: FunctionComponent<ColorSwatchProps> = ({\n  className,\n  name,\n  value,\n  id,\n  label,\n  groupAriaLabel,\n  size = 'medium',\n  color,\n  disabled = false,\n  selected = false,\n  outOfStock = false,\n  multi = false,\n  onValue,\n  onUpdateError,\n  ...props\n}) => {\n  // i18n\n  const outOfStockLabel = useText('Dropin.Swatches.outOfStock.label').label;\n  const selectedLabel = useText('Dropin.Swatches.selected.label').label;\n  const swatchLabel = useText('Dropin.Swatches.swatch.label').label;\n\n  const onValueHandler = useCallback(\n    async (newValue: any) => {\n      if (onValue) {\n        try {\n          await onValue(newValue);\n        } catch (e) {\n          if (onUpdateError) {\n            onUpdateError(e as Error);\n          }\n        }\n      }\n    },\n    [onValue, onUpdateError]\n  );\n\n  const handleOnValue = (e: Event) => {\n    const input = e.target as HTMLInputElement;\n\n    onValueHandler(input.value);\n  };\n\n  const isValidColor = (color: string) => {\n    const colorStyle = new Option().style;\n    colorStyle.color = color;\n    return colorStyle.color !== ''; // Returns true if the browser accepts this as a valid color\n  };\n\n  const defaultColor = 'var(--color-gray-300);';\n\n  const validColor = color && isValidColor(color) ? color : defaultColor;\n\n  const handleAriaLabel = () => {\n    if (outOfStock) return `${groupAriaLabel}: ${label} ${outOfStockLabel}`;\n    if (selected) return `${groupAriaLabel}: ${label} ${selectedLabel}`;\n    return `${groupAriaLabel}: ${label} ${swatchLabel}`;\n  };\n\n  return (\n    <label\n      className={classes([\n        'dropin-color-swatch__container',\n        `dropin-color-swatch__container--${size}`,\n        className,\n      ])}\n    >\n      <input\n        type={multi ? 'checkbox' : 'radio'}\n        name={name}\n        id={id}\n        value={value}\n        aria-label={handleAriaLabel()}\n        checked={selected}\n        disabled={disabled}\n        onChange={handleOnValue}\n        {...props}\n        className={classes([\n          'dropin-color-swatch',\n          ['dropin-color-swatch--selected', selected],\n          ['dropin-color-swatch--disabled', disabled],\n          className,\n        ])}\n      />\n      <span\n        style={{ '--bg-color': validColor }}\n        className={classes([\n          'dropin-color-swatch__span',\n          ['dropin-color-swatch__span--out-of-stock', outOfStock],\n          className,\n        ])}\n      />\n    </label>\n  );\n};\n","import { FunctionComponent } from 'preact';\nimport {\n  HTMLAttributes,\n  useState,\n  useEffect,\n  useRef,\n  useCallback,\n} from 'preact/compat';\nimport { classes } from '@adobe/elsie/lib';\nimport '@adobe/elsie/components/TextSwatch/TextSwatch.css';\nimport { useText } from '@adobe/elsie/i18n';\n\nexport interface TextSwatchProps\n  extends Omit<HTMLAttributes<HTMLInputElement>, 'label'> {\n  name?: string;\n  label: string;\n  groupAriaLabel?: string;\n  value?: string;\n  id: string;\n  disabled?: boolean;\n  selected?: boolean;\n  outOfStock?: boolean;\n  multi?: boolean;\n  onValue?: (value: any) => void;\n  onUpdateError?: (error: Error) => void;\n}\n\nexport const TextSwatch: FunctionComponent<TextSwatchProps> = ({\n  className,\n  name,\n  value,\n  label,\n  groupAriaLabel,\n  id,\n  disabled = false,\n  selected = false,\n  outOfStock = false,\n  multi = false,\n  onValue,\n  onUpdateError,\n  ...props\n}) => {\n  // i18n\n  const outOfStockLabel = useText('Dropin.Swatches.outOfStock.label').label;\n  const selectedLabel = useText('Dropin.Swatches.selected.label').label;\n  const swatchLabel = useText('Dropin.Swatches.swatch.label').label;\n\n  const [isOverflowing, setIsOverflowing] = useState(false);\n  const spanRef = useRef<HTMLLabelElement>(null);\n\n  const onValueHandler = useCallback(\n    async (newValue: any) => {\n      if (onValue) {\n        try {\n          await onValue(newValue);\n        } catch (e) {\n          if (onUpdateError) {\n            onUpdateError(e as Error);\n          }\n        }\n      }\n    },\n    [onValue, onUpdateError]\n  );\n\n  const handleOnValue = (e: Event) => {\n    const input = e.target as HTMLInputElement;\n\n    onValueHandler(input.value);\n  };\n\n  const handleAriaLabel = () => {\n    if (outOfStock) return `${groupAriaLabel}: ${label} ${outOfStockLabel}`;\n    if (selected) return `${groupAriaLabel}: ${label} ${selectedLabel}`;\n    return `${groupAriaLabel}: ${label} ${swatchLabel}`;\n  };\n\n  useEffect(() => {\n    if (\n      spanRef.current &&\n      spanRef.current.scrollWidth > spanRef.current.clientWidth\n    ) {\n      setIsOverflowing(true);\n    }\n  }, [label]);\n\n  return (\n    <div\n      className=\"dropin-text-swatch__container\"\n      {...(isOverflowing ? { 'data-tooltip': label } : {})}\n    >\n      <input\n        type={multi ? 'checkbox' : 'radio'}\n        name={name}\n        id={id}\n        value={value}\n        aria-label={handleAriaLabel()}\n        checked={selected}\n        disabled={disabled}\n        onChange={handleOnValue}\n        {...props}\n        className={classes([\n          'dropin-text-swatch',\n          ['dropin-text-swatch--selected', selected],\n          ['dropin-text-swatch--disabled', disabled],\n          className,\n        ])}\n      />\n      <label\n        htmlFor={id}\n        ref={spanRef}\n        className={classes([\n          'dropin-text-swatch__label',\n          ['dropin-text-swatch__label--out-of-stock', outOfStock],\n          className,\n        ])}\n      >\n        {label}\n      </label>\n    </div>\n  );\n};\n","import { FunctionComponent } from 'preact';\nimport { HTMLAttributes, useCallback } from 'preact/compat';\nimport { classes } from '@adobe/elsie/lib';\nimport '@adobe/elsie/components/ImageSwatch/ImageSwatch.css';\nimport { Image } from '@adobe/elsie/components/Image';\nimport { useText } from '@adobe/elsie/i18n';\n\nexport interface ImageSwatchProps\n  extends Omit<HTMLAttributes<HTMLInputElement>, 'label'> {\n  name?: string;\n  label?: string;\n  groupAriaLabel?: string;\n  id?: string;\n  src: string;\n  alt?: string;\n  value?: string;\n  disabled?: boolean;\n  selected?: boolean;\n  outOfStock?: boolean;\n  multi?: boolean;\n  onValue?: (value: any) => void;\n  onUpdateError?: (error: Error) => void;\n}\n\nexport const ImageSwatch: FunctionComponent<ImageSwatchProps> = ({\n  className,\n  name,\n  value,\n  id,\n  label,\n  groupAriaLabel,\n  src,\n  alt,\n  disabled = false,\n  selected = false,\n  outOfStock = false,\n  multi = false,\n  onValue,\n  onUpdateError,\n  ...props\n}) => {\n  const outOfStockLabel = useText('Dropin.Swatches.outOfStock.label').label;\n  const selectedLabel = useText('Dropin.Swatches.selected.label').label;\n  const swatchLabel = useText('Dropin.Swatches.swatch.label').label;\n\n  const onValueHandler = useCallback(\n    async (newValue: any) => {\n      if (onValue) {\n        try {\n          await onValue(newValue);\n        } catch (e) {\n          if (onUpdateError) {\n            onUpdateError(e as Error);\n          }\n        }\n      }\n    },\n    [onValue, onUpdateError]\n  );\n\n  const handleOnValue = (e: Event) => {\n    const input = e.target as HTMLInputElement;\n\n    onValueHandler(input.value);\n  };\n\n  const handleAriaLabel = () => {\n    if (outOfStock) return `${groupAriaLabel}: ${label} ${outOfStockLabel}`;\n    if (selected) return `${groupAriaLabel}: ${label} ${selectedLabel}`;\n    return `${groupAriaLabel}: ${label} ${swatchLabel}`;\n  };\n\n  return (\n    <label className={classes(['dropin-image-swatch__container', className])}>\n      <input\n        type={multi ? 'checkbox' : 'radio'}\n        name={name}\n        id={id}\n        value={value}\n        aria-label={handleAriaLabel()}\n        checked={selected}\n        disabled={disabled}\n        onChange={handleOnValue}\n        {...props}\n        className={classes([\n          'dropin-image-swatch',\n          ['dropin-image-swatch--selected', selected],\n          ['dropin-image-swatch--disabled', disabled],\n          className,\n        ])}\n      />\n\n      <span\n        className={classes([\n          'dropin-image-swatch__span',\n          ['dropin-image-swatch__span--out-of-stock', outOfStock],\n          className,\n        ])}\n      >\n        <Image\n          src={src}\n          className={classes(['dropin-image-swatch__content'])}\n          params={{ width: 100, fit: 'bounds', crop: true }}\n          alt={alt}\n          loading={'lazy'}\n          onError={(e: any) => (e.target.style.display = 'none')}\n        />\n      </span>\n    </label>\n  );\n};\n","import { HTMLAttributes } from 'preact/compat';\nimport { FunctionComponent, VNode } from 'preact';\nimport { VComponent, classes } from '@adobe/elsie/lib';\nimport '@adobe/elsie/components/Breadcrumbs/Breadcrumbs.css';\n\nexport interface BreadcrumbsProps extends HTMLAttributes<HTMLElement> {\n  categories: VNode[];\n  separator?: VNode<HTMLAttributes<SVGSVGElement>>;\n}\n\nexport const Breadcrumbs: FunctionComponent<BreadcrumbsProps> = ({\n  className,\n  categories,\n  separator,\n  ...props\n}) => {\n  return (\n    <>\n      {categories?.length > 1 && (\n        <nav\n          role=\"navigation\"\n          {...props}\n          className={classes(['dropin-breadcrumbs__container', className])}\n        >\n          <ul className=\"dropin-breadcrumbs__items\">\n            {categories?.map((category: VNode, index: number) => {\n              return (\n                <li\n                  key={index}\n                  className={classes([\n                    'dropin-breadcrumbs__item',\n                    [\n                      'dropin-breadcrumbs__item--last',\n                      index === categories.length - 1,\n                    ],\n                  ])}\n                >\n                  <VComponent\n                    node={category}\n                    className=\"dropin-breadcrumbs__link\"\n                  />\n                  {!separator && index !== categories.length - 1 && (\n                    <span className=\"dropin-breadcrumbs__separator--default\">\n                      {' '}\n                      /{' '}\n                    </span>\n                  )}\n                  {separator && index !== categories.length - 1 && (\n                    <VComponent\n                      node={separator}\n                      className=\"dropin-breadcrumbs__separator--icon\"\n                    />\n                  )}\n                </li>\n              );\n            })}\n          </ul>\n        </nav>\n      )}\n    </>\n  );\n};\n","import { FunctionComponent, VNode } from 'preact';\nimport {\n  HTMLAttributes,\n  Children,\n  useState,\n  useRef,\n  useEffect,\n  useMemo,\n  useCallback,\n} from 'preact/compat';\nimport { classes, debounce } from '@adobe/elsie/lib';\nimport { Button, Icon } from '@adobe/elsie/components';\nimport { ChevronDown } from '@adobe/elsie/icons';\nimport { useText } from '@adobe/elsie/i18n';\n\nimport '@/pdp/components/Carousel/Carousel.css';\n\ntype Show = number;\n\nexport interface CarouselProps extends Omit<HTMLAttributes<HTMLDivElement>, 'controls'> {\n  children: VNode[] | VNode;\n  thumbnails?: VNode[] | VNode;\n  show?: Show | { small: Show; medium: Show; large: Show };\n  gap?: 'small' | 'medium' | 'large' | null;\n  scrollbar?: boolean;\n  peak?: boolean;\n  arrows?: boolean;\n  controls?: 'thumbnailsRow' | 'thumbnailsColumn' | 'dots' | null;\n  arrowsOnMainImage?: boolean;\n  loop?: boolean;\n  direction?: 'horizontal';\n  style?: Record<string, string | number>;\n  width?: string;\n  height?: string;\n  defaultIndex?: number;\n  infinite?: boolean;\n  isZoomed?: boolean;\n}\n\nexport const Carousel: FunctionComponent<CarouselProps> = ({\n  show = 1,\n  scrollbar = false,\n  peak = false,\n  arrows = false,\n  controls = 'dots',\n  arrowsOnMainImage = false,\n  loop = false,\n  gap = null,\n  direction = 'horizontal',\n  width = '100%',\n  height = '100%',\n  defaultIndex = 0,\n  className,\n  children,\n  thumbnails = null,\n  isZoomed,\n  ...props\n}) => {\n  // i18n\n  const Label = useText('PDP.Carousel.label').label;\n  const SlideLabel = useText('PDP.Carousel.Slide.label').label;\n  const PreviousLabel = useText('PDP.Carousel.Previous.label').label;\n  const NextLabel = useText('PDP.Carousel.Next.label').label;\n  const ControlsLabel = useText('PDP.Carousel.Controls.label').label;\n  const ControlsBtnLabel = useText('PDP.Carousel.Controls.Button.label').label;\n\n  // States\n  const [perPage, setPerPage] = useState(() => getPerPageFromBreakpoint(show));\n\n  // Constants\n  const length = Math.ceil(Children.toArray(children).length / perPage);\n  const gapSizes = { small: 16, medium: 24, large: 64 };\n  const peakWidth = peak ? 24 : 0;\n  const gapWidth = gap ? gapSizes[gap] : 0;\n  const rest = Children.toArray(children).length % perPage;\n  const thumbGap = 16;\n  const thumbSeen = 2;\n  const iconSize = '32';\n\n  // States\n  const [current, setCurrent] = useState(\n    loop ? defaultIndex + 1 : defaultIndex\n  );\n\n  // Thumbnails\n  const thumbnailsRefs = useRef<HTMLLabelElement[]>([]);\n  const [thumbWidth, setThumbWidth] = useState(0);\n  const [thumbHeight, setThumbHeight] = useState(0);\n  \n  const thumbnailSlides = useMemo<VNode[]>(() => {\n    return Children.toArray(thumbnails);\n  }, [thumbnails]);\n\n  // Slides\n  const slides = useMemo<VNode[][]>(() => {\n    const returnValue = Children.toArray(children).reduce((acc, child, i) => {\n      if (i % perPage === 0) {\n        return [...acc, [child]];\n      }\n\n      return [...acc.slice(0, -1), [...acc[acc.length - 1], child]];\n    }, [] as VNode[][]);\n\n    if (!loop || returnValue.length === 1) {\n      return returnValue;\n    }\n\n    if (loop && !(Children.toArray(children).length % perPage !== 0)) {\n      return [returnValue[length - 1]]\n        .concat(returnValue)\n        .concat([returnValue[0], returnValue[1]]);\n    }\n\n    return [Children.toArray(children).slice(-perPage)]\n      .concat(returnValue)\n      .concat([returnValue[0], returnValue[1]]);\n  }, [children, perPage, length, loop]);\n\n  // Wrapper\n  const wrapperRef = useRef<HTMLDivElement>(null);\n  const thumbnailsWrapperRef = useRef<HTMLDivElement>(null);\n  const thumbnailControls = controls === 'thumbnailsRow' || controls === 'thumbnailsColumn';\n\n  // Observe Window Resize (responsive)\n  useEffect(() => {\n    const wrapper = document.body;\n\n    const handleResize = debounce(() => {\n      setThumbWidth(wrapperRef.current?.offsetWidth ?? 0)\n      setThumbHeight(wrapperRef.current?.offsetHeight ?? 0)\n      const width = window.innerWidth;\n      const newPerPage = getPerPageFromBreakpoint(show, width);\n\n      if (newPerPage !== perPage) {\n        setPerPage(newPerPage);\n      }\n    }, 50);\n\n    const observer = new ResizeObserver(handleResize);\n    observer.observe(wrapper);\n\n    return () => {\n      observer.unobserve(wrapper);\n    };\n  }, [perPage, show]);\n\n  // Scrolling logic controls\n  const handleThumbnailsScroll = useCallback((nextSlideIndex: number) => {\n    const nextItem = loop ? nextSlideIndex - 1 : nextSlideIndex;\n    const thumbnailRef = thumbnailsRefs?.current[0];\n    const oneItemWidth = thumbnailRef?.offsetWidth + thumbGap;\n    const oneItemHeight = thumbnailRef?.offsetHeight + thumbGap;\n    const thumbnailsWrapper = thumbnailsWrapperRef.current!;\n\n    if (controls === 'thumbnailsRow' && thumbnailsWrapper?.offsetWidth) {\n      if (oneItemWidth * (nextItem + 1) > thumbnailsWrapper.offsetWidth) {\n        thumbnailsWrapper.style.scrollBehavior = 'smooth';\n        thumbnailsWrapper.scrollLeft = (nextItem + thumbSeen) * oneItemWidth;\n      }\n\n      if (thumbnailsWrapper.scrollLeft > oneItemWidth * nextItem) {\n        thumbnailsWrapper.style.scrollBehavior = 'smooth';\n        thumbnailsWrapper.scrollLeft = (nextItem - thumbSeen) * oneItemWidth;\n      }\n    }\n\n    if (controls === 'thumbnailsColumn' && thumbnailsWrapper?.offsetHeight) {\n      if (oneItemHeight * (nextItem + 1) > thumbnailsWrapper.offsetHeight) {\n        thumbnailsWrapper.style.scrollBehavior = 'smooth';\n        thumbnailsWrapper.scrollTop = (nextItem + thumbSeen) * oneItemHeight;\n      }\n\n      if (thumbnailsWrapper.scrollTop > oneItemHeight * nextItem) {\n        thumbnailsWrapper.style.scrollBehavior = 'smooth';\n        thumbnailsWrapper.scrollTop = (nextItem - thumbSeen) * oneItemHeight;\n      }\n    }\n  }, [controls, loop]);\n\n  // Navigation\n  const handleScrollTo = useCallback(\n    (nextSlideIndex: number, smooth?: boolean, reset?: boolean) => {\n      if (controls === 'thumbnailsRow' || controls === 'thumbnailsColumn') {\n        handleThumbnailsScroll(nextSlideIndex);\n      }\n\n      const wrapper = wrapperRef.current!;\n      const realWidth = peakWidth\n        ? wrapper.offsetWidth - peakWidth\n        : wrapper.offsetWidth - peakWidth + gapWidth;\n\n      const items = Array.from(wrapper.querySelectorAll('[data-index]')).filter(\n        (element) => {\n          const dataIndex = Number(element.getAttribute('data-index')!);\n          return !isNaN(dataIndex) && dataIndex > -1;\n        }\n      );\n\n      const item = items[nextSlideIndex];\n\n      if (!item) {\n        return;\n      }\n\n      if (reset) {\n        const futureIndex = nextSlideIndex === 0 ? length : 0;\n        const scrollWidth =\n          realWidth * (length + (rest ? rest : perPage) / perPage);\n\n        if (wrapper.scrollLeft >= 0 && wrapper.scrollLeft < realWidth - 5) {\n          handleScrollTo(1, true);\n          return;\n        }\n\n        if (\n          wrapper.scrollLeft > scrollWidth - realWidth &&\n          wrapper.scrollLeft <= scrollWidth\n        ) {\n          handleScrollTo(length, true);\n          return;\n        }\n\n        wrapper.style.scrollBehavior = 'auto';\n        wrapper.scrollLeft = futureIndex === 0 ? 0 : scrollWidth;\n        handleScrollTo(futureIndex === 0 ? 1 : length, true);\n        return;\n      }\n\n      const diff =\n        ((wrapper.offsetWidth - gapWidth) / perPage) *\n        slides[nextSlideIndex].length -\n        peakWidth;\n\n      wrapper.style.scrollBehavior = smooth ? 'smooth' : 'auto';\n      wrapper.scrollLeft =\n        slides[nextSlideIndex].length === perPage\n          ? realWidth * nextSlideIndex\n          : realWidth * (nextSlideIndex - 1) + diff;\n      return;\n    },\n    [gapWidth, length, peakWidth, perPage, rest, slides, handleThumbnailsScroll, controls]\n  );\n\n  const handleGoToPrev = useCallback(() => {\n    if (loop) {\n      const nextSlideIndex = current - 1;\n      handleScrollTo(nextSlideIndex, true, current === 1);\n      return;\n    }\n\n    const nextSlideIndex = current <= 0 ? 0 : current - 1;\n\n    handleScrollTo(nextSlideIndex, true);\n  }, [current, handleScrollTo, loop]);\n\n  const handleGoToNext = useCallback(() => {\n    const lastSlideIndex = slides.length - 1;\n\n    if (loop) {\n      const nextSlideIndex = current + 1;\n      handleScrollTo(nextSlideIndex, true, current === length);\n      return;\n    }\n\n    const nextSlideIndex =\n      current >= lastSlideIndex ? lastSlideIndex : current + 1;\n\n    handleScrollTo(nextSlideIndex, true);\n  }, [slides.length, loop, current, handleScrollTo, length]);\n\n  // Navigate with keyboard\n  useEffect(() => {\n    const handleKeyDown = (event: KeyboardEvent) => {\n      if (event.key === 'ArrowLeft') {\n        event.preventDefault();\n        handleGoToPrev();\n      }\n\n      if (event.key === 'ArrowRight') {\n        event.preventDefault();\n        handleGoToNext();\n      }\n    };\n\n    window.addEventListener('keydown', handleKeyDown);\n\n    return () => {\n      window.removeEventListener('keydown', handleKeyDown);\n    };\n  }, [handleGoToNext, handleGoToPrev]);\n\n  // Set default index\n  useEffect(() => {\n    handleScrollTo(loop ? defaultIndex + 1 : defaultIndex, false);\n  }, [defaultIndex, handleScrollTo, loop]);\n\n  // Track scrolling (swipes)\n  const handleOnScroll = debounce(() => {\n    const wrapper = wrapperRef.current!;\n    const realWidth = peakWidth\n      ? wrapper.offsetWidth - peakWidth\n      : wrapper.offsetWidth - peakWidth + gapWidth;\n    const dividing = wrapper.scrollLeft / realWidth;\n    const nextSlideIndex = Math.round(dividing) - dividing < 1 ? Math.round(dividing) : Math.ceil(dividing);\n\n    if (thumbnailControls) {\n      handleThumbnailsScroll(nextSlideIndex);\n    }\n\n    if (loop) {\n      const totalWidth =\n        realWidth * (length + (rest ? rest : perPage) / perPage);\n\n      if (Math.ceil(wrapper.scrollLeft) >= Math.ceil(totalWidth) - 5) {\n        wrapper.style.scrollBehavior = 'auto';\n        wrapper.scrollLeft =\n          wrapper.offsetWidth * 1 +\n          (Math.ceil(wrapper.scrollLeft) - Math.ceil(totalWidth) - peakWidth);\n        return;\n      }\n\n      if (wrapper.scrollLeft === 0) {\n        wrapper.style.scrollBehavior = 'auto';\n        wrapper.scrollLeft = totalWidth - wrapper.offsetWidth + peakWidth;\n        return;\n      }\n    }\n\n    if (current !== nextSlideIndex) {\n      setCurrent(nextSlideIndex);\n    }\n  }, 100);\n\n  useEffect(() => {\n    const wrapper = wrapperRef.current;\n    wrapper?.addEventListener('scroll', handleOnScroll);\n\n    return () => {\n      wrapper?.removeEventListener('scroll', handleOnScroll);\n    };\n  }, [handleOnScroll]);\n\n  // thumbnails is column -> container is row reverse, controls is column\n  // thumbnails is row -> container is column, controls is row\n  const getArrow = (forThumbnails: boolean, direction: string, callback: () => void) => {\n    return <Button\n      className={classes([\n        ['pdp-carousel__button', !forThumbnails],\n        [`pdp-carousel__button--${direction}`, !forThumbnails],\n        [`pdp-carousel__button--${controls}`, forThumbnails]\n      ])}\n      style={{\n        '--height': `${thumbHeight}px`,\n      }}\n      variant=\"tertiary\"\n      aria-label={direction === 'next' ? NextLabel : PreviousLabel}\n      onClick={callback}\n      disabled={loop ? false : direction === 'next' ?  current >= slides.length - 1 : current < 1}\n    >\n      <Icon\n        className={classes([\n          ['pdp-carousel__button__icon', !forThumbnails],\n          [`pdp-carousel__button__icon--${direction}`, !forThumbnails],\n          [`pdp-carousel__button__icon--${controls}--${direction}`, forThumbnails]\n        ])}\n        size={iconSize}\n        source={ChevronDown}\n      />\n    </Button>\n  }\n\n  const prevArrow = arrows && slides.length != 1 && getArrow(thumbnailControls, 'prev', handleGoToPrev);\n\n  const nextArrow = arrows && slides.length != 1 && getArrow(thumbnailControls, 'next', handleGoToNext);\n\n  const prevArrowMainImage = arrows && slides.length != 1 && getArrow(false, 'prev', handleGoToPrev);\n  \n  const nextArrowMainImage = arrows && slides.length != 1 && getArrow(false, 'next', handleGoToNext);\n\n  return (\n    <div\n      role=\"region\"\n      aria-roledescription={Label}\n      className={classes([\n        'pdp-carousel',\n        ['pdp-carousel--main-image-controls', arrowsOnMainImage],\n        ['pdp-carousel--arrows', arrows && !thumbnailControls],\n        [`pdp-carousel--${controls}`, thumbnailControls],\n        className,\n      ])}\n      style={{\n        '--flex-carousel': controls === 'thumbnailsColumn' ? 'row-reverse' : 'column',\n        '--gap': thumbnailControls ? '0' : 'var(--spacing-small)',\n        '--width': width,\n      }}\n      {...props}\n    >\n\n      {/* Slideshow */}\n      <div\n        ref={wrapperRef}\n        className={classes([\n          'pdp-carousel__wrapper',\n          `pdp-carousel__wrapper--${direction}`,\n          ['pdp-carousel__wrapper--scrollbar', scrollbar],\n          ['pdp-carousel__wrapper--peak', peak],\n        ])}\n        style={{\n          '--total-width': controls === 'thumbnailsColumn' ? `81.6%` : `100%`,\n          '--height': controls === 'thumbnailsColumn' ? 'auto' : height,\n          '--gap': gap ? `var(--spacing-${gap})` : '0px',\n          '--per-page': perPage,\n        }}\n        tabIndex={0}\n      >\n        {slides.map((page, index) => {\n          const orphan = page.length < perPage;\n\n          return (\n            <div\n              key={index}\n              role=\"group\"\n              aria-roledescription={SlideLabel}\n              data-index={index}\n              className={classes([\n                'pdp-carousel__slide',\n                `pdp-carousel__slide--${direction}`,\n                ['pdp-carousel__slide--active', current === index],\n                ['pdp-carousel__slide--orphan', orphan],\n              ])}\n              style={{\n                '--length': page.length,\n              }}\n            >\n              {page}\n            </div>\n          );\n        })}\n      </div>\n\n      {/* Previous and next arrows for Carousel without thumbnails */}\n      {\n        (!thumbnailControls) && (\n          <>\n            {prevArrow}\n            {nextArrow}\n          </>\n        )\n      }\n\n      {\n        (thumbnailControls && arrowsOnMainImage) && (\n          <>\n            {prevArrowMainImage}\n            {nextArrowMainImage}\n          </>\n        )\n      }\n\n      {/* Controls */}\n      {controls && slides.length != 1 && (\n        <div\n          className={classes([\n            [`pdp-carousel__controls__container--${controls}`, thumbnailControls],\n            ['pdp-carousel__controls__container--no-arrows', !arrows || arrowsOnMainImage],\n          ])}\n          style={{\n            '--width': controls === 'thumbnailsRow' ? `${thumbWidth}px` : width,\n            '--height': `${thumbHeight}px`,\n            '--nr-thumbnails': thumbnailSlides.length,\n          }}\n        >\n          {(thumbnailControls || isZoomed) && !arrowsOnMainImage && prevArrow}\n          <div\n            ref={thumbnailsWrapperRef}\n            className={classes([\n              [`pdp-carousel__controls__wrapper--${controls}`, thumbnailControls],\n              [`pdp-carousel__controls__wrapper`, thumbnailControls],\n            ])}\n          >\n            <div\n              role=\"group\"\n              aria-label={ControlsLabel}\n              className={classes([\n                'pdp-carousel__controls',\n                [`pdp-carousel__controls--${controls}`, thumbnailControls],\n              ])}\n            >\n              {(loop ? slides.slice(0, length) : slides).map((_, key) => {\n                const buttonsLength = loop ? length : slides.length;\n                const active = loop ? current - 1 === key : current === key;\n\n                if (!thumbnailControls) {\n                  return (\n                    <button\n                      key={key}\n                      aria-label={ControlsBtnLabel.replace(\n                        '{key}',\n                        String(key + 1)\n                      ).replace('{total}', String(buttonsLength))}\n                      onClick={() => {\n                        handleScrollTo(loop ? key + 1 : key, true);\n                      }}\n                      className={classes([\n                        'pdp-carousel__controls__button',\n                        ['pdp-carousel__controls__button--active', active],\n                      ])}\n                    />\n                  );\n                }\n                return (\n                  <label\n                    className={classes(['pdp-carousel__thumbnail__container'])}\n                    key={key}\n                    ref={(el: HTMLLabelElement | null) => {\n                      if (el) {\n                        thumbnailsRefs.current[key] = el;\n                      }\n                    }}\n                  >\n                    <input\n                      type=\"radio\"\n                      name={\"carousel-thumbnails\"}\n                      aria-label={ControlsBtnLabel.replace(\n                        '{key}',\n                        String(key + 1)\n                      ).replace('{total}', String(buttonsLength))}\n                      checked={active && thumbWidth !== 0}\n                      onChange={() => {\n                        handleScrollTo(loop ? key + 1 : key, true);\n                      }}\n                      {...props}\n                      className={classes([\n                        'pdp-carousel__thumbnail',\n                        ['pdp-carousel__thumbnail--selected', active && thumbWidth !== 0],\n                      ])}\n                    />\n\n                    <span\n                      className={classes([\n                        'pdp-carousel__thumbnail__span',\n                      ])}\n                    >\n                      {thumbnailSlides[key]}\n                    </span>\n                  </label>\n                )\n              })}\n            </div>\n          </div>\n          {(thumbnailControls || isZoomed) && !arrowsOnMainImage && nextArrow}\n        </div>\n      )}\n    </div>\n  );\n};\n\n// Utilities\nfunction getPerPageFromBreakpoint(\n  breakpoints:\n    | {\n      small: number;\n      medium: number;\n      large: number;\n    }\n    | number,\n  width = 0\n) {\n  if (typeof breakpoints === 'number') return breakpoints;\n\n  const { small, medium, large } = breakpoints;\n  const mediumViewport = 786;\n  const largeVierport = 1024;\n\n  if (width > largeVierport) return large;\n  if (width > mediumViewport) return medium;\n  return small;\n}\n","import { FunctionComponent, VNode } from 'preact';\nimport { HTMLAttributes, useState } from 'preact/compat';\nimport { classes, VComponent } from '@adobe/elsie/lib';\nimport { useText } from '@adobe/elsie/i18n';\n\nimport { Carousel, GalleryGrid, Overlay } from '@/pdp/components';\nimport '@/pdp/components/Product/Product.css';\n\nimport { CarouselConfig } from '@/pdp/containers';\n\ninterface ProductCarouselConfig extends CarouselConfig {\n  thumbnails: VNode[];\n}\n\nexport interface ProductProps\n  extends Omit<HTMLAttributes<HTMLDivElement>, 'title'> {\n  title?: VNode;\n  breadcrumbs?: VNode;\n  galleryContent?: VNode;\n  infoContent?: VNode;\n  productContent?: VNode;\n  shortDescription?: VNode;\n  description?: VNode;\n  attributes?: VNode;\n  images: VNode[];\n  options?: VNode;\n  sku?: VNode;\n  price?: VNode;\n  specialPrice?: VNode;\n  outOfStock: boolean;\n  hideSku?: boolean;\n  actions?: VNode;\n  quantity?: VNode;\n  carouselConfig?: ProductCarouselConfig;\n}\n\nexport const Product: FunctionComponent<ProductProps> = ({\n  title,\n  breadcrumbs,\n  galleryContent,\n  infoContent,\n  productContent,\n  sku,\n  outOfStock,\n  hideSku,\n  shortDescription,\n  description,\n  attributes,\n  images,\n  options,\n  price,\n  specialPrice,\n  className,\n  children,\n  quantity,\n  actions,\n  carouselConfig,\n  ...props\n}) => {\n  // i18n\n  const RegularPriceLabel = useText('PDP.Product.RegularPrice.label').label;\n  const SpecialPriceLabel = useText('PDP.Product.SpecialPrice.label').label;\n  const OutOfStockLabel = useText('PDP.Product.OutOfStock.label').label;\n  const ImagesLabel = useText('PDP.Product.Image.label').label;\n\n  const [zoom, setZoom] = useState<number | null>(null);\n\n  const galleryImages = images?.length ? (\n    images.map((image, key) => (\n      <VComponent\n        key={key}\n        node={image}\n        loading={key === 0 ? 'eager' : 'lazy'}\n        alt={\n          title?.props?.children &&\n          ImagesLabel?.replace('{product}', title.props.children.toString())\n            .replace('{key}', String(key + 1))\n            .replace('{total}', String(images.length))\n        }\n        onClick={() => setZoom(key)}\n      />\n    ))\n  ) : (\n    <img\n      src=\"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7\"\n      className=\"pdp-product__images__placeholder\"\n      aria-hidden\n    />\n  );\n\n  const localThumbnailsImages = carouselConfig?.thumbnails?.length ? (\n    carouselConfig.thumbnails.map((image, key) => (\n      <VComponent\n        key={key}\n        node={image}\n        loading={carouselConfig?.thumbnailsLoadingMode || 'lazy'}\n        alt={\n          title?.props?.children &&\n          ImagesLabel?.replace('{product}', title.props.children.toString())\n            .replace('{key}', String(key + 1))\n            .replace('{total}', String(images.length))}\n      />\n    ))\n  ) : (\n    <img\n      src=\"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7\"\n      className=\"pdp-product__images__placeholder\"\n      aria-hidden\n    />\n  );\n\n  return (\n    <div {...props} className={classes(['pdp-product', className])}>\n      {breadcrumbs && (\n        <VComponent node={breadcrumbs} className=\"pdp-product__breadcrumbs\" />\n      )}\n      <div className=\"pdp-product__column-container pdp-product__gallery-column\">\n        <div className=\"pdp-product__column-body\">\n          {\n            carouselConfig?.controls ?\n              <Carousel\n                className=\"pdp-product__overlay__carousel\"\n                arrows={images?.length > 1}\n                controls={images?.length > 1 ? carouselConfig.controls : 'dots'}\n                arrowsOnMainImage={carouselConfig?.arrowsOnMainImage}\n                loop={carouselConfig?.loopable && images?.length > 1}\n                peak={carouselConfig?.thumbnails?.length > 1 && carouselConfig?.peak?.desktop || false}\n                gap={carouselConfig?.gap || null}\n                width=\"100%\"\n                height=\"100%\"\n                defaultIndex={zoom || 0}\n                thumbnails={localThumbnailsImages}\n              >\n                {galleryImages}\n              </Carousel>\n              :\n              <GalleryGrid className=\"pdp-product__images\" gap=\"small\">\n                {galleryImages}\n              </GalleryGrid>\n          }\n        </div>\n        {galleryContent && (\n          <VComponent\n            node={galleryContent}\n            className=\"pdp-product__gallery-content\"\n          />\n        )}\n      </div>\n\n      <div className=\"pdp-product__column-container pdp-product__content-column\">\n        <div className=\"pdp-product__column-body\">\n          <div className=\"pdp-product__header\">\n            <VComponent\n              node={<h1>{title}</h1>}\n              className=\"pdp-product__title\"\n            />\n\n            {!hideSku && sku && (\n              <VComponent node={sku} className=\"pdp-product__sku\" />\n            )}\n          </div>\n\n          <div className=\"pdp-product__prices\">\n            {specialPrice && (\n              <VComponent\n                node={specialPrice}\n                className={classes(['pdp-product__price-special', 'pdp-product__price'])}\n                aria-label={SpecialPriceLabel}\n                role=\"text\"\n              />\n            )}\n            {price && (\n              <VComponent\n                node={price}\n                className={classes(['pdp-product__price-regular', 'pdp-product__price--grey'])}\n                aria-label={RegularPriceLabel}\n                role=\"text\"\n              />\n            )}\n          </div>\n\n          {/* Small Screen Gallery */}\n          {\n            carouselConfig?.mobile ?\n              <Carousel\n                className=\"pdp-product__images pdp-product__images--carousel pdp-product__images--carousel--thumbnails\"\n                width=\"100%\"\n                height=\"auto\"\n                arrows={images?.length > 1}\n                controls={images?.length > 1 ? 'thumbnailsRow' : null}\n                loop={carouselConfig?.loopable && images?.length > 1}\n                peak={carouselConfig?.thumbnails?.length > 1 && carouselConfig?.peak?.mobile || false}\n                gap={carouselConfig?.gap || null}\n                thumbnails={localThumbnailsImages}\n              >\n                {galleryImages}\n              </Carousel>\n              :\n              <Carousel\n                className=\"pdp-product__images pdp-product__images--carousel\"\n                peak={carouselConfig?.peak?.mobile && images?.length > 1}\n                gap={carouselConfig?.gap || null}\n                width=\"100%\"\n                height=\"auto\"\n                arrows={images?.length > 1}\n                controls={images?.length > 1 ? 'dots' : null}\n                loop={carouselConfig?.loopable && images?.length > 1}\n              >\n                {galleryImages}\n              </Carousel>\n          }\n\n          <div\n            className={classes([\n              'pdp-product__actions',\n              [`pdp-product__actions--out-of-stock`, outOfStock],\n            ])}\n          >\n            {outOfStock && (\n              <div className=\"pdp-product__out-of-stock__text\">\n                {OutOfStockLabel}\n              </div>\n            )}\n\n            {options && (\n              <VComponent\n                node={options}\n                className={classes(['pdp-product__options'])}\n              />\n            )}\n\n            {quantity && (\n              <div className=\"pdp-product__quantity\">\n                <VComponent node={quantity} />\n              </div>\n            )}\n\n            {actions && (\n              <VComponent\n                node={actions}\n                className={classes(['pdp-product__buttons'])}\n              />\n            )}\n          </div>\n\n          {shortDescription && (\n            <VComponent\n              node={shortDescription}\n              className={classes(['pdp-product__short_description'])}\n            />\n          )}\n\n          {description && (\n            <VComponent\n              node={description}\n              className={classes(['pdp-product__description'])}\n            />\n          )}\n\n          {attributes ? (\n            <div className=\"pdp-product__attributes\">{attributes}</div>\n          ) : null}\n        </div>\n        {infoContent && (\n          <VComponent\n            node={infoContent}\n            className=\"pdp-product__info-content\" />\n        )}\n      </div>\n\n      {productContent && (\n        <VComponent\n          node={productContent}\n          className=\"pdp-product__content\"\n        />\n      )}\n\n      {/* Zoom Overlay */}\n      {zoom === null ? null : (\n        <Overlay\n          className=\"pdp-product__overlay\"\n          onClose={() => setZoom(null)}\n          centered\n        >\n          <Carousel\n            className=\"pdp-product__overlay__carousel\"\n            arrows={images?.length > 1}\n            width=\"100%\"\n            height=\"100%\"\n            defaultIndex={zoom || 0}\n            loop={images?.length > 1}\n            controls={images?.length > 1 ? 'dots' : null}\n            isZoomed\n          >\n            {galleryImages}\n          </Carousel>\n        </Overlay>\n      )}\n    </div>\n  );\n};\n","import { FunctionComponent, VNode } from 'preact';\nimport { HTMLAttributes, Children } from 'preact/compat';\nimport { classes, VComponent } from '@adobe/elsie/lib';\nimport '@/pdp/components/GalleryGrid/GalleryGrid.css';\n\nexport interface GalleryGridProps extends HTMLAttributes<HTMLDivElement> {\n  children: VNode[] | VNode;\n  gap?: 'small' | 'medium' | 'large' | null;\n  style?: Record<string, string | number>;\n}\n\nexport const GalleryGrid: FunctionComponent<GalleryGridProps> = ({\n  children,\n  gap = null,\n  className,\n  style,\n  ...props\n}) => {\n  const count = Children.count(children);\n\n  return (\n    <div\n      {...props}\n      className={classes(['pdp-gallery-grid', className])}\n      style={{\n        '--gap': gap ? `var(--spacing-${gap})` : '0px',\n        ...style,\n      }}\n    >\n      {Children.map(\n        children,\n        (child: VNode<HTMLAttributes<HTMLElement>>, key) => (\n          <div key={count + key} className=\"pdp-gallery-grid__item\">\n            <VComponent\n              key={child.props.src}\n              node={child}\n              loading={key === 0 ? 'eager' : 'lazy'}\n            />\n          </div>\n        )\n      )}\n    </div>\n  );\n};\n","/*\nADOBE CONFIDENTIAL\nCopyright 2023 Adobe\nAll Rights Reserved.\nNOTICE: All information contained herein is, and remains\nthe property of Adobe and its suppliers, if any. The intellectual\nand technical concepts contained herein are proprietary to Adobe\nand its suppliers and are protected by all applicable intellectual\nproperty laws, including trade secret and copyright laws.\nDissemination of this information or reproduction of this material\nis strictly forbidden unless prior written permission is obtained\nfrom Adobe.\n*/\n\nimport { HTMLAttributes } from 'preact/compat';\nimport '@/pdp/components/PriceRange/PriceRange.css';\nimport { FunctionalComponent } from 'preact';\nimport { Price } from '@adobe/elsie/components';\n\nexport interface PriceRangeProps extends HTMLAttributes<HTMLDivElement> {\n  locale?: string;\n  variant?: 'default' | 'strikethrough';\n  currency?: string;\n\n  // Simple product\n  amount?: number;\n  sale?: boolean;\n\n  // Complex product (range)\n  minimumAmount?: number;\n  maximumAmount?: number;\n}\n\nexport const PriceRange: FunctionalComponent<PriceRangeProps> = ({\n  amount,\n  currency,\n  locale,\n  variant,\n  sale,\n  minimumAmount,\n  maximumAmount,\n  className,\n  ...props\n}) => {\n  return (\n    <>\n      {amount || minimumAmount === maximumAmount ? (\n        <div className={'pdp-price-range'} {...props}>\n          <Price\n            amount={amount ? amount : minimumAmount}\n            currency={currency}\n            locale={locale}\n            variant={variant}\n            sale={sale}\n            className={className}\n          />\n        </div>\n      ) : (\n        <div className={'pdp-price-range'} {...props}>\n          <Price\n            amount={minimumAmount}\n            currency={currency}\n            locale={locale}\n            className={className}\n          />\n          <span className=\"pdp-price-range__label\">{'-'}</span>\n          <Price\n            amount={maximumAmount}\n            currency={currency}\n            locale={locale}\n            className={className}\n          />\n        </div>\n      )}\n    </>\n  );\n};\n","import { FunctionComponent } from 'preact';\nimport { HTMLAttributes, useCallback, useEffect } from 'preact/compat';\nimport { classes } from '@adobe/elsie/lib';\nimport { useText } from '@adobe/elsie/i18n';\nimport { Close as CloseSVG } from '@adobe/elsie/icons';\nimport { Button } from '@adobe/elsie/components';\n\nimport '@/pdp/components/Overlay/Overlay.css';\n\nexport interface OverlayProps extends HTMLAttributes<HTMLDivElement> {\n  centered?: boolean;\n  onClose?: () => void;\n}\n\nexport const Overlay: FunctionComponent<OverlayProps> = ({\n  centered,\n  onClose,\n  className,\n  children,\n  ...props\n}) => {\n  // i18n\n  const CloseLabel = useText('PDP.Overlay.Close.label').label;\n\n  const handleOnClose = useCallback(() => {\n    onClose?.();\n  }, [onClose]);\n\n  // Close on ESC\n  useEffect(() => {\n    const handleKeyDown = (event: KeyboardEvent) => {\n      if (event.key === 'Escape') {\n        handleOnClose();\n      }\n    };\n\n    document.addEventListener('keydown', handleKeyDown);\n\n    return () => {\n      document.removeEventListener('keydown', handleKeyDown);\n    };\n  }, [handleOnClose]);\n\n  // Prevent document scrolling\n  useEffect(() => {\n    const scrollingElement = document.scrollingElement as HTMLElement;\n\n    const defaultOverflowValue = scrollingElement.style.overflow;\n\n    scrollingElement.style.overflow = 'hidden';\n\n    return () => {\n      scrollingElement.style.overflow = defaultOverflowValue;\n    };\n  }, []);\n\n  return (\n    <div\n      {...props}\n      className={classes([\n        'pdp-overlay',\n        ['pdp-overlay--centered', centered],\n        className,\n      ])}\n    >\n      <div className=\"pdp-overlay__content\">{children}</div>\n\n      <Button\n        aria-label={CloseLabel}\n        variant=\"tertiary\"\n        className=\"pdp-overlay__close-button\"\n        onClick={handleOnClose}\n        icon={<CloseSVG />}\n      />\n    </div>\n  );\n};\n","import { FunctionComponent } from 'preact';\nimport { HTMLAttributes, useState, useMemo, useCallback, useEffect } from 'preact/compat';\nimport { classes } from '@adobe/elsie/lib';\nimport { useText } from '@adobe/elsie/i18n';\nimport { ColorSwatch, ImageSwatch, TextSwatch, Picker, PickerOption } from '@adobe/elsie/components';\n\nimport '@/pdp/components/Swatches/Swatches.css';\n\nconst supportedTypes = ['text', 'image', 'color', 'dropdown'];\n\nconst mapToPickerOptions = (items: OptionValue[]): PickerOption[] => {\n    return items.map((item: OptionValue) => ({ ...item, text: item.label, disabled: !item.inStock, }));\n}\n\ntype OptionValue = {\n  id: string;\n  label: string;\n  inStock: boolean;\n  value: string;\n  selected?: boolean;\n};\n\nexport type Option = {\n    id: string;\n    type: (typeof supportedTypes)[number];\n    label: string;\n    required?: boolean;\n    multiple?: boolean;\n    items: OptionValue[];\n};\n\ntype Selection = { [id: string]: { label: string; value: string } };\n\nexport interface SwatchesProps extends HTMLAttributes<HTMLDivElement> {\n  options: Array<{\n    id: string;\n    type: (typeof supportedTypes)[number];\n    label: string;\n    required?: boolean;\n    multiple?: boolean;\n    items: OptionValue[];\n  }>;\n  hideSelectedValue?: boolean;\n\n  defaultOptions?: string[];\n  selectionsToUpdate?: Option[];\n  onValues?: (uids: Selection, current: string) => void;\n  onErrors?: (errors: { [id: string]: string }) => void;\n}\n\nexport const Swatches: FunctionComponent<SwatchesProps> = ({\n  options,\n  hideSelectedValue,\n  onValues,\n  onErrors,\n  defaultOptions,\n  selectionsToUpdate,\n  className,\n  children,\n  ...props\n}) => {\n  // i18n\n  const RequiredLabel = useText('PDP.Swatches.Required.label').label;\n\n  const [selections, setSelections] = useState<Selection>(() => {\n    const initial = options?.reduce((accum, option) => {\n      const { items } = option;\n      const defaultSelection = items?.find((item) => defaultOptions?.includes(item.id));\n      const selected = items?.find((item) => item.selected);\n      if (defaultSelection) {\n            return {\n                ...accum,\n                [option.id]: { label: defaultSelection.label, value: defaultSelection.id },\n            };\n        } else if (selected) {\n            return {\n                ...accum,\n                [option.id]: { label: selected.label, value: selected.id },\n            };\n        }\n      return accum;\n    }, {} as Selection);\n\n    return initial;\n  });\n\n  // this only applies for the case with anchor options\n  // update selections in the swatches if they are updated in the parent component\n  useEffect(() => {\n    selectionsToUpdate?.forEach((selectionToUpdate) => {\n      setSelections((prev) => {\n        const selectedItem = selectionToUpdate\n          ?.items?.find((item) => item.selected);\n        if (!selectedItem) return prev;\n\n        const next = {\n          ...prev,\n          [selectionToUpdate.id]: {\n            label: selectedItem?.label,\n            value: selectedItem?.id\n          },\n        };\n        return next;\n      });\n    });\n  }, [selectionsToUpdate, setSelections]);\n\n  // Update invalid options\n  useMemo(() => {\n    const errors = options?.reduce((accum, option) => {\n      option?.items?.forEach((item) => {\n        const selected = selections[option.id]?.value === item.id;\n\n        // Validate required\n        if (option.required && !selected) {\n          accum[option.id] = RequiredLabel;\n        }\n      });\n\n      return accum;\n    }, {} as { [id: string]: string });\n\n    // Call the callback\n    onErrors?.(errors);\n\n    return errors;\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [selections]);\n\n  const handleOnSelection = useCallback(\n    (id: string, label: string, optionId: string) => {\n      setSelections((prev) => {\n        const next = {\n          ...prev,\n          [id]: { label, value: optionId },\n        };\n\n        // Call the callback\n        onValues?.(next, optionId);\n\n        // Return the next state\n        return next;\n      });\n    },\n    [onValues]\n  );\n\n  // Function to handle the picker selection\n  const handlePickerSelect = (optionId: string, selection: any ) => {\n    const label = selection.selectedOptions[0]?.label  ?? '';\n    handleOnSelection(optionId, label, selection.value);\n  };\n\n  const Swatches = useCallback(\n    ({ items, id, required, type, selected, label }: any) => {\n      return (\n        <div className={classes(['pdp-swatches__options'])}>\n          {\n          type?.toLowerCase() === 'dropdown' ?\n          <Picker aria-label={label} handleSelect={(event) => handlePickerSelect(id, event.target)} options={mapToPickerOptions(items)} value={selected} />\n          :\n          items?.map((option: any) => {\n            const common = {\n              key: option.id,\n              id: option.id,\n              name: id,\n              value: option.value,\n              label: option.label,\n              groupAriaLabel: label,\n              selected: selected === option.id,\n              outOfStock: !option.inStock,\n              // API may return null, we default to true as all swatches are required.\n              //  we still comply to this in case the api return \"false\".\n              required: required === null ? true : required,\n              onValue: () => {\n                handleOnSelection(id, option.label, option.id);\n              },\n            };\n\n            switch (type) {\n              case 'text':\n                return <TextSwatch {...common} label={option.label} />;\n\n              case 'image':\n                return (\n                  <ImageSwatch\n                    {...common}\n                    src={option.value}\n                    alt={option.label}\n                  />\n                );\n\n              case 'color':\n                return (\n                  <ColorSwatch {...common} size=\"large\" color={option.value} />\n                );\n\n              default:\n                console.warn(`Invalid swatch type ${type}`);\n                return null;\n            }\n          })}\n        </div>\n      );\n    },\n    [handleOnSelection]\n  );\n\n  return (\n    <div {...props} className={classes(['pdp-swatches', className])}>\n      {options?.map(({ type, label, id, multiple, required, items }) => {\n        if (!type) {\n          console.warn(`Bundle product not supported on UI.`);\n          return;\n        }\n\n        // Only render supported types\n        if (!supportedTypes.includes(type)) {\n          console.warn(`Invalid swatch type ${type}`);\n        }\n\n        if (multiple) {\n          console.warn(\n            'Multiple selection swatches are not currently supported.'\n          );\n        }\n\n        return (\n          <div\n            key={`swatch-item-${id}`}\n            id={`swatch-item-${id}`}\n            data-slot-key={`product-swatch--${id}`}\n            className=\"pdp-swatches__field\"\n          >\n            <div className=\"pdp-swatches__field__label\">\n              {selections[id] ? (hideSelectedValue ? `${label}` : `${label}: ${selections[id].label}`) : label}\n            </div>\n\n            <Swatches\n              id={id}\n              type={type}\n              required={required}\n              items={items}\n              label={label} //label referring to the name of the swatchGroup\n              selected={selections[id]?.value}\n            />\n          </div>\n        );\n      })}\n    </div>\n  );\n};\n","import { toLanguageTag } from '@adobe/elsie/lib';\n\nexport function toDateString(value: string, locale = 'en_US') {\n  if (!isDateValid(value)) throw Error('Invalid date string');\n\n  // normalize time to 00:00:00\n  const time = value.split(' ')[1];\n  if (!time) value = `${value} 00:00:00`;\n\n  return new Date(value).toLocaleDateString(toLanguageTag(locale)).toString();\n}\n\nexport function isDateValid(dateString: string) {\n  const acceptedFormats = [\n    /^\\d{4}-\\d{2}-\\d{2}$/, // YYYY-MM-DD\n    /^\\d{1,2}\\/\\d{1,2}\\/\\d{4}$/, // MM/DD/YYYY\n    /^\\d{2}\\/\\d{2}\\/\\d{4}$/, // MM/DD/YYYY\n    /^\\d{4}\\/\\d{2}\\/\\d{2}$/, // YYYY/MM/DD\n    /^\\d{1,2}\\.\\d{1,2}\\.\\d{4}$/, // DD.MM.YYYY\n    /^\\d{4}-\\d{2}-\\d{2} \\d{2}:\\d{2}:\\d{2}$/, // YYYY-MM-DD HH:mm:ss\n  ];\n\n  if (!acceptedFormats.some((format) => format.test(dateString))) return false;\n\n  const date = new Date(dateString);\n  return !isNaN(date.getTime());\n}\n","export function setUrlParams(\n  params: Record<string, string | number | null>\n): void {\n  const urlSearchParams = new URLSearchParams(window.location.search);\n\n  Object.entries(params).forEach(([key, value]) => {\n    if (value === null) {\n      urlSearchParams.delete(key);\n    } else {\n      urlSearchParams.set(key, String(value));\n    }\n  });\n\n  let url = window.location.pathname;\n  url += `?${urlSearchParams.toString()}`;\n  url += window.location.hash;\n\n  window.history.replaceState({}, '', url);\n}\n\nexport function getUrlParams(): Record<string, string> {\n  const urlSearchParams = new URLSearchParams(window.location.search);\n  const params: Record<string, string> = {};\n\n  urlSearchParams.forEach((value, key) => {\n    params[key] = value;\n  });\n\n  return params;\n}\n","import {\n  HTMLAttributes,\n  useEffect,\n  useState,\n  useCallback,\n  useMemo,\n} from 'preact/compat';\n\nimport {\n  Container,\n  toLanguageTag,\n  SlotProps,\n  SlotMethod,\n  Slot,\n  ResolveImageUrlOptions,\n} from '@adobe/elsie/lib';\n\nimport {\n  Button,\n  Icon,\n  ButtonProps,\n  Image,\n  Incrementer,\n  Breadcrumbs,\n} from '@adobe/elsie/components';\nimport { Product, Swatches, PriceRange, Option } from '@/pdp/components';\nimport { config, getProductData, getRefinedProduct } from '@/pdp/api';\nimport { events } from '@adobe/event-bus';\nimport { Lang, useText } from '@adobe/elsie/i18n';\nimport { isDateValid, toDateString } from '@/pdp/lib/date';\nimport { getUrlParams, setUrlParams } from '@/pdp/lib/url-params';\nimport { ProductModel } from '@/pdp/data/models';\n\ntype IconType = keyof typeof import('@adobe/elsie/icons');\n\ntype Values = {\n  sku: string;\n  quantity: number;\n  optionsUIDs?: string[];\n};\n\ntype DefaultSlotContext = {\n  data: ProductModel | null;\n  values: Values;\n  valid: boolean;\n};\n\nexport type CarouselConfig = {\n  mobile?: boolean;\n  controls?: 'thumbnailsRow' | 'thumbnailsColumn' | 'dots' | null;\n  arrowsOnMainImage?: boolean;\n  loopable?: boolean;\n  peak?: {\n    mobile: boolean,\n    desktop: boolean,\n  }\n  gap?: 'small' | 'medium' | 'large' | null;\n  thumbnailsLoadingMode?: 'lazy' | 'eager';\n  imageParams?: ResolveImageUrlOptions,\n  thumbnailParams?: ResolveImageUrlOptions\n};\n\nexport type OptionsConfig = {\n  anchorOptions?: string[];\n};\n\nexport interface ProductDetailsProps extends HTMLAttributes<HTMLDivElement> {\n  sku: string;\n  hideSku?: boolean;\n  productData?: ProductModel;\n  hideQuantity?: boolean;\n  hideShortDescription?: boolean;\n  hideDescription?: boolean;\n  hideAttributes?: boolean;\n  hideURLParams?: boolean;\n  hideSelectedOptionValue?: boolean;\n  slots?: {\n    Title?: SlotProps<DefaultSlotContext>;\n\n    SKU?: SlotProps<DefaultSlotContext>;\n\n    RegularPrice?: SlotProps<DefaultSlotContext>;\n\n    SpecialPrice?: SlotProps<DefaultSlotContext>;\n\n    Options?: SlotProps<DefaultSlotContext>;\n\n    Quantity?: SlotProps<DefaultSlotContext>;\n\n    Actions?: SlotProps<DefaultSlotContext & {\n      appendButton: SlotMethod<\n        Omit<ButtonProps, 'icon'> & {\n          text?: string;\n          icon?: IconType;\n        }\n      >;\n    }>;\n\n    ShortDescription?: SlotProps<DefaultSlotContext>;\n\n    Description?: SlotProps<DefaultSlotContext>;\n\n    Attributes?: SlotProps<DefaultSlotContext>;\n\n    Breadcrumbs?: SlotProps<DefaultSlotContext & {\n      setSeparator: SlotMethod<IconType>;\n\n      appendLink: SlotMethod<\n        HTMLAttributes<HTMLAnchorElement> & { text?: string }\n      >;\n\n      appendHTMLElement: SlotMethod<HTMLElement>;\n    }>;\n\n    GalleryContent?: SlotProps<DefaultSlotContext>;\n\n    InfoContent?: SlotProps<DefaultSlotContext>;\n\n    Content?: SlotProps<DefaultSlotContext>;\n  };\n  carousel?: CarouselConfig;\n  optionsConfig?: OptionsConfig;\n  onAddToCart?: (values: Values) => void;\n}\n\nexport const ProductDetails: Container<\n  ProductDetailsProps,\n  ProductModel | null\n> = ({\n  sku,\n  hideSku,\n  hideQuantity,\n  hideShortDescription,\n  hideDescription,\n  hideAttributes,\n  hideURLParams,\n  hideSelectedOptionValue,\n  slots,\n  children,\n  initialData,\n  carousel,\n  optionsConfig,\n  onAddToCart,\n  ...props\n}) => {\n  // i18n\n  const AddToCartLabel = useText('PDP.Product.AddToCart.label').label;\n  const IncrementerLabel = useText('PDP.Product.Incrementer.label').label;\n  const DetailsLabel = useText('PDP.Product.Details.label').label;\n\n  // TODO: Investigate if the \"|| 'en-US' \" is really necessary\n  const [locale, setLocale] = useState<Lang>(config.getConfig().defaultLocale as Lang || 'en-US');\n\n  const [selectionsToUpdate, setSelectionsToUpdate] = useState<Option[]>();\n\n  const [data = null, setData] = useState(initialData);\n\n  const [values, setValues] = useState<Values>(() => {\n    const defaultValues: Values = { sku, quantity: 1 };\n\n    if (data?.optionUIDs) {\n      defaultValues.optionsUIDs = data.optionUIDs;\n    }\n    return defaultValues;\n  });\n\n  // the context is invalid for a configurable product that doesn't have all the options selected\n  const [valid, setValid] = useState(() => {\n    return !(\n      data?.options &&\n      data?.options?.length > 0 &&\n      data?.optionUIDs?.length !== data?.options.length\n    );\n  });\n\n  const defaultSlotContext: DefaultSlotContext = { data, values, valid };\n\n  // Locale\n  useEffect(() => {\n    const localeEvent = events.on('locale', (payload: string) => {\n      if (payload === locale) return;\n\n      setLocale(payload as Lang);\n\n      getProductData(sku).then(setData);\n\n      // TODO: need to keep the optionsUIDs when locale changes\n      // if (values?.optionsUIDs) {\n      //   getRefinedProduct(sku, values?.optionsUIDs).then(setData);\n      // } else {\n      //   getProductData(sku).then(setData);\n      // }\n    });\n    return () => {\n      localeEvent?.off();\n    };\n  }, [locale, sku]);\n\n  // Callbacks\n  const handleOnValues = useCallback(\n    (newValues: { [key: string]: string | number }) => {\n      setValues((prev) => ({ ...prev, ...newValues }));\n    },\n    []\n  );\n\n  const handleOptionSelected = useCallback(\n    (selections: { [id: string]: { label: string; value: string } }) => {\n      // options Selected\n      let optionsUIDs = Object.keys(selections)\n        .map((id) => selections[id].value)\n        .filter((element) => element !== undefined);\n\n      // set optionUIDs to URL params\n      // ?optionsUIDs=1,2,3\n      if (!hideURLParams) {\n        setUrlParams({ optionsUIDs: optionsUIDs.join(',') });\n      }\n\n      // update state\n      setValues((prev) => ({ ...prev, optionsUIDs }));\n      setValid(optionsUIDs?.length === data?.options?.length);\n\n      // get refined product data and update state\n      getRefinedProduct(sku, optionsUIDs, optionsConfig?.anchorOptions).then((next) => {\n        setData(next);\n\n        // special processing for anchor options (options that should not be refined when other options are selected)\n        if (optionsConfig?.anchorOptions?.length) {\n          processUpdates(next, optionsUIDs);\n        }\n      });\n    },\n    [sku]\n  );\n\n  const processUpdates = useCallback((next: ProductModel | null, previousOptionsUIDs: string[]) => {\n    const updatedOptionsUIDs = next?.optionUIDs ?? [];\n    const haveSameValues = previousOptionsUIDs.every(item => updatedOptionsUIDs.includes(item));\n    if (!haveSameValues) {\n      setSelectionsToUpdate(next?.options);\n      setValues((prev) => ({ ...prev, optionsUIDs: updatedOptionsUIDs }));\n      setValid(updatedOptionsUIDs?.length === next?.options?.length);\n    }\n  }, [sku]);\n\n  const handleOnErrors = useCallback((_errors: { [id: string]: string }) => {\n    if (Object.keys(_errors).length !== 0) setValid(false);\n  }, []);\n\n  // Product Attributes\n  const attributes = useMemo(() => {\n    return data?.attributes?.map(({ label, value }, key: number) => {\n      const __html = isDateValid(value)\n        ? toDateString(value, locale)\n        : value.toString();\n\n      return (\n        <li key={key}>\n          {/* eslint-disable-next-line react/no-danger */}\n          {label}: <span dangerouslySetInnerHTML={{ __html }} />\n        </li>\n      );\n    });\n  }, [data?.attributes, locale]);\n\n  const quantity =\n    !hideQuantity && data?.inStock ? (\n      <Slot\n        name=\"Quantity\"\n        slot={slots?.Quantity}\n        context={{ ...defaultSlotContext }}\n      >\n        <Incrementer\n          key=\"quantity\"\n          name=\"quantity\"\n          defaultValue={values.quantity.toString()}\n          min={1}\n          aria-label={IncrementerLabel}\n          className=\"pdp-product__quantity\"\n          onValue={(quantity) => {\n            handleOnValues({ quantity: Number(quantity) });\n          }}\n        />\n      </Slot>\n    ) : undefined;\n\n  const renderOptions = () => {\n    if (data?.options) {\n      return (\n        <Slot name=\"Options\" slot={slots?.Options} context={{ ...defaultSlotContext }}>\n          <Swatches\n            options={data.options}\n            defaultOptions={values.optionsUIDs}\n            selectionsToUpdate={selectionsToUpdate}\n            hideSelectedValue={hideSelectedOptionValue}\n            onValues={handleOptionSelected}\n            onErrors={handleOnErrors}\n          />\n        </Slot>\n      );\n    }\n  };\n\n  return (\n    <div {...props}>\n      <Product\n        title={\n          <Slot\n            name=\"Title\"\n            slot={slots?.Title}\n            context={{ ...defaultSlotContext }}\n          >\n            {data?.name}\n          </Slot>\n        }\n        sku={\n          hideSku ? undefined : (\n            <Slot\n              name=\"SKU\"\n              slot={slots?.SKU}\n              context={{ ...defaultSlotContext }}\n            >\n              {data?.sku}\n            </Slot>\n          )\n        }\n        options={renderOptions()}\n        breadcrumbs={\n          slots?.Breadcrumbs && (\n            <Slot\n              name=\"Breadcrumbs\"\n              slot={slots?.Breadcrumbs}\n              context={{\n                ...defaultSlotContext,\n\n                setSeparator(callback) {\n                  this._registerMethod((...attrs) => {\n                    const nextSeparator = callback(...attrs);\n\n                    const separator = nextSeparator && <Icon source={nextSeparator} />;\n\n                    this._setProps((prev: any) => {\n                      return { ...prev, separator };\n                    });\n                  });\n                },\n\n                appendLink(callback) {\n                  this._registerMethod((...attrs) => {\n                    const { text, ...p } = callback(...attrs);\n\n                    const link = <a {...p}>{text}</a>;\n\n                    this._setProps((prev: any) => {\n                      return {\n                        ...prev,\n                        categories: [...(prev.categories || []), link],\n                      };\n                    });\n                  });\n                },\n\n                appendHTMLElement(callback) {\n                  this._registerMethod((...attrs) => {\n                    const domElement = callback(...attrs);\n\n                    const vnode = this._htmlElementToVNode(domElement);\n\n                    this._setProps((prev: any) => {\n                      return {\n                        ...prev,\n                        categories: [...(prev.categories || []), vnode],\n                      };\n                    });\n                  });\n                },\n              }}\n              render={({ separator, categories }) => {\n                return (\n                  <Breadcrumbs separator={separator} categories={categories} />\n                );\n              }}\n            />\n          )\n        }\n        quantity={quantity}\n        actions={\n          <Slot\n            name=\"Actions\"\n            slot={slots?.Actions}\n            context={{\n              ...defaultSlotContext,\n\n              appendButton(callback) {\n                this._registerMethod((...attrs) => {\n                  const _button = callback(...attrs);\n\n                  if (!_button) return;\n\n                  const { text, icon, ...buttonProps } = _button;\n\n                  const button = (\n                    <Button\n                      type=\"button\"\n                      {...buttonProps}\n                      icon={icon && <Icon source={icon} />}\n                    >\n                      {text}\n                    </Button>\n                  );\n\n                  this._setProps((prev: any) => ({\n                    children: [...(prev.children || []), button],\n                  }));\n                });\n              },\n            }}\n          >\n            {\n              // Default Add to Cart button if no slot is provided\n              !slots?.Actions && (\n                <Button\n                  size=\"medium\"\n                  type=\"submit\"\n                  icon={<Icon source=\"Cart\" />}\n                  disabled={!data?.inStock || !valid}\n                  aria-label={AddToCartLabel}\n                  onClick={() => {\n                    return onAddToCart?.(values);\n                  }}\n                >\n                  {AddToCartLabel}\n                </Button>\n              )\n            }\n          </Slot>\n        }\n        shortDescription={\n          !hideShortDescription ? (\n            <Slot\n              name=\"ShortDescription\"\n              slot={slots?.ShortDescription}\n              context={{ ...defaultSlotContext }}\n            >\n              {/* eslint-disable-next-line react/no-danger */}\n              <div dangerouslySetInnerHTML={{ __html: data?.shortDescription ?? '' }} />\n            </Slot>\n          ) : undefined\n        }\n        description={\n          !hideDescription ? (\n            <Slot\n              name=\"Description\"\n              slot={slots?.Description}\n              context={{ ...defaultSlotContext }}\n            >\n              {/* eslint-disable-next-line react/no-danger */}\n              <div dangerouslySetInnerHTML={{ __html: data?.description ?? '' }} />\n            </Slot>\n          ) : undefined\n        }\n        images={\n          data?.images?.map(({ label, url }) => (\n            <Image\n              key={url}\n              title={label}\n              alt={label}\n              src={url}\n              // TODO: change width/height for image aspect ratio\n              // pending https://jira.corp.adobe.com/browse/DATA-5122\n              width={carousel?.imageParams?.width ?? 960}\n              height={carousel?.imageParams?.height ?? 1191}\n              params={carousel?.imageParams ?? { width: 960 }}\n            />\n          )) ?? []\n        }\n        specialPrice={\n          data?.prices?.visible ? (\n            <Slot\n              name=\"SpecialPrice\"\n              slot={slots?.SpecialPrice}\n              context={{ ...defaultSlotContext }}\n            >\n              <PriceRange {...data.prices.final} locale={toLanguageTag(locale)} />\n            </Slot>\n          ) : undefined\n        }\n        price={\n          data?.prices?.visible &&\n          data.prices.regular &&\n          data.prices.final.amount !== data?.prices.regular.amount ? (\n            <Slot\n              name=\"RegularPrice\"\n              slot={slots?.RegularPrice}\n              context={{ ...defaultSlotContext }}\n            >\n              <PriceRange\n                {...data.prices.regular}\n                locale={toLanguageTag(locale)}\n              />\n            </Slot>\n          ) : undefined\n        }\n        carouselConfig={{\n          ...carousel,\n          thumbnails: carousel\n            ? data?.images?.map(({ label, url }) => (\n                <Image\n                  key={url}\n                  title={label}\n                  alt={label}\n                  src={url}\n                  // TODO: change width/height for image aspect ratio\n                  // pending https://jira.corp.adobe.com/browse/DATA-5122\n                  width={carousel?.thumbnailParams?.width ?? 200}\n                  height={carousel?.thumbnailParams?.height ?? 248}\n                  params={carousel?.thumbnailParams ?? { width: 200 }}\n                />\n              )) ?? []\n            : [],\n        }}\n        outOfStock={!data?.inStock}\n        attributes={\n          !hideAttributes ? (\n            <Slot\n              name=\"Attributes\"\n              slot={slots?.Attributes}\n              context={{ ...defaultSlotContext }}\n            >\n              {attributes?.length ? (\n                <>\n                  {DetailsLabel}\n                  <ul>{attributes}</ul>\n                </>\n              ) : null}\n            </Slot>\n          ) : undefined\n        }\n        galleryContent={\n          slots?.GalleryContent && (\n            <Slot\n              name=\"GalleryContent\"\n              slot={slots.GalleryContent}\n              context={{ ...defaultSlotContext }}\n            />\n          )\n        }\n        infoContent={\n          slots?.InfoContent && (\n            <Slot\n              name=\"InfoContent\"\n              slot={slots.InfoContent}\n              context={{ ...defaultSlotContext }}\n            />\n          )\n        }\n        productContent={\n          slots?.Content && (\n            <Slot\n              name=\"Content\"\n              slot={slots.Content}\n              context={{ ...defaultSlotContext }}\n            />\n          )\n        }\n      />\n    </div>\n  );\n};\n\nProductDetails.getInitialData = async function ({ sku, optionsConfig }) {\n  // check if default selections are made\n  const defaultSelections = getUrlParams().optionsUIDs?.split(',') || config?.getConfig()?.models?.ProductDetails?.initialData?.optionsUIDs;\n\n  // if it has selections, refine the product data\n  if (defaultSelections?.length) {\n    return await getRefinedProduct(sku, defaultSelections, optionsConfig?.anchorOptions);\n  }\n\n  // otherwise return the product data\n  return await getProductData(sku);\n};\n"],"file":"containers/ProductDetails.js"}