{"version":3,"mappings":"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","names":["debounce","fn","ms","timeoutId","args","clearTimeout","setTimeout","apply","toLanguageTag","locale","replace","useSlot","context","callback","render","elementRef","useRef","loadedRef","methodsRef","props","_setProps","useState","children","_state","setState","state","useMemo","get","key","set","value","intl","useContext","IntlContext","dictionary","_registerMethod","useCallback","current","push","warn","_htmlElementToVNode","elem","_jsx","tagName","toLowerCase","ref","refElem","appendChild","getSlotElement","element","document","querySelector","prependChild","insertBefore","firstChild","appendSibling","parent","parentNode","nextSibling","prependSibling","onChange","replaceWith","next","vnode","prev","useEffect","error","console","name","forEach","method","JSON","stringify","Slot","slot","slotProps","window","DROPINS","showSlots","sessionStorage","setItem","toString","body","classList","toggle","__vitePreload","getItem","SvgChevronDown","React","SvgClose","Carousel","show","scrollbar","peak","arrows","controls","arrowsOnMainImage","loop","gap","direction","width","height","defaultIndex","className","thumbnails","isZoomed","Label","useText","label","SlideLabel","PreviousLabel","NextLabel","ControlsLabel","ControlsBtnLabel","perPage","setPerPage","getPerPageFromBreakpoint","length","Math","ceil","Children","toArray","gapSizes","small","medium","large","peakWidth","gapWidth","rest","thumbGap","thumbSeen","iconSize","setCurrent","thumbnailsRefs","thumbWidth","setThumbWidth","thumbHeight","setThumbHeight","thumbnailSlides","slides","returnValue","reduce","acc","child","i","slice","concat","wrapperRef","thumbnailsWrapperRef","thumbnailControls","wrapper","handleResize","offsetWidth","offsetHeight","innerWidth","newPerPage","observer","ResizeObserver","observe","unobserve","handleThumbnailsScroll","nextSlideIndex","nextItem","thumbnailRef","oneItemWidth","oneItemHeight","thumbnailsWrapper","style","scrollBehavior","scrollLeft","scrollTop","handleScrollTo","smooth","reset","realWidth","Array","from","querySelectorAll","filter","dataIndex","Number","getAttribute","isNaN","futureIndex","scrollWidth","diff","handleGoToPrev","handleGoToNext","lastSlideIndex","handleKeyDown","event","preventDefault","addEventListener","removeEventListener","handleOnScroll","dividing","round","totalWidth","getArrow","forThumbnails","Button","classes","variant","onClick","disabled","Icon","size","source","ChevronDown","prevArrow","nextArrow","prevArrowMainImage","nextArrowMainImage","_jsxs","role","tabIndex","map","page","index","orphan","_Fragment","_","buttonsLength","active","el","type","String","checked","breakpoints","mediumViewport","Product","title","breadcrumbs","galleryContent","infoContent","productContent","sku","outOfStock","hideSku","shortDescription","description","attributes","images","options","price","specialPrice","quantity","actions","carouselConfig","RegularPriceLabel","SpecialPriceLabel","OutOfStockLabel","ImagesLabel","zoom","setZoom","galleryImages","image","VComponent","node","loading","alt","src","localThumbnailsImages","thumbnailsLoadingMode","loopable","desktop","GalleryGrid","mobile","Overlay","onClose","centered","count","PriceRange","amount","currency","sale","minimumAmount","maximumAmount","Price","CloseLabel","handleOnClose","scrollingElement","defaultOverflowValue","overflow","icon","CloseSVG","supportedTypes","mapToPickerOptions","items","item","text","inStock","Swatches","hideSelectedValue","onValues","onErrors","defaultOptions","selectionsToUpdate","RequiredLabel","selections","setSelections","accum","option","defaultSelection","find","includes","id","selected","selectionToUpdate","selectedItem","errors","required","handleOnSelection","optionId","handlePickerSelect","selection","selectedOptions","Picker","handleSelect","target","common","groupAriaLabel","onValue","TextSwatch","ImageSwatch","ColorSwatch","color","multiple","toDateString","isDateValid","Error","split","Date","toLocaleDateString","dateString","some","format","test","date","getTime","setUrlParams","params","urlSearchParams","URLSearchParams","location","search","entries","delete","url","pathname","hash","history","replaceState","getUrlParams","ProductDetails","hideQuantity","hideShortDescription","hideDescription","hideAttributes","hideURLParams","hideSelectedOptionValue","slots","initialData","carousel","optionsConfig","onAddToCart","AddToCartLabel","IncrementerLabel","DetailsLabel","setLocale","config","getConfig","defaultLocale","setSelectionsToUpdate","data","setData","values","setValues","defaultValues","optionUIDs","optionsUIDs","valid","setValid","defaultSlotContext","localeEvent","events","on","payload","then","off","handleOnValues","newValues","handleOptionSelected","Object","keys","undefined","join","getRefinedProduct","anchorOptions","processUpdates","previousOptionsUIDs","updatedOptionsUIDs","every","handleOnErrors","_errors","__html","dangerouslySetInnerHTML","Quantity","Incrementer","defaultValue","min","renderOptions","Options","Title","SKU","Breadcrumbs","setSeparator","attrs","nextSeparator","separator","appendLink","p","link","categories","appendHTMLElement","domElement","Actions","appendButton","_button","buttonProps","button","ShortDescription","Description","Image","imageParams","prices","visible","SpecialPrice","final","regular","RegularPrice","thumbnailParams","Attributes","GalleryContent","InfoContent","Content","getInitialData","defaultSelections","models","getProductData"],"ignoreList":[],"sources":["../../../ElsieSDK/packages/elsie/src/lib/debounce.ts","../../../ElsieSDK/packages/elsie/src/lib/i18n.ts","../../../ElsieSDK/packages/elsie/src/lib/slot.tsx","../../../ElsieSDK/packages/elsie/src/icons/ChevronDown.svg","../../../ElsieSDK/packages/elsie/src/icons/Close.svg","../../src/components/Carousel/Carousel.tsx","../../src/components/Product/Product.tsx","../../src/components/GalleryGrid/GalleryGrid.tsx","../../src/components/PriceRange/PriceRange.tsx","../../src/components/Overlay/Overlay.tsx","../../src/components/Swatches/Swatches.tsx","../../src/lib/date.ts","../../src/lib/url-params.ts","../../src/containers/ProductDetails/ProductDetails.tsx"],"sourcesContent":["export const debounce = (fn: Function, ms: number) => {\n  let timeoutId: ReturnType<typeof setTimeout>;\n  return function (this: any, ...args: any[]) {\n    clearTimeout(timeoutId);\n    timeoutId = setTimeout(() => fn.apply(this, args), ms);\n  };\n};\n","/**\n * Convert locale from Magento standard to react-intl BCP 47 language tag\n *\n * @param {string} locale - A locale (e.g. `fr_FR`).\n * @returns {string} A BCP 47 language tag (e.g. `fr-FR`).\n */\nexport const toLanguageTag = (locale: string) => {\n  return locale.replace('_', '-');\n};\n","import { RefObject, VNode } from 'preact';\nimport {\n  StateUpdater,\n  useContext,\n  useState,\n  useRef,\n  useEffect,\n  useMemo,\n  useCallback,\n} from 'preact/hooks';\nimport { IntlContext, Lang } from '@adobe/elsie/i18n';\nimport { HTMLAttributes } from 'preact/compat';\n\ntype MutateElement = (elem: HTMLElement) => void;\n\ninterface State {\n  get: (key: string) => void;\n  set: (key: string, value: any) => void;\n}\n\ninterface SlotElement {\n  appendChild: MutateElement;\n  prependChild: MutateElement;\n  appendSibling: MutateElement;\n  prependSibling: MutateElement;\n}\n\ninterface PrivateContext<T> {\n  _setProps: StateUpdater<{}>;\n  _registerMethod: (\n    cb: (next: T & DefaultSlotContext<T>, state: State) => void\n  ) => void;\n  _htmlElementToVNode: (element: HTMLElement) => VNode;\n}\n\ninterface DefaultSlotContext<T> extends PrivateContext<T> {\n  dictionary: Lang;\n  getSlotElement: (key: string) => SlotElement;\n  replaceWith: MutateElement;\n  appendChild: MutateElement;\n  prependChild: MutateElement;\n  appendSibling: MutateElement;\n  prependSibling: MutateElement;\n  onChange: (cb: (next: T & DefaultSlotContext<T>) => void) => void;\n}\n\ntype Context<T> = T & ThisType<DefaultSlotContext<T>>; // NOSONAR\n\nexport type SlotProps<T = any> = (\n  ctx: T & DefaultSlotContext<T>,\n  element: HTMLDivElement | null\n) => void;\n\nexport type SlotMethod<P = any> = (\n  callback: (next: unknown, state: State) => P\n) => void;\n\n// Slot Hook\nexport function useSlot<K, V extends HTMLDivElement>(\n  // @ts-ignore\n  context: Context<K> = {},\n  callback?: SlotProps<K>,\n  render?: Function\n): [RefObject<V>, Record<string, any>] {\n  // HTML Element\n  const elementRef = useRef<V>(null);\n\n  const loadedRef = useRef(false);\n\n  // Methods\n  const methodsRef = useRef<any>([]);\n\n  // Children VNodes\n  const [props, _setProps] = useState<Record<string, any>>({\n    children: [render?.({})],\n  });\n\n  // Attributes\n  const [_state, setState] = useState<any>({});\n\n  const state = useMemo(\n    () => ({\n      get: (key: string) => _state[key],\n      set: (key: string, value: any) => {\n        setState({ ...state, [key]: value });\n      },\n    }),\n    [_state]\n  );\n\n  /** Internationalization */\n  const { intl }: any = useContext(IntlContext);\n\n  // @ts-ignore\n  context.dictionary = intl.dictionary;\n\n  /** Privates */\n  // @ts-ignore\n  context._setProps = _setProps;\n\n  const _registerMethod = useCallback((callback: Function) => {\n    if (typeof callback === 'function') {\n      methodsRef.current.push(callback);\n    } else {\n      console.warn('Skipped: Invalid _registerMethod', callback);\n    }\n  }, []);\n\n  // @ts-ignore\n  context._registerMethod = _registerMethod;\n\n  const _htmlElementToVNode = useCallback((elem: HTMLElement) => {\n    return (\n      <div\n        data-slot-html-element={elem.tagName.toLowerCase()}\n        ref={(refElem) => {\n          refElem?.appendChild(elem);\n        }}\n      />\n    );\n  }, []);\n\n  // @ts-ignore\n  context._htmlElementToVNode = _htmlElementToVNode;\n\n  /** Prebuilt Methods */\n  // @ts-ignore\n  context.getSlotElement = useCallback((key: string) => {\n    const element = document.querySelector(`[data-slot-key=\"${key}\"]`);\n\n    if (!element) return;\n\n    return {\n      appendChild: (elem: HTMLElement) => {\n        element.appendChild(elem);\n      },\n\n      prependChild: (elem: HTMLElement) => {\n        element.insertBefore(elem, element.firstChild);\n      },\n\n      appendSibling: (elem: HTMLElement) => {\n        const parent = element.parentNode;\n        parent?.insertBefore(elem, element.nextSibling);\n      },\n\n      prependSibling: (elem: HTMLElement) => {\n        const parent = element.parentNode;\n        parent?.insertBefore(elem, element);\n      },\n    };\n  }, []);\n\n  // @ts-ignore\n  context.onChange = useCallback((callback: Function) => {\n    methodsRef.current.push(callback);\n  }, []);\n\n  // @ts-ignore\n  context.replaceWith = useCallback(\n    (elem: HTMLElement) => {\n      // @ts-ignore\n      _registerMethod((next) => {\n        // @ts-ignore\n        const children = _htmlElementToVNode(elem);\n\n        next._setProps({ children: [children] });\n      });\n    },\n    [_htmlElementToVNode, _registerMethod]\n  );\n\n  // @ts-ignore\n  context.appendChild = useCallback(\n    (elem: HTMLElement) => {\n      // @ts-ignore\n      _registerMethod((next) => {\n        // @ts-ignore\n        const vnode = _htmlElementToVNode(elem);\n\n        next._setProps((prev: any) => {\n          return {\n            ...prev,\n            children: [...prev.children, vnode],\n          };\n        });\n      });\n    },\n    [_htmlElementToVNode, _registerMethod]\n  );\n\n  // @ts-ignore\n  context.prependChild = useCallback(\n    (elem: HTMLElement) => {\n      // @ts-ignore\n      _registerMethod((next) => {\n        // @ts-ignore\n        const vnode = _htmlElementToVNode(elem);\n\n        next._setProps((prev: any) => {\n          return {\n            ...prev,\n            children: [vnode, ...prev.children],\n          };\n        });\n      });\n    },\n    [_htmlElementToVNode, _registerMethod]\n  );\n\n  // @ts-ignore\n  context.appendSibling = useCallback(\n    (elem: HTMLElement) => {\n      // @ts-ignore\n      _registerMethod(() => {\n        const parent = elementRef.current?.parentNode;\n\n        parent?.insertBefore(elem, elementRef.current?.nextSibling ?? null);\n      });\n    },\n    [_registerMethod]\n  );\n\n  // @ts-ignore\n  context.prependSibling = useCallback(\n    (elem: HTMLElement) => {\n      // @ts-ignore\n      _registerMethod(() => {\n        const parent = elementRef.current?.parentNode;\n\n        parent?.insertBefore(elem, elementRef.current);\n      });\n    },\n    [_registerMethod]\n  );\n\n  // Initialization\n  useEffect(() => {\n    const element = elementRef.current;\n\n    if (!callback || !element) return;\n\n    // Run callback\n    try {\n      callback(context as K & DefaultSlotContext<K>, element);\n    } catch (error) {\n      console.error(`Error in \"${callback.name}\" Slot callback`, error);\n    }\n\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n\n  // Lifecycles\n  useEffect(() => {\n    // Reset\n    _setProps({ children: [render?.(props)] });\n\n    // Run all registered methods\n    methodsRef.current.forEach((method: any) => {\n      method(context, state);\n    });\n\n    // Required to trigger re-render of render method\n    if (render?.name === 'render' && loadedRef.current === false) {\n      loadedRef.current = true;\n    }\n\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [JSON.stringify(context), JSON.stringify(_state), loadedRef.current]);\n\n  return [elementRef, props];\n}\n\n// Slot Component\ninterface SlotPropsComponent<T>\n  extends Omit<HTMLAttributes<HTMLDivElement>, 'slot'> {\n  name: string;\n  slot?: SlotProps<T>;\n  context?: Context<T>;\n  render?: (props: Record<string, any>) => VNode | VNode[];\n}\n\nexport function Slot<T>({\n  name,\n  slot,\n  context,\n  children,\n  render,\n  ...props\n}: Readonly<SlotPropsComponent<T>>) {\n  const [elementRef, slotProps] = useSlot<T, HTMLDivElement>(\n    context,\n    slot,\n    render ?? (() => children)\n  );\n\n  useEffect(() => {\n    if (!name) console.warn('Slot \"name\" is required');\n  }, [name]);\n\n  return (\n    <div {...props} ref={elementRef} data-slot={name}>\n      {slotProps.children}\n    </div>\n  );\n}\n\n// Debugger\n\n// @ts-ignore\nwindow.DROPINS = window.DROPINS || {};\n\n// @ts-ignore\nwindow.DROPINS.showSlots = async (state) => {\n  // cache state in session storage\n  window.sessionStorage.setItem(\n    'dropin-debugger--show-slots',\n    state.toString()\n  );\n\n  document.body.classList.toggle('dropin-debugger--show-slots', state);\n\n  if (state) {\n    try {\n      await import('@adobe/elsie/components/UIProvider/debugger.css');\n    } catch (error) {}\n  }\n};\n\n// @ts-ignore\nwindow.DROPINS.showSlots(\n  window.sessionStorage.getItem('dropin-debugger--show-slots') === 'true'\n);\n","import * as React from \"react\";\nconst SvgChevronDown = (props) => /* @__PURE__ */ React.createElement(\"svg\", { width: 24, height: 24, viewBox: \"0 0 24 24\", fill: \"none\", xmlns: \"http://www.w3.org/2000/svg\", ...props }, /* @__PURE__ */ React.createElement(\"path\", { d: \"M7.74512 9.87701L12.0001 14.132L16.2551 9.87701\", stroke: \"currentColor\", strokeWidth: 1.5, strokeLinecap: \"square\", strokeLinejoin: \"round\" }));\nexport default SvgChevronDown;\n","import * as React from \"react\";\nconst SvgClose = (props) => /* @__PURE__ */ React.createElement(\"svg\", { width: 24, height: 24, viewBox: \"0 0 24 24\", fill: \"none\", xmlns: \"http://www.w3.org/2000/svg\", ...props }, /* @__PURE__ */ React.createElement(\"path\", { vectorEffect: \"non-scaling-stroke\", d: \"M18.3599 5.64001L5.62988 18.37\", stroke: \"currentColor\" }), /* @__PURE__ */ React.createElement(\"path\", { vectorEffect: \"non-scaling-stroke\", d: \"M18.3599 18.37L5.62988 5.64001\", stroke: \"currentColor\" }));\nexport default SvgClose;\n","import { FunctionComponent, VNode } from 'preact';\nimport {\n  HTMLAttributes,\n  Children,\n  useState,\n  useRef,\n  useEffect,\n  useMemo,\n  useCallback,\n} from 'preact/compat';\nimport { classes, debounce } from '@adobe/elsie/lib';\nimport { Button, Icon } from '@adobe/elsie/components';\nimport { ChevronDown } from '@adobe/elsie/icons';\nimport { useText } from '@adobe/elsie/i18n';\n\nimport '@/pdp/components/Carousel/Carousel.css';\n\ntype Show = number;\n\nexport interface CarouselProps extends Omit<HTMLAttributes<HTMLDivElement>, 'controls'> {\n  children: VNode[] | VNode;\n  thumbnails?: VNode[] | VNode;\n  show?: Show | { small: Show; medium: Show; large: Show };\n  gap?: 'small' | 'medium' | 'large' | null;\n  scrollbar?: boolean;\n  peak?: boolean;\n  arrows?: boolean;\n  controls?: 'thumbnailsRow' | 'thumbnailsColumn' | 'dots' | null;\n  arrowsOnMainImage?: boolean;\n  loop?: boolean;\n  direction?: 'horizontal';\n  style?: Record<string, string | number>;\n  width?: string;\n  height?: string;\n  defaultIndex?: number;\n  infinite?: boolean;\n  isZoomed?: boolean;\n}\n\nexport const Carousel: FunctionComponent<CarouselProps> = ({\n  show = 1,\n  scrollbar = false,\n  peak = false,\n  arrows = false,\n  controls = 'dots',\n  arrowsOnMainImage = false,\n  loop = false,\n  gap = null,\n  direction = 'horizontal',\n  width = '100%',\n  height = '100%',\n  defaultIndex = 0,\n  className,\n  children,\n  thumbnails = null,\n  isZoomed,\n  ...props\n}) => {\n  // i18n\n  const Label = useText('PDP.Carousel.label').label;\n  const SlideLabel = useText('PDP.Carousel.Slide.label').label;\n  const PreviousLabel = useText('PDP.Carousel.Previous.label').label;\n  const NextLabel = useText('PDP.Carousel.Next.label').label;\n  const ControlsLabel = useText('PDP.Carousel.Controls.label').label;\n  const ControlsBtnLabel = useText('PDP.Carousel.Controls.Button.label').label;\n\n  // States\n  const [perPage, setPerPage] = useState(() => getPerPageFromBreakpoint(show));\n\n  // Constants\n  const length = Math.ceil(Children.toArray(children).length / perPage);\n  const gapSizes = { small: 16, medium: 24, large: 64 };\n  const peakWidth = peak ? 24 : 0;\n  const gapWidth = gap ? gapSizes[gap] : 0;\n  const rest = Children.toArray(children).length % perPage;\n  const thumbGap = 16;\n  const thumbSeen = 2;\n  const iconSize = '32';\n\n  // States\n  const [current, setCurrent] = useState(\n    loop ? defaultIndex + 1 : defaultIndex\n  );\n\n  // Thumbnails\n  const thumbnailsRefs = useRef<HTMLLabelElement[]>([]);\n  const [thumbWidth, setThumbWidth] = useState(0);\n  const [thumbHeight, setThumbHeight] = useState(0);\n  \n  const thumbnailSlides = useMemo<VNode[]>(() => {\n    return Children.toArray(thumbnails);\n  }, [thumbnails]);\n\n  // Slides\n  const slides = useMemo<VNode[][]>(() => {\n    const returnValue = Children.toArray(children).reduce((acc, child, i) => {\n      if (i % perPage === 0) {\n        return [...acc, [child]];\n      }\n\n      return [...acc.slice(0, -1), [...acc[acc.length - 1], child]];\n    }, [] as VNode[][]);\n\n    if (!loop || returnValue.length === 1) {\n      return returnValue;\n    }\n\n    if (loop && !(Children.toArray(children).length % perPage !== 0)) {\n      return [returnValue[length - 1]]\n        .concat(returnValue)\n        .concat([returnValue[0], returnValue[1]]);\n    }\n\n    return [Children.toArray(children).slice(-perPage)]\n      .concat(returnValue)\n      .concat([returnValue[0], returnValue[1]]);\n  }, [children, perPage, length, loop]);\n\n  // Wrapper\n  const wrapperRef = useRef<HTMLDivElement>(null);\n  const thumbnailsWrapperRef = useRef<HTMLDivElement>(null);\n  const thumbnailControls = controls === 'thumbnailsRow' || controls === 'thumbnailsColumn';\n\n  // Observe Window Resize (responsive)\n  useEffect(() => {\n    const wrapper = document.body;\n\n    const handleResize = debounce(() => {\n      setThumbWidth(wrapperRef.current?.offsetWidth ?? 0)\n      setThumbHeight(wrapperRef.current?.offsetHeight ?? 0)\n      const width = window.innerWidth;\n      const newPerPage = getPerPageFromBreakpoint(show, width);\n\n      if (newPerPage !== perPage) {\n        setPerPage(newPerPage);\n      }\n    }, 50);\n\n    const observer = new ResizeObserver(handleResize);\n    observer.observe(wrapper);\n\n    return () => {\n      observer.unobserve(wrapper);\n    };\n  }, [perPage, show]);\n\n  // Scrolling logic controls\n  const handleThumbnailsScroll = useCallback((nextSlideIndex: number) => {\n    const nextItem = loop ? nextSlideIndex - 1 : nextSlideIndex;\n    const thumbnailRef = thumbnailsRefs?.current[0];\n    const oneItemWidth = thumbnailRef?.offsetWidth + thumbGap;\n    const oneItemHeight = thumbnailRef?.offsetHeight + thumbGap;\n    const thumbnailsWrapper = thumbnailsWrapperRef.current!;\n\n    if (controls === 'thumbnailsRow' && thumbnailsWrapper?.offsetWidth) {\n      if (oneItemWidth * (nextItem + 1) > thumbnailsWrapper.offsetWidth) {\n        thumbnailsWrapper.style.scrollBehavior = 'smooth';\n        thumbnailsWrapper.scrollLeft = (nextItem + thumbSeen) * oneItemWidth;\n      }\n\n      if (thumbnailsWrapper.scrollLeft > oneItemWidth * nextItem) {\n        thumbnailsWrapper.style.scrollBehavior = 'smooth';\n        thumbnailsWrapper.scrollLeft = (nextItem - thumbSeen) * oneItemWidth;\n      }\n    }\n\n    if (controls === 'thumbnailsColumn' && thumbnailsWrapper?.offsetHeight) {\n      if (oneItemHeight * (nextItem + 1) > thumbnailsWrapper.offsetHeight) {\n        thumbnailsWrapper.style.scrollBehavior = 'smooth';\n        thumbnailsWrapper.scrollTop = (nextItem + thumbSeen) * oneItemHeight;\n      }\n\n      if (thumbnailsWrapper.scrollTop > oneItemHeight * nextItem) {\n        thumbnailsWrapper.style.scrollBehavior = 'smooth';\n        thumbnailsWrapper.scrollTop = (nextItem - thumbSeen) * oneItemHeight;\n      }\n    }\n  }, [controls, loop]);\n\n  // Navigation\n  const handleScrollTo = useCallback(\n    (nextSlideIndex: number, smooth?: boolean, reset?: boolean) => {\n      if (controls === 'thumbnailsRow' || controls === 'thumbnailsColumn') {\n        handleThumbnailsScroll(nextSlideIndex);\n      }\n\n      const wrapper = wrapperRef.current!;\n      const realWidth = peakWidth\n        ? wrapper.offsetWidth - peakWidth\n        : wrapper.offsetWidth - peakWidth + gapWidth;\n\n      const items = Array.from(wrapper.querySelectorAll('[data-index]')).filter(\n        (element) => {\n          const dataIndex = Number(element.getAttribute('data-index')!);\n          return !isNaN(dataIndex) && dataIndex > -1;\n        }\n      );\n\n      const item = items[nextSlideIndex];\n\n      if (!item) {\n        return;\n      }\n\n      if (reset) {\n        const futureIndex = nextSlideIndex === 0 ? length : 0;\n        const scrollWidth =\n          realWidth * (length + (rest ? rest : perPage) / perPage);\n\n        if (wrapper.scrollLeft >= 0 && wrapper.scrollLeft < realWidth - 5) {\n          handleScrollTo(1, true);\n          return;\n        }\n\n        if (\n          wrapper.scrollLeft > scrollWidth - realWidth &&\n          wrapper.scrollLeft <= scrollWidth\n        ) {\n          handleScrollTo(length, true);\n          return;\n        }\n\n        wrapper.style.scrollBehavior = 'auto';\n        wrapper.scrollLeft = futureIndex === 0 ? 0 : scrollWidth;\n        handleScrollTo(futureIndex === 0 ? 1 : length, true);\n        return;\n      }\n\n      const diff =\n        ((wrapper.offsetWidth - gapWidth) / perPage) *\n        slides[nextSlideIndex].length -\n        peakWidth;\n\n      wrapper.style.scrollBehavior = smooth ? 'smooth' : 'auto';\n      wrapper.scrollLeft =\n        slides[nextSlideIndex].length === perPage\n          ? realWidth * nextSlideIndex\n          : realWidth * (nextSlideIndex - 1) + diff;\n      return;\n    },\n    [gapWidth, length, peakWidth, perPage, rest, slides, handleThumbnailsScroll, controls]\n  );\n\n  const handleGoToPrev = useCallback(() => {\n    if (loop) {\n      const nextSlideIndex = current - 1;\n      handleScrollTo(nextSlideIndex, true, current === 1);\n      return;\n    }\n\n    const nextSlideIndex = current <= 0 ? 0 : current - 1;\n\n    handleScrollTo(nextSlideIndex, true);\n  }, [current, handleScrollTo, loop]);\n\n  const handleGoToNext = useCallback(() => {\n    const lastSlideIndex = slides.length - 1;\n\n    if (loop) {\n      const nextSlideIndex = current + 1;\n      handleScrollTo(nextSlideIndex, true, current === length);\n      return;\n    }\n\n    const nextSlideIndex =\n      current >= lastSlideIndex ? lastSlideIndex : current + 1;\n\n    handleScrollTo(nextSlideIndex, true);\n  }, [slides.length, loop, current, handleScrollTo, length]);\n\n  // Navigate with keyboard\n  useEffect(() => {\n    const handleKeyDown = (event: KeyboardEvent) => {\n      if (event.key === 'ArrowLeft') {\n        event.preventDefault();\n        handleGoToPrev();\n      }\n\n      if (event.key === 'ArrowRight') {\n        event.preventDefault();\n        handleGoToNext();\n      }\n    };\n\n    window.addEventListener('keydown', handleKeyDown);\n\n    return () => {\n      window.removeEventListener('keydown', handleKeyDown);\n    };\n  }, [handleGoToNext, handleGoToPrev]);\n\n  // Set default index\n  useEffect(() => {\n    handleScrollTo(loop ? defaultIndex + 1 : defaultIndex, false);\n  }, [defaultIndex, handleScrollTo, loop]);\n\n  // Track scrolling (swipes)\n  const handleOnScroll = debounce(() => {\n    const wrapper = wrapperRef.current!;\n    const realWidth = peakWidth\n      ? wrapper.offsetWidth - peakWidth\n      : wrapper.offsetWidth - peakWidth + gapWidth;\n    const dividing = wrapper.scrollLeft / realWidth;\n    const nextSlideIndex = Math.round(dividing) - dividing < 1 ? Math.round(dividing) : Math.ceil(dividing);\n\n    if (thumbnailControls) {\n      handleThumbnailsScroll(nextSlideIndex);\n    }\n\n    if (loop) {\n      const totalWidth =\n        realWidth * (length + (rest ? rest : perPage) / perPage);\n\n      if (Math.ceil(wrapper.scrollLeft) >= Math.ceil(totalWidth) - 5) {\n        wrapper.style.scrollBehavior = 'auto';\n        wrapper.scrollLeft =\n          wrapper.offsetWidth * 1 +\n          (Math.ceil(wrapper.scrollLeft) - Math.ceil(totalWidth) - peakWidth);\n        return;\n      }\n\n      if (wrapper.scrollLeft === 0) {\n        wrapper.style.scrollBehavior = 'auto';\n        wrapper.scrollLeft = totalWidth - wrapper.offsetWidth + peakWidth;\n        return;\n      }\n    }\n\n    if (current !== nextSlideIndex) {\n      setCurrent(nextSlideIndex);\n    }\n  }, 100);\n\n  useEffect(() => {\n    const wrapper = wrapperRef.current;\n    wrapper?.addEventListener('scroll', handleOnScroll);\n\n    return () => {\n      wrapper?.removeEventListener('scroll', handleOnScroll);\n    };\n  }, [handleOnScroll]);\n\n  // thumbnails is column -> container is row reverse, controls is column\n  // thumbnails is row -> container is column, controls is row\n  const getArrow = (forThumbnails: boolean, direction: string, callback: () => void) => {\n    return <Button\n      className={classes([\n        ['pdp-carousel__button', !forThumbnails],\n        [`pdp-carousel__button--${direction}`, !forThumbnails],\n        [`pdp-carousel__button--${controls}`, forThumbnails]\n      ])}\n      style={{\n        '--height': `${thumbHeight}px`,\n      }}\n      variant=\"tertiary\"\n      aria-label={direction === 'next' ? NextLabel : PreviousLabel}\n      onClick={callback}\n      disabled={loop ? false : direction === 'next' ?  current >= slides.length - 1 : current < 1}\n    >\n      <Icon\n        className={classes([\n          ['pdp-carousel__button__icon', !forThumbnails],\n          [`pdp-carousel__button__icon--${direction}`, !forThumbnails],\n          [`pdp-carousel__button__icon--${controls}--${direction}`, forThumbnails]\n        ])}\n        size={iconSize}\n        source={ChevronDown}\n      />\n    </Button>\n  }\n\n  const prevArrow = arrows && slides.length != 1 && getArrow(thumbnailControls, 'prev', handleGoToPrev);\n\n  const nextArrow = arrows && slides.length != 1 && getArrow(thumbnailControls, 'next', handleGoToNext);\n\n  const prevArrowMainImage = arrows && slides.length != 1 && getArrow(false, 'prev', handleGoToPrev);\n  \n  const nextArrowMainImage = arrows && slides.length != 1 && getArrow(false, 'next', handleGoToNext);\n\n  return (\n    <div\n      role=\"region\"\n      aria-roledescription={Label}\n      className={classes([\n        'pdp-carousel',\n        ['pdp-carousel--main-image-controls', arrowsOnMainImage],\n        ['pdp-carousel--arrows', arrows && !thumbnailControls],\n        [`pdp-carousel--${controls}`, thumbnailControls],\n        className,\n      ])}\n      style={{\n        '--flex-carousel': controls === 'thumbnailsColumn' ? 'row-reverse' : 'column',\n        '--gap': thumbnailControls ? '0' : 'var(--spacing-small)',\n        '--width': width,\n      }}\n      {...props}\n    >\n\n      {/* Slideshow */}\n      <div\n        ref={wrapperRef}\n        className={classes([\n          'pdp-carousel__wrapper',\n          `pdp-carousel__wrapper--${direction}`,\n          ['pdp-carousel__wrapper--scrollbar', scrollbar],\n          ['pdp-carousel__wrapper--peak', peak],\n        ])}\n        style={{\n          '--total-width': controls === 'thumbnailsColumn' ? `81.6%` : `100%`,\n          '--height': controls === 'thumbnailsColumn' ? 'auto' : height,\n          '--gap': gap ? `var(--spacing-${gap})` : '0px',\n          '--per-page': perPage,\n        }}\n        tabIndex={0}\n      >\n        {slides.map((page, index) => {\n          const orphan = page.length < perPage;\n\n          return (\n            <div\n              key={index}\n              role=\"group\"\n              aria-roledescription={SlideLabel}\n              data-index={index}\n              className={classes([\n                'pdp-carousel__slide',\n                `pdp-carousel__slide--${direction}`,\n                ['pdp-carousel__slide--active', current === index],\n                ['pdp-carousel__slide--orphan', orphan],\n              ])}\n              style={{\n                '--length': page.length,\n              }}\n            >\n              {page}\n            </div>\n          );\n        })}\n      </div>\n\n      {/* Previous and next arrows for Carousel without thumbnails */}\n      {\n        (!thumbnailControls) && (\n          <>\n            {prevArrow}\n            {nextArrow}\n          </>\n        )\n      }\n\n      {\n        (thumbnailControls && arrowsOnMainImage) && (\n          <>\n            {prevArrowMainImage}\n            {nextArrowMainImage}\n          </>\n        )\n      }\n\n      {/* Controls */}\n      {controls && slides.length != 1 && (\n        <div\n          className={classes([\n            [`pdp-carousel__controls__container--${controls}`, thumbnailControls],\n            ['pdp-carousel__controls__container--no-arrows', !arrows || arrowsOnMainImage],\n          ])}\n          style={{\n            '--width': controls === 'thumbnailsRow' ? `${thumbWidth}px` : width,\n            '--height': `${thumbHeight}px`,\n            '--nr-thumbnails': thumbnailSlides.length,\n          }}\n        >\n          {(thumbnailControls || isZoomed) && !arrowsOnMainImage && prevArrow}\n          <div\n            ref={thumbnailsWrapperRef}\n            className={classes([\n              [`pdp-carousel__controls__wrapper--${controls}`, thumbnailControls],\n              [`pdp-carousel__controls__wrapper`, thumbnailControls],\n            ])}\n          >\n            <div\n              role=\"group\"\n              aria-label={ControlsLabel}\n              className={classes([\n                'pdp-carousel__controls',\n                [`pdp-carousel__controls--${controls}`, thumbnailControls],\n              ])}\n            >\n              {(loop ? slides.slice(0, length) : slides).map((_, key) => {\n                const buttonsLength = loop ? length : slides.length;\n                const active = loop ? current - 1 === key : current === key;\n\n                if (!thumbnailControls) {\n                  return (\n                    <button\n                      key={key}\n                      aria-label={ControlsBtnLabel.replace(\n                        '{key}',\n                        String(key + 1)\n                      ).replace('{total}', String(buttonsLength))}\n                      onClick={() => {\n                        handleScrollTo(loop ? key + 1 : key, true);\n                      }}\n                      className={classes([\n                        'pdp-carousel__controls__button',\n                        ['pdp-carousel__controls__button--active', active],\n                      ])}\n                    />\n                  );\n                }\n                return (\n                  <label\n                    className={classes(['pdp-carousel__thumbnail__container'])}\n                    key={key}\n                    ref={(el: HTMLLabelElement | null) => {\n                      if (el) {\n                        thumbnailsRefs.current[key] = el;\n                      }\n                    }}\n                  >\n                    <input\n                      type=\"radio\"\n                      name={\"carousel-thumbnails\"}\n                      aria-label={ControlsBtnLabel.replace(\n                        '{key}',\n                        String(key + 1)\n                      ).replace('{total}', String(buttonsLength))}\n                      checked={active && thumbWidth !== 0}\n                      onChange={() => {\n                        handleScrollTo(loop ? key + 1 : key, true);\n                      }}\n                      {...props}\n                      className={classes([\n                        'pdp-carousel__thumbnail',\n                        ['pdp-carousel__thumbnail--selected', active && thumbWidth !== 0],\n                      ])}\n                    />\n\n                    <span\n                      className={classes([\n                        'pdp-carousel__thumbnail__span',\n                      ])}\n                    >\n                      {thumbnailSlides[key]}\n                    </span>\n                  </label>\n                )\n              })}\n            </div>\n          </div>\n          {(thumbnailControls || isZoomed) && !arrowsOnMainImage && nextArrow}\n        </div>\n      )}\n    </div>\n  );\n};\n\n// Utilities\nfunction getPerPageFromBreakpoint(\n  breakpoints:\n    | {\n      small: number;\n      medium: number;\n      large: number;\n    }\n    | number,\n  width = 0\n) {\n  if (typeof breakpoints === 'number') return breakpoints;\n\n  const { small, medium, large } = breakpoints;\n  const mediumViewport = 786;\n  const largeVierport = 1024;\n\n  if (width > largeVierport) return large;\n  if (width > mediumViewport) return medium;\n  return small;\n}\n","import { FunctionComponent, VNode } from 'preact';\nimport { HTMLAttributes, useState } from 'preact/compat';\nimport { classes, VComponent } from '@adobe/elsie/lib';\nimport { useText } from '@adobe/elsie/i18n';\n\nimport { Carousel, GalleryGrid, Overlay } from '@/pdp/components';\nimport '@/pdp/components/Product/Product.css';\n\nimport { CarouselConfig } from '@/pdp/containers';\n\ninterface ProductCarouselConfig extends CarouselConfig {\n  thumbnails: VNode[];\n}\n\nexport interface ProductProps\n  extends Omit<HTMLAttributes<HTMLDivElement>, 'title'> {\n  title?: VNode;\n  breadcrumbs?: VNode;\n  galleryContent?: VNode;\n  infoContent?: VNode;\n  productContent?: VNode;\n  shortDescription?: VNode;\n  description?: VNode;\n  attributes?: VNode;\n  images: VNode[];\n  options?: VNode;\n  sku?: VNode;\n  price?: VNode;\n  specialPrice?: VNode;\n  outOfStock: boolean;\n  hideSku?: boolean;\n  actions?: VNode;\n  quantity?: VNode;\n  carouselConfig?: ProductCarouselConfig;\n}\n\nexport const Product: FunctionComponent<ProductProps> = ({\n  title,\n  breadcrumbs,\n  galleryContent,\n  infoContent,\n  productContent,\n  sku,\n  outOfStock,\n  hideSku,\n  shortDescription,\n  description,\n  attributes,\n  images,\n  options,\n  price,\n  specialPrice,\n  className,\n  children,\n  quantity,\n  actions,\n  carouselConfig,\n  ...props\n}) => {\n  // i18n\n  const RegularPriceLabel = useText('PDP.Product.RegularPrice.label').label;\n  const SpecialPriceLabel = useText('PDP.Product.SpecialPrice.label').label;\n  const OutOfStockLabel = useText('PDP.Product.OutOfStock.label').label;\n  const ImagesLabel = useText('PDP.Product.Image.label').label;\n\n  const [zoom, setZoom] = useState<number | null>(null);\n\n  const galleryImages = images?.length ? (\n    images.map((image, key) => (\n      <VComponent\n        key={key}\n        node={image}\n        loading={key === 0 ? 'eager' : 'lazy'}\n        alt={\n          title?.props?.children &&\n          ImagesLabel?.replace('{product}', title.props.children.toString())\n            .replace('{key}', String(key + 1))\n            .replace('{total}', String(images.length))\n        }\n        onClick={() => setZoom(key)}\n      />\n    ))\n  ) : (\n    <img\n      src=\"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7\"\n      className=\"pdp-product__images__placeholder\"\n      aria-hidden\n    />\n  );\n\n  const localThumbnailsImages = carouselConfig?.thumbnails?.length ? (\n    carouselConfig.thumbnails.map((image, key) => (\n      <VComponent\n        key={key}\n        node={image}\n        loading={carouselConfig?.thumbnailsLoadingMode || 'lazy'}\n        alt={\n          title?.props?.children &&\n          ImagesLabel?.replace('{product}', title.props.children.toString())\n            .replace('{key}', String(key + 1))\n            .replace('{total}', String(images.length))}\n      />\n    ))\n  ) : (\n    <img\n      src=\"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7\"\n      className=\"pdp-product__images__placeholder\"\n      aria-hidden\n    />\n  );\n\n  return (\n    <div {...props} className={classes(['pdp-product', className])}>\n      {breadcrumbs && (\n        <VComponent node={breadcrumbs} className=\"pdp-product__breadcrumbs\" />\n      )}\n      <div className=\"pdp-product__column-container pdp-product__gallery-column\">\n        <div className=\"pdp-product__column-body\">\n          {\n            carouselConfig?.controls ?\n              <Carousel\n                className=\"pdp-product__overlay__carousel\"\n                arrows={images?.length > 1}\n                controls={images?.length > 1 ? carouselConfig.controls : 'dots'}\n                arrowsOnMainImage={carouselConfig?.arrowsOnMainImage}\n                loop={carouselConfig?.loopable && images?.length > 1}\n                peak={carouselConfig?.thumbnails?.length > 1 && carouselConfig?.peak?.desktop || false}\n                gap={carouselConfig?.gap || null}\n                width=\"100%\"\n                height=\"100%\"\n                defaultIndex={zoom || 0}\n                thumbnails={localThumbnailsImages}\n              >\n                {galleryImages}\n              </Carousel>\n              :\n              <GalleryGrid className=\"pdp-product__images\" gap=\"small\">\n                {galleryImages}\n              </GalleryGrid>\n          }\n        </div>\n        {galleryContent && (\n          <VComponent\n            node={galleryContent}\n            className=\"pdp-product__gallery-content\"\n          />\n        )}\n      </div>\n\n      <div className=\"pdp-product__column-container pdp-product__content-column\">\n        <div className=\"pdp-product__column-body\">\n          <div className=\"pdp-product__header\">\n            <VComponent\n              node={<h1>{title}</h1>}\n              className=\"pdp-product__title\"\n            />\n\n            {!hideSku && sku && (\n              <VComponent node={sku} className=\"pdp-product__sku\" />\n            )}\n          </div>\n\n          <div className=\"pdp-product__prices\">\n            {specialPrice && (\n              <VComponent\n                node={specialPrice}\n                className={classes(['pdp-product__price-special', 'pdp-product__price'])}\n                aria-label={SpecialPriceLabel}\n                role=\"text\"\n              />\n            )}\n            {price && (\n              <VComponent\n                node={price}\n                className={classes(['pdp-product__price-regular', 'pdp-product__price--grey'])}\n                aria-label={RegularPriceLabel}\n                role=\"text\"\n              />\n            )}\n          </div>\n\n          {/* Small Screen Gallery */}\n          {\n            carouselConfig?.mobile ?\n              <Carousel\n                className=\"pdp-product__images pdp-product__images--carousel pdp-product__images--carousel--thumbnails\"\n                width=\"100%\"\n                height=\"auto\"\n                arrows={images?.length > 1}\n                controls={images?.length > 1 ? 'thumbnailsRow' : null}\n                loop={carouselConfig?.loopable && images?.length > 1}\n                peak={carouselConfig?.thumbnails?.length > 1 && carouselConfig?.peak?.mobile || false}\n                gap={carouselConfig?.gap || null}\n                thumbnails={localThumbnailsImages}\n              >\n                {galleryImages}\n              </Carousel>\n              :\n              <Carousel\n                className=\"pdp-product__images pdp-product__images--carousel\"\n                peak={carouselConfig?.peak?.mobile && images?.length > 1}\n                gap={carouselConfig?.gap || null}\n                width=\"100%\"\n                height=\"auto\"\n                arrows={images?.length > 1}\n                controls={images?.length > 1 ? 'dots' : null}\n                loop={carouselConfig?.loopable && images?.length > 1}\n              >\n                {galleryImages}\n              </Carousel>\n          }\n\n          <div\n            className={classes([\n              'pdp-product__actions',\n              [`pdp-product__actions--out-of-stock`, outOfStock],\n            ])}\n          >\n            {outOfStock && (\n              <div className=\"pdp-product__out-of-stock__text\">\n                {OutOfStockLabel}\n              </div>\n            )}\n\n            {options && (\n              <VComponent\n                node={options}\n                className={classes(['pdp-product__options'])}\n              />\n            )}\n\n            {quantity && (\n              <div className=\"pdp-product__quantity\">\n                <VComponent node={quantity} />\n              </div>\n            )}\n\n            {actions && (\n              <VComponent\n                node={actions}\n                className={classes(['pdp-product__buttons'])}\n              />\n            )}\n          </div>\n\n          {shortDescription && (\n            <VComponent\n              node={shortDescription}\n              className={classes(['pdp-product__short_description'])}\n            />\n          )}\n\n          {description && (\n            <VComponent\n              node={description}\n              className={classes(['pdp-product__description'])}\n            />\n          )}\n\n          {attributes ? (\n            <div className=\"pdp-product__attributes\">{attributes}</div>\n          ) : null}\n        </div>\n        {infoContent && (\n          <VComponent\n            node={infoContent}\n            className=\"pdp-product__info-content\" />\n        )}\n      </div>\n\n      {productContent && (\n        <VComponent\n          node={productContent}\n          className=\"pdp-product__content\"\n        />\n      )}\n\n      {/* Zoom Overlay */}\n      {zoom === null ? null : (\n        <Overlay\n          className=\"pdp-product__overlay\"\n          onClose={() => setZoom(null)}\n          centered\n        >\n          <Carousel\n            className=\"pdp-product__overlay__carousel\"\n            arrows={images?.length > 1}\n            width=\"100%\"\n            height=\"100%\"\n            defaultIndex={zoom || 0}\n            loop={images?.length > 1}\n            controls={images?.length > 1 ? 'dots' : null}\n            isZoomed\n          >\n            {galleryImages}\n          </Carousel>\n        </Overlay>\n      )}\n    </div>\n  );\n};\n","import { FunctionComponent, VNode } from 'preact';\nimport { HTMLAttributes, Children } from 'preact/compat';\nimport { classes, VComponent } from '@adobe/elsie/lib';\nimport '@/pdp/components/GalleryGrid/GalleryGrid.css';\n\nexport interface GalleryGridProps extends HTMLAttributes<HTMLDivElement> {\n  children: VNode[] | VNode;\n  gap?: 'small' | 'medium' | 'large' | null;\n  style?: Record<string, string | number>;\n}\n\nexport const GalleryGrid: FunctionComponent<GalleryGridProps> = ({\n  children,\n  gap = null,\n  className,\n  style,\n  ...props\n}) => {\n  const count = Children.count(children);\n\n  return (\n    <div\n      {...props}\n      className={classes(['pdp-gallery-grid', className])}\n      style={{\n        '--gap': gap ? `var(--spacing-${gap})` : '0px',\n        ...style,\n      }}\n    >\n      {Children.map(\n        children,\n        (child: VNode<HTMLAttributes<HTMLElement>>, key) => (\n          <div key={count + key} className=\"pdp-gallery-grid__item\">\n            <VComponent\n              key={child.props.src}\n              node={child}\n              loading={key === 0 ? 'eager' : 'lazy'}\n            />\n          </div>\n        )\n      )}\n    </div>\n  );\n};\n","/*\nADOBE CONFIDENTIAL\nCopyright 2023 Adobe\nAll Rights Reserved.\nNOTICE: All information contained herein is, and remains\nthe property of Adobe and its suppliers, if any. The intellectual\nand technical concepts contained herein are proprietary to Adobe\nand its suppliers and are protected by all applicable intellectual\nproperty laws, including trade secret and copyright laws.\nDissemination of this information or reproduction of this material\nis strictly forbidden unless prior written permission is obtained\nfrom Adobe.\n*/\n\nimport { HTMLAttributes } from 'preact/compat';\nimport '@/pdp/components/PriceRange/PriceRange.css';\nimport { FunctionalComponent } from 'preact';\nimport { Price } from '@adobe/elsie/components';\n\nexport interface PriceRangeProps extends HTMLAttributes<HTMLDivElement> {\n  locale?: string;\n  variant?: 'default' | 'strikethrough';\n  currency?: string;\n\n  // Simple product\n  amount?: number;\n  sale?: boolean;\n\n  // Complex product (range)\n  minimumAmount?: number;\n  maximumAmount?: number;\n}\n\nexport const PriceRange: FunctionalComponent<PriceRangeProps> = ({\n  amount,\n  currency,\n  locale,\n  variant,\n  sale,\n  minimumAmount,\n  maximumAmount,\n  className,\n  ...props\n}) => {\n  return (\n    <>\n      {amount || minimumAmount === maximumAmount ? (\n        <div className={'pdp-price-range'} {...props}>\n          <Price\n            amount={amount ? amount : minimumAmount}\n            currency={currency}\n            locale={locale}\n            variant={variant}\n            sale={sale}\n            className={className}\n          />\n        </div>\n      ) : (\n        <div className={'pdp-price-range'} {...props}>\n          <Price\n            amount={minimumAmount}\n            currency={currency}\n            locale={locale}\n            className={className}\n          />\n          <span className=\"pdp-price-range__label\">{'-'}</span>\n          <Price\n            amount={maximumAmount}\n            currency={currency}\n            locale={locale}\n            className={className}\n          />\n        </div>\n      )}\n    </>\n  );\n};\n","import { FunctionComponent } from 'preact';\nimport { HTMLAttributes, useCallback, useEffect } from 'preact/compat';\nimport { classes } from '@adobe/elsie/lib';\nimport { useText } from '@adobe/elsie/i18n';\nimport { Close as CloseSVG } from '@adobe/elsie/icons';\nimport { Button } from '@adobe/elsie/components';\n\nimport '@/pdp/components/Overlay/Overlay.css';\n\nexport interface OverlayProps extends HTMLAttributes<HTMLDivElement> {\n  centered?: boolean;\n  onClose?: () => void;\n}\n\nexport const Overlay: FunctionComponent<OverlayProps> = ({\n  centered,\n  onClose,\n  className,\n  children,\n  ...props\n}) => {\n  // i18n\n  const CloseLabel = useText('PDP.Overlay.Close.label').label;\n\n  const handleOnClose = useCallback(() => {\n    onClose?.();\n  }, [onClose]);\n\n  // Close on ESC\n  useEffect(() => {\n    const handleKeyDown = (event: KeyboardEvent) => {\n      if (event.key === 'Escape') {\n        handleOnClose();\n      }\n    };\n\n    document.addEventListener('keydown', handleKeyDown);\n\n    return () => {\n      document.removeEventListener('keydown', handleKeyDown);\n    };\n  }, [handleOnClose]);\n\n  // Prevent document scrolling\n  useEffect(() => {\n    const scrollingElement = document.scrollingElement as HTMLElement;\n\n    const defaultOverflowValue = scrollingElement.style.overflow;\n\n    scrollingElement.style.overflow = 'hidden';\n\n    return () => {\n      scrollingElement.style.overflow = defaultOverflowValue;\n    };\n  }, []);\n\n  return (\n    <div\n      {...props}\n      className={classes([\n        'pdp-overlay',\n        ['pdp-overlay--centered', centered],\n        className,\n      ])}\n    >\n      <div className=\"pdp-overlay__content\">{children}</div>\n\n      <Button\n        aria-label={CloseLabel}\n        variant=\"tertiary\"\n        className=\"pdp-overlay__close-button\"\n        onClick={handleOnClose}\n        icon={<CloseSVG />}\n      />\n    </div>\n  );\n};\n","import { FunctionComponent } from 'preact';\nimport { HTMLAttributes, useState, useMemo, useCallback, useEffect } from 'preact/compat';\nimport { classes } from '@adobe/elsie/lib';\nimport { useText } from '@adobe/elsie/i18n';\nimport { ColorSwatch, ImageSwatch, TextSwatch, Picker, PickerOption } from '@adobe/elsie/components';\n\nimport '@/pdp/components/Swatches/Swatches.css';\n\nconst supportedTypes = ['text', 'image', 'color', 'dropdown'];\n\nconst mapToPickerOptions = (items: OptionValue[]): PickerOption[] => {\n    return items.map((item: OptionValue) => ({ ...item, text: item.label, disabled: !item.inStock, }));\n}\n\ntype OptionValue = {\n  id: string;\n  label: string;\n  inStock: boolean;\n  value: string;\n  selected?: boolean;\n};\n\nexport type Option = {\n    id: string;\n    type: (typeof supportedTypes)[number];\n    label: string;\n    required?: boolean;\n    multiple?: boolean;\n    items: OptionValue[];\n};\n\ntype Selection = { [id: string]: { label: string; value: string } };\n\nexport interface SwatchesProps extends HTMLAttributes<HTMLDivElement> {\n  options: Array<{\n    id: string;\n    type: (typeof supportedTypes)[number];\n    label: string;\n    required?: boolean;\n    multiple?: boolean;\n    items: OptionValue[];\n  }>;\n  hideSelectedValue?: boolean;\n\n  defaultOptions?: string[];\n  selectionsToUpdate?: Option[];\n  onValues?: (uids: Selection, current: string) => void;\n  onErrors?: (errors: { [id: string]: string }) => void;\n}\n\nexport const Swatches: FunctionComponent<SwatchesProps> = ({\n  options,\n  hideSelectedValue,\n  onValues,\n  onErrors,\n  defaultOptions,\n  selectionsToUpdate,\n  className,\n  children,\n  ...props\n}) => {\n  // i18n\n  const RequiredLabel = useText('PDP.Swatches.Required.label').label;\n\n  const [selections, setSelections] = useState<Selection>(() => {\n    const initial = options?.reduce((accum, option) => {\n      const { items } = option;\n      const defaultSelection = items?.find((item) => defaultOptions?.includes(item.id));\n      const selected = items?.find((item) => item.selected);\n      if (defaultSelection) {\n            return {\n                ...accum,\n                [option.id]: { label: defaultSelection.label, value: defaultSelection.id },\n            };\n        } else if (selected) {\n            return {\n                ...accum,\n                [option.id]: { label: selected.label, value: selected.id },\n            };\n        }\n      return accum;\n    }, {} as Selection);\n\n    return initial;\n  });\n\n  // this only applies for the case with anchor options\n  // update selections in the swatches if they are updated in the parent component\n  useEffect(() => {\n    selectionsToUpdate?.forEach((selectionToUpdate) => {\n      setSelections((prev) => {\n        const selectedItem = selectionToUpdate\n          ?.items?.find((item) => item.selected);\n        if (!selectedItem) return prev;\n\n        const next = {\n          ...prev,\n          [selectionToUpdate.id]: {\n            label: selectedItem?.label,\n            value: selectedItem?.id\n          },\n        };\n        return next;\n      });\n    });\n  }, [selectionsToUpdate, setSelections]);\n\n  // Update invalid options\n  useMemo(() => {\n    const errors = options?.reduce((accum, option) => {\n      option?.items?.forEach((item) => {\n        const selected = selections[option.id]?.value === item.id;\n\n        // Validate required\n        if (option.required && !selected) {\n          accum[option.id] = RequiredLabel;\n        }\n      });\n\n      return accum;\n    }, {} as { [id: string]: string });\n\n    // Call the callback\n    onErrors?.(errors);\n\n    return errors;\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [selections]);\n\n  const handleOnSelection = useCallback(\n    (id: string, label: string, optionId: string) => {\n      setSelections((prev) => {\n        const next = {\n          ...prev,\n          [id]: { label, value: optionId },\n        };\n\n        // Call the callback\n        onValues?.(next, optionId);\n\n        // Return the next state\n        return next;\n      });\n    },\n    [onValues]\n  );\n\n  // Function to handle the picker selection\n  const handlePickerSelect = (optionId: string, selection: any ) => {\n    const label = selection.selectedOptions[0]?.label  ?? '';\n    handleOnSelection(optionId, label, selection.value);\n  };\n\n  const Swatches = useCallback(\n    ({ items, id, required, type, selected, label }: any) => {\n      return (\n        <div className={classes(['pdp-swatches__options'])}>\n          {\n          type?.toLowerCase() === 'dropdown' ?\n          <Picker aria-label={label} handleSelect={(event) => handlePickerSelect(id, event.target)} options={mapToPickerOptions(items)} value={selected} />\n          :\n          items?.map((option: any) => {\n            const common = {\n              key: option.id,\n              id: option.id,\n              name: id,\n              value: option.value,\n              label: option.label,\n              groupAriaLabel: label,\n              selected: selected === option.id,\n              outOfStock: !option.inStock,\n              // API may return null, we default to true as all swatches are required.\n              //  we still comply to this in case the api return \"false\".\n              required: required === null ? true : required,\n              onValue: () => {\n                handleOnSelection(id, option.label, option.id);\n              },\n            };\n\n            switch (type) {\n              case 'text':\n                return <TextSwatch {...common} label={option.label} />;\n\n              case 'image':\n                return (\n                  <ImageSwatch\n                    {...common}\n                    src={option.value}\n                    alt={option.label}\n                  />\n                );\n\n              case 'color':\n                return (\n                  <ColorSwatch {...common} size=\"large\" color={option.value} />\n                );\n\n              default:\n                console.warn(`Invalid swatch type ${type}`);\n                return null;\n            }\n          })}\n        </div>\n      );\n    },\n    [handleOnSelection]\n  );\n\n  return (\n    <div {...props} className={classes(['pdp-swatches', className])}>\n      {options?.map(({ type, label, id, multiple, required, items }) => {\n        if (!type) {\n          console.warn(`Bundle product not supported on UI.`);\n          return;\n        }\n\n        // Only render supported types\n        if (!supportedTypes.includes(type)) {\n          console.warn(`Invalid swatch type ${type}`);\n        }\n\n        if (multiple) {\n          console.warn(\n            'Multiple selection swatches are not currently supported.'\n          );\n        }\n\n        return (\n          <div\n            key={`swatch-item-${id}`}\n            id={`swatch-item-${id}`}\n            data-slot-key={`product-swatch--${id}`}\n            className=\"pdp-swatches__field\"\n          >\n            <div className=\"pdp-swatches__field__label\">\n              {selections[id] ? (hideSelectedValue ? `${label}` : `${label}: ${selections[id].label}`) : label}\n            </div>\n\n            <Swatches\n              id={id}\n              type={type}\n              required={required}\n              items={items}\n              label={label} //label referring to the name of the swatchGroup\n              selected={selections[id]?.value}\n            />\n          </div>\n        );\n      })}\n    </div>\n  );\n};\n","import { toLanguageTag } from '@adobe/elsie/lib';\n\nexport function toDateString(value: string, locale = 'en_US') {\n  if (!isDateValid(value)) throw Error('Invalid date string');\n\n  // normalize time to 00:00:00\n  const time = value.split(' ')[1];\n  if (!time) value = `${value} 00:00:00`;\n\n  return new Date(value).toLocaleDateString(toLanguageTag(locale)).toString();\n}\n\nexport function isDateValid(dateString: string) {\n  const acceptedFormats = [\n    /^\\d{4}-\\d{2}-\\d{2}$/, // YYYY-MM-DD\n    /^\\d{1,2}\\/\\d{1,2}\\/\\d{4}$/, // MM/DD/YYYY\n    /^\\d{2}\\/\\d{2}\\/\\d{4}$/, // MM/DD/YYYY\n    /^\\d{4}\\/\\d{2}\\/\\d{2}$/, // YYYY/MM/DD\n    /^\\d{1,2}\\.\\d{1,2}\\.\\d{4}$/, // DD.MM.YYYY\n    /^\\d{4}-\\d{2}-\\d{2} \\d{2}:\\d{2}:\\d{2}$/, // YYYY-MM-DD HH:mm:ss\n  ];\n\n  if (!acceptedFormats.some((format) => format.test(dateString))) return false;\n\n  const date = new Date(dateString);\n  return !isNaN(date.getTime());\n}\n","export function setUrlParams(\n  params: Record<string, string | number | null>\n): void {\n  const urlSearchParams = new URLSearchParams(window.location.search);\n\n  Object.entries(params).forEach(([key, value]) => {\n    if (value === null) {\n      urlSearchParams.delete(key);\n    } else {\n      urlSearchParams.set(key, String(value));\n    }\n  });\n\n  let url = window.location.pathname;\n  url += `?${urlSearchParams.toString()}`;\n  url += window.location.hash;\n\n  window.history.replaceState({}, '', url);\n}\n\nexport function getUrlParams(): Record<string, string> {\n  const urlSearchParams = new URLSearchParams(window.location.search);\n  const params: Record<string, string> = {};\n\n  urlSearchParams.forEach((value, key) => {\n    params[key] = value;\n  });\n\n  return params;\n}\n","import {\n  HTMLAttributes,\n  useEffect,\n  useState,\n  useCallback,\n  useMemo,\n} from 'preact/compat';\n\nimport {\n  Container,\n  toLanguageTag,\n  SlotProps,\n  SlotMethod,\n  Slot,\n  ResolveImageUrlOptions,\n} from '@adobe/elsie/lib';\n\nimport {\n  Button,\n  Icon,\n  ButtonProps,\n  Image,\n  Incrementer,\n  Breadcrumbs,\n} from '@adobe/elsie/components';\nimport { Product, Swatches, PriceRange, Option } from '@/pdp/components';\nimport { config, getProductData, getRefinedProduct } from '@/pdp/api';\nimport { events } from '@adobe/event-bus';\nimport { Lang, useText } from '@adobe/elsie/i18n';\nimport { isDateValid, toDateString } from '@/pdp/lib/date';\nimport { getUrlParams, setUrlParams } from '@/pdp/lib/url-params';\nimport { ProductModel } from '@/pdp/data/models';\n\ntype IconType = keyof typeof import('@adobe/elsie/icons');\n\ntype Values = {\n  sku: string;\n  quantity: number;\n  optionsUIDs?: string[];\n};\n\ntype DefaultSlotContext = {\n  data: ProductModel | null;\n  values: Values;\n  valid: boolean;\n};\n\nexport type CarouselConfig = {\n  mobile?: boolean;\n  controls?: 'thumbnailsRow' | 'thumbnailsColumn' | 'dots' | null;\n  arrowsOnMainImage?: boolean;\n  loopable?: boolean;\n  peak?: {\n    mobile: boolean,\n    desktop: boolean,\n  }\n  gap?: 'small' | 'medium' | 'large' | null;\n  thumbnailsLoadingMode?: 'lazy' | 'eager';\n  imageParams?: ResolveImageUrlOptions,\n  thumbnailParams?: ResolveImageUrlOptions\n};\n\nexport type OptionsConfig = {\n  anchorOptions?: string[];\n};\n\nexport interface ProductDetailsProps extends HTMLAttributes<HTMLDivElement> {\n  sku: string;\n  hideSku?: boolean;\n  productData?: ProductModel;\n  hideQuantity?: boolean;\n  hideShortDescription?: boolean;\n  hideDescription?: boolean;\n  hideAttributes?: boolean;\n  hideURLParams?: boolean;\n  hideSelectedOptionValue?: boolean;\n  slots?: {\n    Title?: SlotProps<DefaultSlotContext>;\n\n    SKU?: SlotProps<DefaultSlotContext>;\n\n    RegularPrice?: SlotProps<DefaultSlotContext>;\n\n    SpecialPrice?: SlotProps<DefaultSlotContext>;\n\n    Options?: SlotProps<DefaultSlotContext>;\n\n    Quantity?: SlotProps<DefaultSlotContext>;\n\n    Actions?: SlotProps<DefaultSlotContext & {\n      appendButton: SlotMethod<\n        Omit<ButtonProps, 'icon'> & {\n          text?: string;\n          icon?: IconType;\n        }\n      >;\n    }>;\n\n    ShortDescription?: SlotProps<DefaultSlotContext>;\n\n    Description?: SlotProps<DefaultSlotContext>;\n\n    Attributes?: SlotProps<DefaultSlotContext>;\n\n    Breadcrumbs?: SlotProps<DefaultSlotContext & {\n      setSeparator: SlotMethod<IconType>;\n\n      appendLink: SlotMethod<\n        HTMLAttributes<HTMLAnchorElement> & { text?: string }\n      >;\n\n      appendHTMLElement: SlotMethod<HTMLElement>;\n    }>;\n\n    GalleryContent?: SlotProps<DefaultSlotContext>;\n\n    InfoContent?: SlotProps<DefaultSlotContext>;\n\n    Content?: SlotProps<DefaultSlotContext>;\n  };\n  carousel?: CarouselConfig;\n  optionsConfig?: OptionsConfig;\n  onAddToCart?: (values: Values) => void;\n}\n\nexport const ProductDetails: Container<\n  ProductDetailsProps,\n  ProductModel | null\n> = ({\n  sku,\n  hideSku,\n  hideQuantity,\n  hideShortDescription,\n  hideDescription,\n  hideAttributes,\n  hideURLParams,\n  hideSelectedOptionValue,\n  slots,\n  children,\n  initialData,\n  carousel,\n  optionsConfig,\n  onAddToCart,\n  ...props\n}) => {\n  // i18n\n  const AddToCartLabel = useText('PDP.Product.AddToCart.label').label;\n  const IncrementerLabel = useText('PDP.Product.Incrementer.label').label;\n  const DetailsLabel = useText('PDP.Product.Details.label').label;\n\n  // TODO: Investigate if the \"|| 'en-US' \" is really necessary\n  const [locale, setLocale] = useState<Lang>(config.getConfig().defaultLocale as Lang || 'en-US');\n\n  const [selectionsToUpdate, setSelectionsToUpdate] = useState<Option[]>();\n\n  const [data = null, setData] = useState(initialData);\n\n  const [values, setValues] = useState<Values>(() => {\n    const defaultValues: Values = { sku, quantity: 1 };\n\n    if (data?.optionUIDs) {\n      defaultValues.optionsUIDs = data.optionUIDs;\n    }\n    return defaultValues;\n  });\n\n  // the context is invalid for a configurable product that doesn't have all the options selected\n  const [valid, setValid] = useState(() => {\n    return !(\n      data?.options &&\n      data?.options?.length > 0 &&\n      data?.optionUIDs?.length !== data?.options.length\n    );\n  });\n\n  const defaultSlotContext: DefaultSlotContext = { data, values, valid };\n\n  // Locale\n  useEffect(() => {\n    const localeEvent = events.on('locale', (payload: string) => {\n      if (payload === locale) return;\n\n      setLocale(payload as Lang);\n\n      getProductData(sku).then(setData);\n\n      // TODO: need to keep the optionsUIDs when locale changes\n      // if (values?.optionsUIDs) {\n      //   getRefinedProduct(sku, values?.optionsUIDs).then(setData);\n      // } else {\n      //   getProductData(sku).then(setData);\n      // }\n    });\n    return () => {\n      localeEvent?.off();\n    };\n  }, [locale, sku]);\n\n  // Callbacks\n  const handleOnValues = useCallback(\n    (newValues: { [key: string]: string | number }) => {\n      setValues((prev) => ({ ...prev, ...newValues }));\n    },\n    []\n  );\n\n  const handleOptionSelected = useCallback(\n    (selections: { [id: string]: { label: string; value: string } }) => {\n      // options Selected\n      let optionsUIDs = Object.keys(selections)\n        .map((id) => selections[id].value)\n        .filter((element) => element !== undefined);\n\n      // set optionUIDs to URL params\n      // ?optionsUIDs=1,2,3\n      if (!hideURLParams) {\n        setUrlParams({ optionsUIDs: optionsUIDs.join(',') });\n      }\n\n      // update state\n      setValues((prev) => ({ ...prev, optionsUIDs }));\n      setValid(optionsUIDs?.length === data?.options?.length);\n\n      // get refined product data and update state\n      getRefinedProduct(sku, optionsUIDs, optionsConfig?.anchorOptions).then((next) => {\n        setData(next);\n\n        // special processing for anchor options (options that should not be refined when other options are selected)\n        if (optionsConfig?.anchorOptions?.length) {\n          processUpdates(next, optionsUIDs);\n        }\n      });\n    },\n    [sku]\n  );\n\n  const processUpdates = useCallback((next: ProductModel | null, previousOptionsUIDs: string[]) => {\n    const updatedOptionsUIDs = next?.optionUIDs ?? [];\n    const haveSameValues = previousOptionsUIDs.every(item => updatedOptionsUIDs.includes(item));\n    if (!haveSameValues) {\n      setSelectionsToUpdate(next?.options);\n      setValues((prev) => ({ ...prev, optionsUIDs: updatedOptionsUIDs }));\n      setValid(updatedOptionsUIDs?.length === next?.options?.length);\n    }\n  }, [sku]);\n\n  const handleOnErrors = useCallback((_errors: { [id: string]: string }) => {\n    if (Object.keys(_errors).length !== 0) setValid(false);\n  }, []);\n\n  // Product Attributes\n  const attributes = useMemo(() => {\n    return data?.attributes?.map(({ label, value }, key: number) => {\n      const __html = isDateValid(value)\n        ? toDateString(value, locale)\n        : value.toString();\n\n      return (\n        <li key={key}>\n          {/* eslint-disable-next-line react/no-danger */}\n          {label}: <span dangerouslySetInnerHTML={{ __html }} />\n        </li>\n      );\n    });\n  }, [data?.attributes, locale]);\n\n  const quantity =\n    !hideQuantity && data?.inStock ? (\n      <Slot\n        name=\"Quantity\"\n        slot={slots?.Quantity}\n        context={{ ...defaultSlotContext }}\n      >\n        <Incrementer\n          key=\"quantity\"\n          name=\"quantity\"\n          defaultValue={values.quantity.toString()}\n          min={1}\n          aria-label={IncrementerLabel}\n          className=\"pdp-product__quantity\"\n          onValue={(quantity) => {\n            handleOnValues({ quantity: Number(quantity) });\n          }}\n        />\n      </Slot>\n    ) : undefined;\n\n  const renderOptions = () => {\n    if (data?.options) {\n      return (\n        <Slot name=\"Options\" slot={slots?.Options} context={{ ...defaultSlotContext }}>\n          <Swatches\n            options={data.options}\n            defaultOptions={values.optionsUIDs}\n            selectionsToUpdate={selectionsToUpdate}\n            hideSelectedValue={hideSelectedOptionValue}\n            onValues={handleOptionSelected}\n            onErrors={handleOnErrors}\n          />\n        </Slot>\n      );\n    }\n  };\n\n  return (\n    <div {...props}>\n      <Product\n        title={\n          <Slot\n            name=\"Title\"\n            slot={slots?.Title}\n            context={{ ...defaultSlotContext }}\n          >\n            {data?.name}\n          </Slot>\n        }\n        sku={\n          hideSku ? undefined : (\n            <Slot\n              name=\"SKU\"\n              slot={slots?.SKU}\n              context={{ ...defaultSlotContext }}\n            >\n              {data?.sku}\n            </Slot>\n          )\n        }\n        options={renderOptions()}\n        breadcrumbs={\n          slots?.Breadcrumbs && (\n            <Slot\n              name=\"Breadcrumbs\"\n              slot={slots?.Breadcrumbs}\n              context={{\n                ...defaultSlotContext,\n\n                setSeparator(callback) {\n                  this._registerMethod((...attrs) => {\n                    const nextSeparator = callback(...attrs);\n\n                    const separator = nextSeparator && <Icon source={nextSeparator} />;\n\n                    this._setProps((prev: any) => {\n                      return { ...prev, separator };\n                    });\n                  });\n                },\n\n                appendLink(callback) {\n                  this._registerMethod((...attrs) => {\n                    const { text, ...p } = callback(...attrs);\n\n                    const link = <a {...p}>{text}</a>;\n\n                    this._setProps((prev: any) => {\n                      return {\n                        ...prev,\n                        categories: [...(prev.categories || []), link],\n                      };\n                    });\n                  });\n                },\n\n                appendHTMLElement(callback) {\n                  this._registerMethod((...attrs) => {\n                    const domElement = callback(...attrs);\n\n                    const vnode = this._htmlElementToVNode(domElement);\n\n                    this._setProps((prev: any) => {\n                      return {\n                        ...prev,\n                        categories: [...(prev.categories || []), vnode],\n                      };\n                    });\n                  });\n                },\n              }}\n              render={({ separator, categories }) => {\n                return (\n                  <Breadcrumbs separator={separator} categories={categories} />\n                );\n              }}\n            />\n          )\n        }\n        quantity={quantity}\n        actions={\n          <Slot\n            name=\"Actions\"\n            slot={slots?.Actions}\n            context={{\n              ...defaultSlotContext,\n\n              appendButton(callback) {\n                this._registerMethod((...attrs) => {\n                  const _button = callback(...attrs);\n\n                  if (!_button) return;\n\n                  const { text, icon, ...buttonProps } = _button;\n\n                  const button = (\n                    <Button\n                      type=\"button\"\n                      {...buttonProps}\n                      icon={icon && <Icon source={icon} />}\n                    >\n                      {text}\n                    </Button>\n                  );\n\n                  this._setProps((prev: any) => ({\n                    children: [...(prev.children || []), button],\n                  }));\n                });\n              },\n            }}\n          >\n            {\n              // Default Add to Cart button if no slot is provided\n              !slots?.Actions && (\n                <Button\n                  size=\"medium\"\n                  type=\"submit\"\n                  icon={<Icon source=\"Cart\" />}\n                  disabled={!data?.inStock || !valid}\n                  aria-label={AddToCartLabel}\n                  onClick={() => {\n                    return onAddToCart?.(values);\n                  }}\n                >\n                  {AddToCartLabel}\n                </Button>\n              )\n            }\n          </Slot>\n        }\n        shortDescription={\n          !hideShortDescription ? (\n            <Slot\n              name=\"ShortDescription\"\n              slot={slots?.ShortDescription}\n              context={{ ...defaultSlotContext }}\n            >\n              {/* eslint-disable-next-line react/no-danger */}\n              <div dangerouslySetInnerHTML={{ __html: data?.shortDescription ?? '' }} />\n            </Slot>\n          ) : undefined\n        }\n        description={\n          !hideDescription ? (\n            <Slot\n              name=\"Description\"\n              slot={slots?.Description}\n              context={{ ...defaultSlotContext }}\n            >\n              {/* eslint-disable-next-line react/no-danger */}\n              <div dangerouslySetInnerHTML={{ __html: data?.description ?? '' }} />\n            </Slot>\n          ) : undefined\n        }\n        images={\n          data?.images?.map(({ label, url }) => (\n            <Image\n              key={url}\n              title={label}\n              alt={label}\n              src={url}\n              // TODO: change width/height for image aspect ratio\n              // pending https://jira.corp.adobe.com/browse/DATA-5122\n              width={carousel?.imageParams?.width ?? 960}\n              height={carousel?.imageParams?.height ?? 1191}\n              params={carousel?.imageParams ?? { width: 960 }}\n            />\n          )) ?? []\n        }\n        specialPrice={\n          data?.prices?.visible ? (\n            <Slot\n              name=\"SpecialPrice\"\n              slot={slots?.SpecialPrice}\n              context={{ ...defaultSlotContext }}\n            >\n              <PriceRange {...data.prices.final} locale={toLanguageTag(locale)} />\n            </Slot>\n          ) : undefined\n        }\n        price={\n          data?.prices?.visible &&\n          data.prices.regular &&\n          data.prices.final.amount !== data?.prices.regular.amount ? (\n            <Slot\n              name=\"RegularPrice\"\n              slot={slots?.RegularPrice}\n              context={{ ...defaultSlotContext }}\n            >\n              <PriceRange\n                {...data.prices.regular}\n                locale={toLanguageTag(locale)}\n              />\n            </Slot>\n          ) : undefined\n        }\n        carouselConfig={{\n          ...carousel,\n          thumbnails: carousel\n            ? data?.images?.map(({ label, url }) => (\n                <Image\n                  key={url}\n                  title={label}\n                  alt={label}\n                  src={url}\n                  // TODO: change width/height for image aspect ratio\n                  // pending https://jira.corp.adobe.com/browse/DATA-5122\n                  width={carousel?.thumbnailParams?.width ?? 200}\n                  height={carousel?.thumbnailParams?.height ?? 248}\n                  params={carousel?.thumbnailParams ?? { width: 200 }}\n                />\n              )) ?? []\n            : [],\n        }}\n        outOfStock={!data?.inStock}\n        attributes={\n          !hideAttributes ? (\n            <Slot\n              name=\"Attributes\"\n              slot={slots?.Attributes}\n              context={{ ...defaultSlotContext }}\n            >\n              {attributes?.length ? (\n                <>\n                  {DetailsLabel}\n                  <ul>{attributes}</ul>\n                </>\n              ) : null}\n            </Slot>\n          ) : undefined\n        }\n        galleryContent={\n          slots?.GalleryContent && (\n            <Slot\n              name=\"GalleryContent\"\n              slot={slots.GalleryContent}\n              context={{ ...defaultSlotContext }}\n            />\n          )\n        }\n        infoContent={\n          slots?.InfoContent && (\n            <Slot\n              name=\"InfoContent\"\n              slot={slots.InfoContent}\n              context={{ ...defaultSlotContext }}\n            />\n          )\n        }\n        productContent={\n          slots?.Content && (\n            <Slot\n              name=\"Content\"\n              slot={slots.Content}\n              context={{ ...defaultSlotContext }}\n            />\n          )\n        }\n      />\n    </div>\n  );\n};\n\nProductDetails.getInitialData = async function ({ sku, optionsConfig }) {\n  // check if default selections are made\n  const defaultSelections = getUrlParams().optionsUIDs?.split(',') || config?.getConfig()?.models?.ProductDetails?.initialData?.optionsUIDs;\n\n  // if it has selections, refine the product data\n  if (defaultSelections?.length) {\n    return await getRefinedProduct(sku, defaultSelections, optionsConfig?.anchorOptions);\n  }\n\n  // otherwise return the product data\n  return await getProductData(sku);\n};\n"],"file":"containers/ProductDetails.js"}